import { BreakpointObserver, Breakpoints, } from '@angular/cdk/layout';
import { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, ViewChild, } from '@angular/core';
import { Subscription } from 'rxjs';
import { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';
import { ViewingDirection } from '../../core/models/viewing-direction';
import { CanvasService } from './../../core/canvas-service/canvas-service';
import { MimeViewerIntl } from './../../core/intl';
import { ViewerService } from './../../core/viewer-service/viewer.service';
import { ModeService } from './../../core/mode-service/mode.service';
import { easeInWithDelay, rotate45 } from './../../shared/animations';
import * as i0 from "@angular/core";
import * as i1 from "./../../core/intl";
import * as i2 from "@angular/cdk/layout";
import * as i3 from "./../../core/viewer-service/viewer.service";
import * as i4 from "./../../core/canvas-service/canvas-service";
import * as i5 from "../../core/iiif-manifest-service/iiif-manifest-service";
import * as i6 from "./../../core/mode-service/mode.service";
import * as i7 from "@angular/common";
import * as i8 from "@angular/material/button";
import * as i9 from "@angular/material/icon";
import * as i10 from "@angular/material/tooltip";
export class OsdToolbarComponent {
    constructor(intl, breakpointObserver, changeDetectorRef, viewerService, canvasService, iiifManifestService, modeService) {
        this.intl = intl;
        this.breakpointObserver = breakpointObserver;
        this.changeDetectorRef = changeDetectorRef;
        this.viewerService = viewerService;
        this.canvasService = canvasService;
        this.iiifManifestService = iiifManifestService;
        this.modeService = modeService;
        this.numberOfCanvasGroups = 0;
        this.isFirstCanvasGroup = false;
        this.isLastCanvasGroup = false;
        this.invert = false;
        this.isWeb = false;
        this.fabState = 'closed';
        this.fabIcon = 'menu';
        this.showControlButtons = false;
        this.baseAnimationDelay = 20;
        this.isZoomed = true;
        this.subscriptions = new Subscription();
    }
    ngOnInit() {
        this.subscriptions.add(this.modeService.onChange.subscribe(() => {
            this.isZoomed = this.modeService.isPageZoomed();
            this.changeDetectorRef.detectChanges();
        }));
        this.subscriptions.add(this.breakpointObserver
            .observe([Breakpoints.Web])
            .subscribe((value) => {
            this.isWeb = value.matches;
            this.changeDetectorRef.detectChanges();
        }));
        this.subscriptions.add(this.iiifManifestService.currentManifest.subscribe((manifest) => {
            if (manifest) {
                this.invert = manifest.viewingDirection === ViewingDirection.LTR;
                this.changeDetectorRef.detectChanges();
            }
        }));
        this.subscriptions.add(this.viewerService.onCanvasGroupIndexChange.subscribe((currentCanvasGroupIndex) => {
            this.numberOfCanvasGroups = this.canvasService.numberOfCanvasGroups;
            this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(currentCanvasGroupIndex);
            this.isLastCanvasGroup = this.isOnLastCanvasGroup(currentCanvasGroupIndex);
            this.changeDetectorRef.detectChanges();
        }));
        this.subscriptions.add(this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck()));
    }
    toggleFab() {
        this.showControlButtons = !this.showControlButtons;
        this.fabState = this.fabState === 'closed' ? 'open' : 'closed';
        this.fabIcon = this.fabState === 'closed' ? 'menu' : 'clear';
    }
    zoomIn() {
        this.viewerService.zoomIn();
    }
    zoomOut() {
        this.viewerService.zoomOut();
    }
    home() {
        this.viewerService.home();
    }
    rotate() {
        this.viewerService.rotate();
    }
    ngOnDestroy() {
        this.subscriptions.unsubscribe();
    }
    goToPreviousCanvasGroup() {
        this.viewerService.goToPreviousCanvasGroup();
    }
    goToNextCanvasGroup() {
        this.viewerService.goToNextCanvasGroup();
    }
    isOnFirstCanvasGroup(currentCanvasGroupIndex) {
        return currentCanvasGroupIndex === 0;
    }
    isOnLastCanvasGroup(currentCanvasGroupIndex) {
        return currentCanvasGroupIndex === this.numberOfCanvasGroups - 1;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.1.0", ngImport: i0, type: OsdToolbarComponent, deps: [{ token: i1.MimeViewerIntl }, { token: i2.BreakpointObserver }, { token: i0.ChangeDetectorRef }, { token: i3.ViewerService }, { token: i4.CanvasService }, { token: i5.IiifManifestService }, { token: i6.ModeService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.1.0", type: OsdToolbarComponent, selector: "mime-osd-toolbar", viewQueries: [{ propertyName: "container", first: true, predicate: ["container"], descendants: true, static: true }], ngImport: i0, template: "<div #container class=\"osd-toolbar\">\n  <div *ngIf=\"isWeb\" class=\"flex gap-2\">\n    <div class=\"flex flex-col gap-2\">\n      <button\n        mat-fab\n        aria-controls=\"osdControls\"\n        data-testid=\"fabButton\"\n        [attr.aria-expanded]=\"fabState === 'open'\"\n        [attr.aria-label]=\"\n          fabState === 'open'\n            ? intl.closeOsdControlPanelLabel\n            : intl.openOsdControlPanelLabel\n        \"\n        [matTooltip]=\"\n          fabState === 'open'\n            ? intl.closeOsdControlPanelLabel\n            : intl.openOsdControlPanelLabel\n        \"\n        (click)=\"toggleFab()\"\n      >\n        <mat-icon [@rotate45]=\"fabState\">{{ fabIcon }}</mat-icon>\n      </button>\n    </div>\n    <div id=\"osdControls\" class=\"flex items-center gap-2\">\n      <ng-container *ngIf=\"invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateBeforeButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.previousPageLabel\"\n          [matTooltip]=\"intl.previousPageLabel\"\n          [disabled]=\"isFirstCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: { delayEnter: 0, delayLeave: baseAnimationDelay * 5 }\n          }\"\n          (click)=\"goToPreviousCanvasGroup()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"!invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateNextButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.nextPageLabel\"\n          [matTooltip]=\"intl.nextPageLabel\"\n          [disabled]=\"isLastCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: { delayEnter: 0, delayLeave: baseAnimationDelay * 5 }\n          }\"\n          (click)=\"goToNextCanvasGroup()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateNextButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.nextPageLabel\"\n          [matTooltip]=\"intl.nextPageLabel\"\n          [disabled]=\"isLastCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: {\n              delayEnter: baseAnimationDelay,\n              delayLeave: baseAnimationDelay * 4\n            }\n          }\"\n          (click)=\"goToNextCanvasGroup()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"!invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateBeforeButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.previousPageLabel\"\n          [matTooltip]=\"intl.previousPageLabel\"\n          [disabled]=\"isFirstCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: {\n              delayEnter: baseAnimationDelay,\n              delayLeave: baseAnimationDelay * 4\n            }\n          }\"\n          (click)=\"goToPreviousCanvasGroup()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"zoomIn()\"\n        data-testid=\"zoomInButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.zoomInLabel\"\n        [matTooltip]=\"intl.zoomInLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: {\n            delayEnter: baseAnimationDelay * 2,\n            delayLeave: baseAnimationDelay * 3\n          }\n        }\"\n      >\n        <mat-icon>zoom_in</mat-icon>\n      </button>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"home()\"\n        data-testid=\"homeButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.resetZoomLabel\"\n        [disabled]=\"!isZoomed\"\n        [matTooltip]=\"intl.resetZoomLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: {\n            delayEnter: baseAnimationDelay * 3,\n            delayLeave: baseAnimationDelay * 2\n          }\n        }\"\n      >\n        <mat-icon>home</mat-icon>\n      </button>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"zoomOut()\"\n        data-testid=\"zoomOutButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.zoomOutLabel\"\n        [matTooltip]=\"intl.zoomOutLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: {\n            delayEnter: baseAnimationDelay * 4,\n            delayLeave: baseAnimationDelay\n          }\n        }\"\n      >\n        <mat-icon>zoom_out</mat-icon>\n      </button>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"rotate()\"\n        data-testid=\"rotateButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.rotateCwLabel\"\n        [matTooltip]=\"intl.rotateCwLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: { delayEnter: baseAnimationDelay * 5, delayLeave: 0 }\n        }\"\n      >\n        <mat-icon>rotate_right</mat-icon>\n      </button>\n    </div>\n  </div>\n</div>\n", styles: [":host{z-index:2}.osd-toolbar{position:absolute;background:transparent;width:auto;border-radius:8px;margin:8px 0 0 8px}\n"], dependencies: [{ kind: "directive", type: i7.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i8.MatMiniFabButton, selector: "button[mat-mini-fab]", exportAs: ["matButton"] }, { kind: "component", type: i8.MatFabButton, selector: "button[mat-fab]", inputs: ["extended"], exportAs: ["matButton"] }, { kind: "component", type: i9.MatIcon, selector: "mat-icon", inputs: ["color", "inline", "svgIcon", "fontSet", "fontIcon"], exportAs: ["matIcon"] }, { kind: "directive", type: i10.MatTooltip, selector: "[matTooltip]", inputs: ["matTooltipPosition", "matTooltipPositionAtOrigin", "matTooltipDisabled", "matTooltipShowDelay", "matTooltipHideDelay", "matTooltipTouchGestures", "matTooltip", "matTooltipClass"], exportAs: ["matTooltip"] }], animations: [rotate45, easeInWithDelay], changeDetection: i0.ChangeDetectionStrategy.OnPush }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.1.0", ngImport: i0, type: OsdToolbarComponent, decorators: [{
            type: Component,
            args: [{ selector: 'mime-osd-toolbar', changeDetection: ChangeDetectionStrategy.OnPush, animations: [rotate45, easeInWithDelay], template: "<div #container class=\"osd-toolbar\">\n  <div *ngIf=\"isWeb\" class=\"flex gap-2\">\n    <div class=\"flex flex-col gap-2\">\n      <button\n        mat-fab\n        aria-controls=\"osdControls\"\n        data-testid=\"fabButton\"\n        [attr.aria-expanded]=\"fabState === 'open'\"\n        [attr.aria-label]=\"\n          fabState === 'open'\n            ? intl.closeOsdControlPanelLabel\n            : intl.openOsdControlPanelLabel\n        \"\n        [matTooltip]=\"\n          fabState === 'open'\n            ? intl.closeOsdControlPanelLabel\n            : intl.openOsdControlPanelLabel\n        \"\n        (click)=\"toggleFab()\"\n      >\n        <mat-icon [@rotate45]=\"fabState\">{{ fabIcon }}</mat-icon>\n      </button>\n    </div>\n    <div id=\"osdControls\" class=\"flex items-center gap-2\">\n      <ng-container *ngIf=\"invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateBeforeButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.previousPageLabel\"\n          [matTooltip]=\"intl.previousPageLabel\"\n          [disabled]=\"isFirstCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: { delayEnter: 0, delayLeave: baseAnimationDelay * 5 }\n          }\"\n          (click)=\"goToPreviousCanvasGroup()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"!invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateNextButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.nextPageLabel\"\n          [matTooltip]=\"intl.nextPageLabel\"\n          [disabled]=\"isLastCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: { delayEnter: 0, delayLeave: baseAnimationDelay * 5 }\n          }\"\n          (click)=\"goToNextCanvasGroup()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateNextButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.nextPageLabel\"\n          [matTooltip]=\"intl.nextPageLabel\"\n          [disabled]=\"isLastCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: {\n              delayEnter: baseAnimationDelay,\n              delayLeave: baseAnimationDelay * 4\n            }\n          }\"\n          (click)=\"goToNextCanvasGroup()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n      <ng-container *ngIf=\"!invert\">\n        <button\n          *ngIf=\"showControlButtons\"\n          data-testid=\"navigateBeforeButton\"\n          mat-mini-fab\n          [attr.aria-label]=\"intl.previousPageLabel\"\n          [matTooltip]=\"intl.previousPageLabel\"\n          [disabled]=\"isFirstCanvasGroup\"\n          [@easeInWithDelay]=\"{\n            value: '',\n            params: {\n              delayEnter: baseAnimationDelay,\n              delayLeave: baseAnimationDelay * 4\n            }\n          }\"\n          (click)=\"goToPreviousCanvasGroup()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      </ng-container>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"zoomIn()\"\n        data-testid=\"zoomInButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.zoomInLabel\"\n        [matTooltip]=\"intl.zoomInLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: {\n            delayEnter: baseAnimationDelay * 2,\n            delayLeave: baseAnimationDelay * 3\n          }\n        }\"\n      >\n        <mat-icon>zoom_in</mat-icon>\n      </button>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"home()\"\n        data-testid=\"homeButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.resetZoomLabel\"\n        [disabled]=\"!isZoomed\"\n        [matTooltip]=\"intl.resetZoomLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: {\n            delayEnter: baseAnimationDelay * 3,\n            delayLeave: baseAnimationDelay * 2\n          }\n        }\"\n      >\n        <mat-icon>home</mat-icon>\n      </button>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"zoomOut()\"\n        data-testid=\"zoomOutButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.zoomOutLabel\"\n        [matTooltip]=\"intl.zoomOutLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: {\n            delayEnter: baseAnimationDelay * 4,\n            delayLeave: baseAnimationDelay\n          }\n        }\"\n      >\n        <mat-icon>zoom_out</mat-icon>\n      </button>\n      <button\n        *ngIf=\"showControlButtons\"\n        (click)=\"rotate()\"\n        data-testid=\"rotateButton\"\n        mat-mini-fab\n        [attr.aria-label]=\"intl.rotateCwLabel\"\n        [matTooltip]=\"intl.rotateCwLabel\"\n        [@easeInWithDelay]=\"{\n          value: '',\n          params: { delayEnter: baseAnimationDelay * 5, delayLeave: 0 }\n        }\"\n      >\n        <mat-icon>rotate_right</mat-icon>\n      </button>\n    </div>\n  </div>\n</div>\n", styles: [":host{z-index:2}.osd-toolbar{position:absolute;background:transparent;width:auto;border-radius:8px;margin:8px 0 0 8px}\n"] }]
        }], ctorParameters: () => [{ type: i1.MimeViewerIntl }, { type: i2.BreakpointObserver }, { type: i0.ChangeDetectorRef }, { type: i3.ViewerService }, { type: i4.CanvasService }, { type: i5.IiifManifestService }, { type: i6.ModeService }], propDecorators: { container: [{
                type: ViewChild,
                args: ['container', { static: true }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib3NkLXRvb2xiYXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vbGlicy9uZ3gtbWltZS9zcmMvbGliL3ZpZXdlci9vc2QtdG9vbGJhci9vc2QtdG9vbGJhci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL25neC1taW1lL3NyYy9saWIvdmlld2VyL29zZC10b29sYmFyL29zZC10b29sYmFyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxrQkFBa0IsRUFDbEIsV0FBVyxHQUVaLE1BQU0scUJBQXFCLENBQUM7QUFDN0IsT0FBTyxFQUNMLHVCQUF1QixFQUN2QixpQkFBaUIsRUFDakIsU0FBUyxFQUNULFVBQVUsRUFHVixTQUFTLEdBQ1YsTUFBTSxlQUFlLENBQUM7QUFDdkIsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLE1BQU0sQ0FBQztBQUNwQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsTUFBTSx3REFBd0QsQ0FBQztBQUU3RixPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUN2RSxPQUFPLEVBQUUsYUFBYSxFQUFFLE1BQU0sNENBQTRDLENBQUM7QUFDM0UsT0FBTyxFQUFFLGNBQWMsRUFBRSxNQUFNLG1CQUFtQixDQUFDO0FBQ25ELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSw0Q0FBNEMsQ0FBQztBQUMzRSxPQUFPLEVBQUUsV0FBVyxFQUFFLE1BQU0sd0NBQXdDLENBQUM7QUFDckUsT0FBTyxFQUFFLGVBQWUsRUFBRSxRQUFRLEVBQUUsTUFBTSwyQkFBMkIsQ0FBQzs7Ozs7Ozs7Ozs7O0FBU3RFLE1BQU0sT0FBTyxtQkFBbUI7SUFjOUIsWUFDUyxJQUFvQixFQUNuQixrQkFBc0MsRUFDdEMsaUJBQW9DLEVBQ3BDLGFBQTRCLEVBQzVCLGFBQTRCLEVBQzVCLG1CQUF3QyxFQUN4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QSxtNkJEMUljLENBQUMsUUFBUSxFQUFFLGVBQWUsQ0FBQzs7MkZBRTVCLG1CQUFtQjtrQkFQL0IsU0FBUzsrQkFDRSxrQkFBa0IsbUJBR1gsdUJBQXVCLENBQUMsTUFBTSxjQUNuQyxDQUFDLFFBQVEsRUFBRSxlQUFlLENBQUM7d1FBR0csU0FBUztzQkFBbEQsU0FBUzt1QkFBQyxXQUFXLEVBQUUsRUFBRSxNQUFNLEVBQUUsSUFBSSxFQUFFIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQnJlYWtwb2ludE9ic2VydmVyLFxuICBCcmVha3BvaW50cyxcbiAgQnJlYWtwb2ludFN0YXRlLFxufSBmcm9tICdAYW5ndWxhci9jZGsvbGF5b3V0JztcbmltcG9ydCB7XG4gIENoYW5nZURldGVjdGlvblN0cmF0ZWd5LFxuICBDaGFuZ2VEZXRlY3RvclJlZixcbiAgQ29tcG9uZW50LFxuICBFbGVtZW50UmVmLFxuICBPbkRlc3Ryb3ksXG4gIE9uSW5pdCxcbiAgVmlld0NoaWxkLFxufSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IFN1YnNjcmlwdGlvbiB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgSWlpZk1hbmlmZXN0U2VydmljZSB9IGZyb20gJy4uLy4uL2NvcmUvaWlpZi1tYW5pZmVzdC1zZXJ2aWNlL2lpaWYtbWFuaWZlc3Qtc2VydmljZSc7XG5pbXBvcnQgeyBNYW5pZmVzdCB9IGZyb20gJy4uLy4uL2NvcmUvbW9kZWxzL21hbmlmZXN0JztcbmltcG9ydCB7IFZpZXdpbmdEaXJlY3Rpb24gfSBmcm9tICcuLi8uLi9jb3JlL21vZGVscy92aWV3aW5nLWRpcmVjdGlvbic7XG5pbXBvcnQgeyBDYW52YXNTZXJ2aWNlIH0gZnJvbSAnLi8uLi8uLi9jb3JlL2NhbnZhcy1zZXJ2aWNlL2NhbnZhcy1zZXJ2aWNlJztcbmltcG9ydCB7IE1pbWVWaWV3ZXJJbnRsIH0gZnJvbSAnLi8uLi8uLi9jb3JlL2ludGwnO1xuaW1wb3J0IHsgVmlld2VyU2VydmljZSB9IGZyb20gJy4vLi4vLi4vY29yZS92aWV3ZXItc2VydmljZS92aWV3ZXIuc2VydmljZSc7XG5pbXBvcnQgeyBNb2RlU2VydmljZSB9IGZyb20gJy4vLi4vLi4vY29yZS9tb2RlLXNlcnZpY2UvbW9kZS5zZXJ2aWNlJztcbmltcG9ydCB7IGVhc2VJbldpdGhEZWxheSwgcm90YXRlNDUgfSBmcm9tICcuLy4uLy4uL3NoYXJlZC9hbmltYXRpb25zJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbWltZS1vc2QtdG9vbGJhcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9vc2QtdG9vbGJhci5jb21wb25lbnQuaHRtbCcsXG4gIHN0eWxlVXJsczogWycuL29zZC10b29sYmFyLmNvbXBvbmVudC5zY3NzJ10sXG4gIGNoYW5nZURldGVjdGlvbjogQ2hhbmdlRGV0ZWN0aW9uU3RyYXRlZ3kuT25QdXNoLFxuICBhbmltYXRpb25zOiBbcm90YXRlNDUsIGVhc2VJbldpdGhEZWxheV0sXG59KVxuZXhwb3J0IGNsYXNzIE9zZFRvb2xiYXJDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQsIE9uRGVzdHJveSB7XG4gIEBWaWV3Q2hpbGQoJ2NvbnRhaW5lcicsIHsgc3RhdGljOiB0cnVlIH0pIGNvbnRhaW5lciE6IEVsZW1lbnRSZWY7XG4gIHB1YmxpYyBudW1iZXJPZkNhbnZhc0dyb3VwcyA9IDA7XG4gIHB1YmxpYyBpc0ZpcnN0Q2FudmFzR3JvdXAgPSBmYWxzZTtcbiAgcHVibGljIGlzTGFzdENhbnZhc0dyb3VwID0gZmFsc2U7XG4gIGludmVydCA9IGZhbHNlO1xuICBpc1dlYiA9IGZhbHNlO1xuICBmYWJTdGF0ZSA9ICdjbG9zZWQnO1xuICBmYWJJY29uID0gJ21lbnUnO1xuICBzaG93Q29udHJvbEJ1dHRvbnMgPSBmYWxzZTtcbiAgYmFzZUFuaW1hdGlvbkRlbGF5ID0gMjA7XG4gIGlzWm9vbWVkID0gdHJ1ZTtcbiAgcHJpdmF0ZSBzdWJzY3JpcHRpb25zID0gbmV3IFN1YnNjcmlwdGlvbigpO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHB1YmxpYyBpbnRsOiBNaW1lVmlld2VySW50bCxcbiAgICBwcml2YXRlIGJyZWFrcG9pbnRPYnNlcnZlcjogQnJlYWtwb2ludE9ic2VydmVyLFxuICAgIHByaXZhdGUgY2hhbmdlRGV0ZWN0b3JSZWY6IENoYW5nZURldGVjdG9yUmVmLFxuICAgIHByaXZhdGUgdmlld2VyU2VydmljZTogVmlld2VyU2VydmljZSxcbiAgICBwcml2YXRlIGNhbnZhc1NlcnZpY2U6IENhbnZhc1NlcnZpY2UsXG4gICAgcHJpdmF0ZSBpaWlmTWFuaWZlc3RTZXJ2aWNlOiBJaWlmTWFuaWZlc3RTZXJ2aWNlLFxuICAgIHByaXZhdGUgbW9kZVNlcnZpY2U6IE1vZGVTZXJ2aWNlXG4gICkge31cblxuICBuZ09uSW5pdCgpIHtcbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKFxuICAgICAgdGhpcy5tb2RlU2VydmljZS5vbkNoYW5nZS5zdWJzY3JpYmUoKCkgPT4ge1xuICAgICAgICB0aGlzLmlzWm9vbWVkID0gdGhpcy5tb2RlU2VydmljZS5pc1BhZ2Vab29tZWQoKTtcbiAgICAgICAgdGhpcy5jaGFuZ2VEZXRlY3RvclJlZi5kZXRlY3RDaGFuZ2VzKCk7XG4gICAgICB9KVxuICAgICk7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKFxuICAgICAgdGhpcy5icmVha3BvaW50T2JzZXJ2ZXJcbiAgICAgICAgLm9ic2VydmUoW0JyZWFrcG9pbnRzLldlYl0pXG4gICAgICAgIC5zdWJzY3JpYmUoKHZhbHVlOiBCcmVha3BvaW50U3RhdGUpID0+IHtcbiAgICAgICAgICB0aGlzLmlzV2ViID0gdmFsdWUubWF0Y2hlcztcbiAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfSlcbiAgICApO1xuXG4gICAgdGhpcy5zdWJzY3JpcHRpb25zLmFkZChcbiAgICAgIHRoaXMuaWlpZk1hbmlmZXN0U2VydmljZS5jdXJyZW50TWFuaWZlc3Quc3Vic2NyaWJlKFxuICAgICAgICAobWFuaWZlc3Q6IE1hbmlmZXN0IHwgbnVsbCkgPT4ge1xuICAgICAgICAgIGlmIChtYW5pZmVzdCkge1xuICAgICAgICAgICAgdGhpcy5pbnZlcnQgPSBtYW5pZmVzdC52aWV3aW5nRGlyZWN0aW9uID09PSBWaWV3aW5nRGlyZWN0aW9uLkxUUjtcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYuZGV0ZWN0Q2hhbmdlcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKFxuICAgICAgdGhpcy52aWV3ZXJTZXJ2aWNlLm9uQ2FudmFzR3JvdXBJbmRleENoYW5nZS5zdWJzY3JpYmUoXG4gICAgICAgIChjdXJyZW50Q2FudmFzR3JvdXBJbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgdGhpcy5udW1iZXJPZkNhbnZhc0dyb3VwcyA9IHRoaXMuY2FudmFzU2VydmljZS5udW1iZXJPZkNhbnZhc0dyb3VwcztcbiAgICAgICAgICB0aGlzLmlzRmlyc3RDYW52YXNHcm91cCA9IHRoaXMuaXNPbkZpcnN0Q2FudmFzR3JvdXAoXG4gICAgICAgICAgICBjdXJyZW50Q2FudmFzR3JvdXBJbmRleFxuICAgICAgICAgICk7XG4gICAgICAgICAgdGhpcy5pc0xhc3RDYW52YXNHcm91cCA9IHRoaXMuaXNPbkxhc3RDYW52YXNHcm91cChcbiAgICAgICAgICAgIGN1cnJlbnRDYW52YXNHcm91cEluZGV4XG4gICAgICAgICAgKTtcbiAgICAgICAgICB0aGlzLmNoYW5nZURldGVjdG9yUmVmLmRldGVjdENoYW5nZXMoKTtcbiAgICAgICAgfVxuICAgICAgKVxuICAgICk7XG5cbiAgICB0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKFxuICAgICAgdGhpcy5pbnRsLmNoYW5nZXMuc3Vic2NyaWJlKCgpID0+IHRoaXMuY2hhbmdlRGV0ZWN0b3JSZWYubWFya0ZvckNoZWNrKCkpXG4gICAgKTtcbiAgfVxuXG4gIHRvZ2dsZUZhYigpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dDb250cm9sQnV0dG9ucyA9ICF0aGlzLnNob3dDb250cm9sQnV0dG9ucztcbiAgICB0aGlzLmZhYlN0YXRlID0gdGhpcy5mYWJTdGF0ZSA9PT0gJ2Nsb3NlZCcgPyAnb3BlbicgOiAnY2xvc2VkJztcbiAgICB0aGlzLmZhYkljb24gPSB0aGlzLmZhYlN0YXRlID09PSAnY2xvc2VkJyA/ICdtZW51JyA6ICdjbGVhcic7XG4gIH1cblxuICB6b29tSW4oKTogdm9pZCB7XG4gICAgdGhpcy52aWV3ZXJTZXJ2aWNlLnpvb21JbigpO1xuICB9XG5cbiAgem9vbU91dCgpOiB2b2lkIHtcbiAgICB0aGlzLnZpZXdlclNlcnZpY2Uuem9vbU91dCgpO1xuICB9XG5cbiAgaG9tZSgpOiB2b2lkIHtcbiAgICB0aGlzLnZpZXdlclNlcnZpY2UuaG9tZSgpO1xuICB9XG5cbiAgcm90YXRlKCk6IHZvaWQge1xuICAgIHRoaXMudmlld2VyU2VydmljZS5yb3RhdGUoKTtcbiAgfVxuXG4gIG5nT25EZXN0cm95KCkge1xuICAgIHRoaXMuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpO1xuICB9XG5cbiAgcHVibGljIGdvVG9QcmV2aW91c0NhbnZhc0dyb3VwKCk6IHZvaWQge1xuICAgIHRoaXMudmlld2VyU2VydmljZS5nb1RvUHJldmlvdXNDYW52YXNHcm91cCgpO1xuICB9XG5cbiAgcHVibGljIGdvVG9OZXh0Q2FudmFzR3JvdXAoKTogdm9pZCB7XG4gICAgdGhpcy52aWV3ZXJTZXJ2aWNlLmdvVG9OZXh0Q2FudmFzR3JvdXAoKTtcbiAgfVxuXG4gIHByaXZhdGUgaXNPbkZpcnN0Q2FudmFzR3JvdXAoY3VycmVudENhbnZhc0dyb3VwSW5kZXg6IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIHJldHVybiBjdXJyZW50Q2FudmFzR3JvdXBJbmRleCA9PT0gMDtcbiAgfVxuXG4gIHByaXZhdGUgaXNPbkxhc3RDYW52YXNHcm91cChjdXJyZW50Q2FudmFzR3JvdXBJbmRleDogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGN1cnJlbnRDYW52YXNHcm91cEluZGV4ID09PSB0aGlzLm51bWJlck9mQ2FudmFzR3JvdXBzIC0gMTtcbiAgfVxufVxuIiwiPGRpdiAjY29udGFpbmVyIGNsYXNzPVwib3NkLXRvb2xiYXJcIj5cbiAgPGRpdiAqbmdJZj1cImlzV2ViXCIgY2xhc3M9XCJmbGV4IGdhcC0yXCI+XG4gICAgPGRpdiBjbGFzcz1cImZsZXggZmxleC1jb2wgZ2FwLTJcIj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgbWF0LWZhYlxuICAgICAgICBhcmlhLWNvbnRyb2xzPVwib3NkQ29udHJvbHNcIlxuICAgICAgICBkYXRhLXRlc3RpZD1cImZhYkJ1dHRvblwiXG4gICAgICAgIFthdHRyLmFyaWEtZXhwYW5kZWRdPVwiZmFiU3RhdGUgPT09ICdvcGVuJ1wiXG4gICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiXG4gICAgICAgICAgZmFiU3RhdGUgPT09ICdvcGVuJ1xuICAgICAgICAgICAgPyBpbnRsLmNsb3NlT3NkQ29udHJvbFBhbmVsTGFiZWxcbiAgICAgICAgICAgIDogaW50bC5vcGVuT3NkQ29udHJvbFBhbmVsTGFiZWxcbiAgICAgICAgXCJcbiAgICAgICAgW21hdFRvb2x0aXBdPVwiXG4gICAgICAgICAgZmFiU3RhdGUgPT09ICdvcGVuJ1xuICAgICAgICAgICAgPyBpbnRsLmNsb3NlT3NkQ29udHJvbFBhbmVsTGFiZWxcbiAgICAgICAgICAgIDogaW50bC5vcGVuT3NkQ29udHJvbFBhbmVsTGFiZWxcbiAgICAgICAgXCJcbiAgICAgICAgKGNsaWNrKT1cInRvZ2dsZUZhYigpXCJcbiAgICAgID5cbiAgICAgICAgPG1hdC1pY29uIFtAcm90YXRlNDVdPVwiZmFiU3RhdGVcIj57eyBmYWJJY29uIH19PC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICAgIDxkaXYgaWQ9XCJvc2RDb250cm9sc1wiIGNsYXNzPVwiZmxleCBpdGVtcy1jZW50ZXIgZ2FwLTJcIj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCJpbnZlcnRcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICpuZ0lmPVwic2hvd0NvbnRyb2xCdXR0b25zXCJcbiAgICAgICAgICBkYXRhLXRlc3RpZD1cIm5hdmlnYXRlQmVmb3JlQnV0dG9uXCJcbiAgICAgICAgICBtYXQtbWluaS1mYWJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImludGwucHJldmlvdXNQYWdlTGFiZWxcIlxuICAgICAgICAgIFttYXRUb29sdGlwXT1cImludGwucHJldmlvdXNQYWdlTGFiZWxcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCJpc0ZpcnN0Q2FudmFzR3JvdXBcIlxuICAgICAgICAgIFtAZWFzZUluV2l0aERlbGF5XT1cIntcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgICAgIHBhcmFtczogeyBkZWxheUVudGVyOiAwLCBkZWxheUxlYXZlOiBiYXNlQW5pbWF0aW9uRGVsYXkgKiA1IH1cbiAgICAgICAgICB9XCJcbiAgICAgICAgICAoY2xpY2spPVwiZ29Ub1ByZXZpb3VzQ2FudmFzR3JvdXAoKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8bWF0LWljb24+bmF2aWdhdGVfYmVmb3JlPC9tYXQtaWNvbj5cbiAgICAgICAgPC9idXR0b24+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cbiAgICAgIDxuZy1jb250YWluZXIgKm5nSWY9XCIhaW52ZXJ0XCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAqbmdJZj1cInNob3dDb250cm9sQnV0dG9uc1wiXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJuYXZpZ2F0ZU5leHRCdXR0b25cIlxuICAgICAgICAgIG1hdC1taW5pLWZhYlxuICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiaW50bC5uZXh0UGFnZUxhYmVsXCJcbiAgICAgICAgICBbbWF0VG9vbHRpcF09XCJpbnRsLm5leHRQYWdlTGFiZWxcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCJpc0xhc3RDYW52YXNHcm91cFwiXG4gICAgICAgICAgW0BlYXNlSW5XaXRoRGVsYXldPVwie1xuICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgICAgcGFyYW1zOiB7IGRlbGF5RW50ZXI6IDAsIGRlbGF5TGVhdmU6IGJhc2VBbmltYXRpb25EZWxheSAqIDUgfVxuICAgICAgICAgIH1cIlxuICAgICAgICAgIChjbGljayk9XCJnb1RvTmV4dENhbnZhc0dyb3VwKClcIlxuICAgICAgICA+XG4gICAgICAgICAgPG1hdC1pY29uPm5hdmlnYXRlX2JlZm9yZTwvbWF0LWljb24+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiaW52ZXJ0XCI+XG4gICAgICAgIDxidXR0b25cbiAgICAgICAgICAqbmdJZj1cInNob3dDb250cm9sQnV0dG9uc1wiXG4gICAgICAgICAgZGF0YS10ZXN0aWQ9XCJuYXZpZ2F0ZU5leHRCdXR0b25cIlxuICAgICAgICAgIG1hdC1taW5pLWZhYlxuICAgICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiaW50bC5uZXh0UGFnZUxhYmVsXCJcbiAgICAgICAgICBbbWF0VG9vbHRpcF09XCJpbnRsLm5leHRQYWdlTGFiZWxcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCJpc0xhc3RDYW52YXNHcm91cFwiXG4gICAgICAgICAgW0BlYXNlSW5XaXRoRGVsYXldPVwie1xuICAgICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICAgIGRlbGF5RW50ZXI6IGJhc2VBbmltYXRpb25EZWxheSxcbiAgICAgICAgICAgICAgZGVsYXlMZWF2ZTogYmFzZUFuaW1hdGlvbkRlbGF5ICogNFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cIlxuICAgICAgICAgIChjbGljayk9XCJnb1RvTmV4dENhbnZhc0dyb3VwKClcIlxuICAgICAgICA+XG4gICAgICAgICAgPG1hdC1pY29uPm5hdmlnYXRlX25leHQ8L21hdC1pY29uPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cIiFpbnZlcnRcIj5cbiAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICpuZ0lmPVwic2hvd0NvbnRyb2xCdXR0b25zXCJcbiAgICAgICAgICBkYXRhLXRlc3RpZD1cIm5hdmlnYXRlQmVmb3JlQnV0dG9uXCJcbiAgICAgICAgICBtYXQtbWluaS1mYWJcbiAgICAgICAgICBbYXR0ci5hcmlhLWxhYmVsXT1cImludGwucHJldmlvdXNQYWdlTGFiZWxcIlxuICAgICAgICAgIFttYXRUb29sdGlwXT1cImludGwucHJldmlvdXNQYWdlTGFiZWxcIlxuICAgICAgICAgIFtkaXNhYmxlZF09XCJpc0ZpcnN0Q2FudmFzR3JvdXBcIlxuICAgICAgICAgIFtAZWFzZUluV2l0aERlbGF5XT1cIntcbiAgICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgICBkZWxheUVudGVyOiBiYXNlQW5pbWF0aW9uRGVsYXksXG4gICAgICAgICAgICAgIGRlbGF5TGVhdmU6IGJhc2VBbmltYXRpb25EZWxheSAqIDRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XCJcbiAgICAgICAgICAoY2xpY2spPVwiZ29Ub1ByZXZpb3VzQ2FudmFzR3JvdXAoKVwiXG4gICAgICAgID5cbiAgICAgICAgICA8bWF0LWljb24+bmF2aWdhdGVfbmV4dDwvbWF0LWljb24+XG4gICAgICAgIDwvYnV0dG9uPlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICA8YnV0dG9uXG4gICAgICAgICpuZ0lmPVwic2hvd0NvbnRyb2xCdXR0b25zXCJcbiAgICAgICAgKGNsaWNrKT1cInpvb21JbigpXCJcbiAgICAgICAgZGF0YS10ZXN0aWQ9XCJ6b29tSW5CdXR0b25cIlxuICAgICAgICBtYXQtbWluaS1mYWJcbiAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJpbnRsLnpvb21JbkxhYmVsXCJcbiAgICAgICAgW21hdFRvb2x0aXBdPVwiaW50bC56b29tSW5MYWJlbFwiXG4gICAgICAgIFtAZWFzZUluV2l0aERlbGF5XT1cIntcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBkZWxheUVudGVyOiBiYXNlQW5pbWF0aW9uRGVsYXkgKiAyLFxuICAgICAgICAgICAgZGVsYXlMZWF2ZTogYmFzZUFuaW1hdGlvbkRlbGF5ICogM1xuICAgICAgICAgIH1cbiAgICAgICAgfVwiXG4gICAgICA+XG4gICAgICAgIDxtYXQtaWNvbj56b29tX2luPC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvblxuICAgICAgICAqbmdJZj1cInNob3dDb250cm9sQnV0dG9uc1wiXG4gICAgICAgIChjbGljayk9XCJob21lKClcIlxuICAgICAgICBkYXRhLXRlc3RpZD1cImhvbWVCdXR0b25cIlxuICAgICAgICBtYXQtbWluaS1mYWJcbiAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJpbnRsLnJlc2V0Wm9vbUxhYmVsXCJcbiAgICAgICAgW2Rpc2FibGVkXT1cIiFpc1pvb21lZFwiXG4gICAgICAgIFttYXRUb29sdGlwXT1cImludGwucmVzZXRab29tTGFiZWxcIlxuICAgICAgICBbQGVhc2VJbldpdGhEZWxheV09XCJ7XG4gICAgICAgICAgdmFsdWU6ICcnLFxuICAgICAgICAgIHBhcmFtczoge1xuICAgICAgICAgICAgZGVsYXlFbnRlcjogYmFzZUFuaW1hdGlvbkRlbGF5ICogMyxcbiAgICAgICAgICAgIGRlbGF5TGVhdmU6IGJhc2VBbmltYXRpb25EZWxheSAqIDJcbiAgICAgICAgICB9XG4gICAgICAgIH1cIlxuICAgICAgPlxuICAgICAgICA8bWF0LWljb24+aG9tZTwvbWF0LWljb24+XG4gICAgICA8L2J1dHRvbj5cbiAgICAgIDxidXR0b25cbiAgICAgICAgKm5nSWY9XCJzaG93Q29udHJvbEJ1dHRvbnNcIlxuICAgICAgICAoY2xpY2spPVwiem9vbU91dCgpXCJcbiAgICAgICAgZGF0YS10ZXN0aWQ9XCJ6b29tT3V0QnV0dG9uXCJcbiAgICAgICAgbWF0LW1pbmktZmFiXG4gICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiaW50bC56b29tT3V0TGFiZWxcIlxuICAgICAgICBbbWF0VG9vbHRpcF09XCJpbnRsLnpvb21PdXRMYWJlbFwiXG4gICAgICAgIFtAZWFzZUluV2l0aERlbGF5XT1cIntcbiAgICAgICAgICB2YWx1ZTogJycsXG4gICAgICAgICAgcGFyYW1zOiB7XG4gICAgICAgICAgICBkZWxheUVudGVyOiBiYXNlQW5pbWF0aW9uRGVsYXkgKiA0LFxuICAgICAgICAgICAgZGVsYXlMZWF2ZTogYmFzZUFuaW1hdGlvbkRlbGF5XG4gICAgICAgICAgfVxuICAgICAgICB9XCJcbiAgICAgID5cbiAgICAgICAgPG1hdC1pY29uPnpvb21fb3V0PC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgICAgPGJ1dHRvblxuICAgICAgICAqbmdJZj1cInNob3dDb250cm9sQnV0dG9uc1wiXG4gICAgICAgIChjbGljayk9XCJyb3RhdGUoKVwiXG4gICAgICAgIGRhdGEtdGVzdGlkPVwicm90YXRlQnV0dG9uXCJcbiAgICAgICAgbWF0LW1pbmktZmFiXG4gICAgICAgIFthdHRyLmFyaWEtbGFiZWxdPVwiaW50bC5yb3RhdGVDd0xhYmVsXCJcbiAgICAgICAgW21hdFRvb2x0aXBdPVwiaW50bC5yb3RhdGVDd0xhYmVsXCJcbiAgICAgICAgW0BlYXNlSW5XaXRoRGVsYXldPVwie1xuICAgICAgICAgIHZhbHVlOiAnJyxcbiAgICAgICAgICBwYXJhbXM6IHsgZGVsYXlFbnRlcjogYmFzZUFuaW1hdGlvbkRlbGF5ICogNSwgZGVsYXlMZWF2ZTogMCB9XG4gICAgICAgIH1cIlxuICAgICAgPlxuICAgICAgICA8bWF0LWljb24+cm90YXRlX3JpZ2h0PC9tYXQtaWNvbj5cbiAgICAgIDwvYnV0dG9uPlxuICAgIDwvZGl2PlxuICA8L2Rpdj5cbjwvZGl2PlxuIl19