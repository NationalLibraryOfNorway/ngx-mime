import { TextLinesBuilder } from './text-lines.builder';
export class TextBlocksBuilder {
    constructor() {
        this.textLinesBuilder = new TextLinesBuilder();
    }
    withTextBlocksXml(textBlocksXml) {
        this.textBlocksXml = textBlocksXml;
        return this;
    }
    withTextStyles(textStyles) {
        this.textStyles = textStyles;
        return this;
    }
    build() {
        return this.textBlocksXml
            ? this.textBlocksXml.map((textBlock) => {
                const styleRef = textBlock.$.STYLEREFS?.split(' ');
                let textStyle = undefined;
                if (styleRef && this.textStyles) {
                    textStyle = this.textStyles.get(styleRef[0]);
                }
                return {
                    textLines: this.textLinesBuilder
                        .withTextLinesXml(textBlock.TextLine)
                        .build(),
                    textStyle: {
                        fontStyle: textStyle?.fontStyle,
                    },
                };
            })
            : [];
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dC1ibG9ja3MuYnVpbGRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL2xpYnMvbmd4LW1pbWUvc3JjL2xpYi9jb3JlL2J1aWxkZXJzL2FsdG8vdGV4dC1ibG9ja3MuYnVpbGRlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxzQkFBc0IsQ0FBQztBQUV4RCxNQUFNLE9BQU8saUJBQWlCO0lBQTlCO1FBQ1UscUJBQWdCLEdBQUcsSUFBSSxnQkFBZ0IsRUFBRSxDQUFDO0lBbUNwRCxDQUFDO0lBL0JDLGlCQUFpQixDQUFDLGFBQWtCO1FBQ2xDLElBQUksQ0FBQyxhQUFhLEdBQUcsYUFBYSxDQUFDO1FBQ25DLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELGNBQWMsQ0FDWixVQUE4QztRQUU5QyxJQUFJLENBQUMsVUFBVSxHQUFHLFVBQVUsQ0FBQztRQUM3QixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxLQUFLO1FBQ0gsT0FBTyxJQUFJLENBQUMsYUFBYTtZQUN2QixDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFjLEVBQUUsRUFBRTtnQkFDeEMsTUFBTSxRQUFRLEdBQUcsU0FBUyxDQUFDLENBQUMsQ0FBQyxTQUFTLEVBQUUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO2dCQUNuRCxJQUFJLFNBQVMsR0FBRyxTQUFTLENBQUM7Z0JBQzFCLElBQUksUUFBUSxJQUFJLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FBQztvQkFDaEMsU0FBUyxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO2dCQUMvQyxDQUFDO2dCQUNELE9BQU87b0JBQ0wsU0FBUyxFQUFFLElBQUksQ0FBQyxnQkFBZ0I7eUJBQzdCLGdCQUFnQixDQUFDLFNBQVMsQ0FBQyxRQUFRLENBQUM7eUJBQ3BDLEtBQUssRUFBRTtvQkFDVixTQUFTLEVBQUU7d0JBQ1QsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTO3FCQUNoQztpQkFDRixDQUFDO1lBQ0osQ0FBQyxDQUFDO1lBQ0osQ0FBQyxDQUFDLEVBQUUsQ0FBQztJQUNULENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRleHRCbG9jaywgVGV4dFN0eWxlIH0gZnJvbSAnLi4vLi4vYWx0by1zZXJ2aWNlL2FsdG8ubW9kZWwnO1xuaW1wb3J0IHsgVGV4dExpbmVzQnVpbGRlciB9IGZyb20gJy4vdGV4dC1saW5lcy5idWlsZGVyJztcblxuZXhwb3J0IGNsYXNzIFRleHRCbG9ja3NCdWlsZGVyIHtcbiAgcHJpdmF0ZSB0ZXh0TGluZXNCdWlsZGVyID0gbmV3IFRleHRMaW5lc0J1aWxkZXIoKTtcbiAgcHJpdmF0ZSB0ZXh0U3R5bGVzOiBNYXA8c3RyaW5nLCBUZXh0U3R5bGU+IHwgdW5kZWZpbmVkO1xuICBwcml2YXRlIHRleHRCbG9ja3NYbWw6IGFueSB8IHVuZGVmaW5lZDtcblxuICB3aXRoVGV4dEJsb2Nrc1htbCh0ZXh0QmxvY2tzWG1sOiBhbnkpIHtcbiAgICB0aGlzLnRleHRCbG9ja3NYbWwgPSB0ZXh0QmxvY2tzWG1sO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aFRleHRTdHlsZXMoXG4gICAgdGV4dFN0eWxlczogTWFwPHN0cmluZywgVGV4dFN0eWxlPiB8IHVuZGVmaW5lZCxcbiAgKTogVGV4dEJsb2Nrc0J1aWxkZXIge1xuICAgIHRoaXMudGV4dFN0eWxlcyA9IHRleHRTdHlsZXM7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBidWlsZCgpOiBUZXh0QmxvY2tbXSB7XG4gICAgcmV0dXJuIHRoaXMudGV4dEJsb2Nrc1htbFxuICAgICAgPyB0aGlzLnRleHRCbG9ja3NYbWwubWFwKCh0ZXh0QmxvY2s6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0eWxlUmVmID0gdGV4dEJsb2NrLiQuU1RZTEVSRUZTPy5zcGxpdCgnICcpO1xuICAgICAgICAgIGxldCB0ZXh0U3R5bGUgPSB1bmRlZmluZWQ7XG4gICAgICAgICAgaWYgKHN0eWxlUmVmICYmIHRoaXMudGV4dFN0eWxlcykge1xuICAgICAgICAgICAgdGV4dFN0eWxlID0gdGhpcy50ZXh0U3R5bGVzLmdldChzdHlsZVJlZlswXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB0ZXh0TGluZXM6IHRoaXMudGV4dExpbmVzQnVpbGRlclxuICAgICAgICAgICAgICAud2l0aFRleHRMaW5lc1htbCh0ZXh0QmxvY2suVGV4dExpbmUpXG4gICAgICAgICAgICAgIC5idWlsZCgpLFxuICAgICAgICAgICAgdGV4dFN0eWxlOiB7XG4gICAgICAgICAgICAgIGZvbnRTdHlsZTogdGV4dFN0eWxlPy5mb250U3R5bGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH07XG4gICAgICAgIH0pXG4gICAgICA6IFtdO1xuICB9XG59XG4iXX0=