import { ViewerOptions } from '../models/viewer-options';
import { ViewingDirection } from '../models/viewing-direction';
import { canvasRectFromCriteria } from './calculate-canvas-group-position-utils';
export class OnePageCalculatePagePositionStrategy {
    constructor(config) {
        this.config = config;
    }
    calculateCanvasGroupPosition(criteria, rotation = 0) {
        let x;
        if (!criteria.canvasGroupIndex) {
            if (rotation === 90 || rotation === 270) {
                x = (criteria.canvasSource.height / 2) * -1;
            }
            else {
                x = (criteria.canvasSource.width / 2) * -1;
            }
        }
        else {
            x =
                criteria.viewingDirection === ViewingDirection.LTR
                    ? this.calculateLtrX(criteria)
                    : this.calculateRtlX(criteria);
        }
        return canvasRectFromCriteria(rotation, criteria, x, this.config.ignorePhysicalScale);
    }
    calculateLtrX(criteria) {
        return (criteria.previousCanvasGroupPosition.x +
            criteria.previousCanvasGroupPosition.width +
            ViewerOptions.overlays.canvasGroupMarginInDashboardView);
    }
    calculateRtlX(criteria) {
        return (criteria.previousCanvasGroupPosition.x -
            criteria.previousCanvasGroupPosition.width -
            ViewerOptions.overlays.canvasGroupMarginInDashboardView);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoib25lLXBhZ2UtY2FsY3VsYXRlLXBhZ2UtcG9zaXRpb24tc3RyYXRlZ3kuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi8uLi9saWJzL25neC1taW1lL3NyYy9saWIvY29yZS9jYW52YXMtZ3JvdXAtcG9zaXRpb24vb25lLXBhZ2UtY2FsY3VsYXRlLXBhZ2UtcG9zaXRpb24tc3RyYXRlZ3kudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBRUEsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLDBCQUEwQixDQUFDO0FBQ3pELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBSy9ELE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLHlDQUF5QyxDQUFDO0FBRWpGLE1BQU0sT0FBTyxvQ0FBb0M7SUFHL0MsWUFBb0IsTUFBd0I7UUFBeEIsV0FBTSxHQUFOLE1BQU0sQ0FBa0I7SUFBRyxDQUFDO0lBRWhELDRCQUE0QixDQUMxQixRQUFxQyxFQUNyQyxRQUFRLEdBQUcsQ0FBQztRQUVaLElBQUksQ0FBUyxDQUFDO1FBQ2QsSUFBSSxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1lBQy9CLElBQUksUUFBUSxLQUFLLEVBQUUsSUFBSSxRQUFRLEtBQUssR0FBRyxFQUFFLENBQUM7Z0JBQ3hDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxZQUFZLENBQUMsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzlDLENBQUM7aUJBQU0sQ0FBQztnQkFDTixDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsWUFBWSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztZQUM3QyxDQUFDO1FBQ0gsQ0FBQzthQUFNLENBQUM7WUFDTixDQUFDO2dCQUNDLFFBQVEsQ0FBQyxnQkFBZ0IsS0FBSyxnQkFBZ0IsQ0FBQyxHQUFHO29CQUNoRCxDQUFDLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUM7b0JBQzlCLENBQUMsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3JDLENBQUM7UUFDRCxPQUFPLHNCQUFzQixDQUMzQixRQUFRLEVBQ1IsUUFBUSxFQUNSLENBQUMsRUFDRCxJQUFJLENBQUMsTUFBTSxDQUFDLG1CQUFtQixDQUNoQyxDQUFDO0lBQ0osQ0FBQztJQUVPLGFBQWEsQ0FBQyxRQUFxQztRQUN6RCxPQUFPLENBQ0wsUUFBUSxDQUFDLDJCQUEyQixDQUFDLENBQUM7WUFDdEMsUUFBUSxDQUFDLDJCQUEyQixDQUFDLEtBQUs7WUFDMUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxnQ0FBZ0MsQ0FDeEQsQ0FBQztJQUNKLENBQUM7SUFFTyxhQUFhLENBQUMsUUFBcUM7UUFDekQsT0FBTyxDQUNMLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO1lBQ3RDLFFBQVEsQ0FBQywyQkFBMkIsQ0FBQyxLQUFLO1lBQzFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsZ0NBQWdDLENBQ3hELENBQUM7SUFDSixDQUFDO0NBQ0YiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNaW1lVmlld2VyQ29uZmlnIH0gZnJvbSAnLi4vbWltZS12aWV3ZXItY29uZmlnJztcbmltcG9ydCB7IFJlY3QgfSBmcm9tICcuLi9tb2RlbHMvcmVjdCc7XG5pbXBvcnQgeyBWaWV3ZXJPcHRpb25zIH0gZnJvbSAnLi4vbW9kZWxzL3ZpZXdlci1vcHRpb25zJztcbmltcG9ydCB7IFZpZXdpbmdEaXJlY3Rpb24gfSBmcm9tICcuLi9tb2RlbHMvdmlld2luZy1kaXJlY3Rpb24nO1xuaW1wb3J0IHtcbiAgQ2FsY3VsYXRlQ2FudmFzR3JvdXBQb3NpdGlvblN0cmF0ZWd5LFxuICBDYW52YXNHcm91cFBvc2l0aW9uQ3JpdGVyaWEsXG59IGZyb20gJy4vY2FsY3VsYXRlLWNhbnZhcy1ncm91cC1wb3NpdGlvbi1zdHJhdGVneSc7XG5pbXBvcnQgeyBjYW52YXNSZWN0RnJvbUNyaXRlcmlhIH0gZnJvbSAnLi9jYWxjdWxhdGUtY2FudmFzLWdyb3VwLXBvc2l0aW9uLXV0aWxzJztcblxuZXhwb3J0IGNsYXNzIE9uZVBhZ2VDYWxjdWxhdGVQYWdlUG9zaXRpb25TdHJhdGVneVxuICBpbXBsZW1lbnRzIENhbGN1bGF0ZUNhbnZhc0dyb3VwUG9zaXRpb25TdHJhdGVneVxue1xuICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbmZpZzogTWltZVZpZXdlckNvbmZpZykge31cblxuICBjYWxjdWxhdGVDYW52YXNHcm91cFBvc2l0aW9uKFxuICAgIGNyaXRlcmlhOiBDYW52YXNHcm91cFBvc2l0aW9uQ3JpdGVyaWEsXG4gICAgcm90YXRpb24gPSAwXG4gICk6IFJlY3Qge1xuICAgIGxldCB4OiBudW1iZXI7XG4gICAgaWYgKCFjcml0ZXJpYS5jYW52YXNHcm91cEluZGV4KSB7XG4gICAgICBpZiAocm90YXRpb24gPT09IDkwIHx8IHJvdGF0aW9uID09PSAyNzApIHtcbiAgICAgICAgeCA9IChjcml0ZXJpYS5jYW52YXNTb3VyY2UuaGVpZ2h0IC8gMikgKiAtMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHggPSAoY3JpdGVyaWEuY2FudmFzU291cmNlLndpZHRoIC8gMikgKiAtMTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgeCA9XG4gICAgICAgIGNyaXRlcmlhLnZpZXdpbmdEaXJlY3Rpb24gPT09IFZpZXdpbmdEaXJlY3Rpb24uTFRSXG4gICAgICAgICAgPyB0aGlzLmNhbGN1bGF0ZUx0clgoY3JpdGVyaWEpXG4gICAgICAgICAgOiB0aGlzLmNhbGN1bGF0ZVJ0bFgoY3JpdGVyaWEpO1xuICAgIH1cbiAgICByZXR1cm4gY2FudmFzUmVjdEZyb21Dcml0ZXJpYShcbiAgICAgIHJvdGF0aW9uLFxuICAgICAgY3JpdGVyaWEsXG4gICAgICB4LFxuICAgICAgdGhpcy5jb25maWcuaWdub3JlUGh5c2ljYWxTY2FsZVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUx0clgoY3JpdGVyaWE6IENhbnZhc0dyb3VwUG9zaXRpb25Dcml0ZXJpYSkge1xuICAgIHJldHVybiAoXG4gICAgICBjcml0ZXJpYS5wcmV2aW91c0NhbnZhc0dyb3VwUG9zaXRpb24ueCArXG4gICAgICBjcml0ZXJpYS5wcmV2aW91c0NhbnZhc0dyb3VwUG9zaXRpb24ud2lkdGggK1xuICAgICAgVmlld2VyT3B0aW9ucy5vdmVybGF5cy5jYW52YXNHcm91cE1hcmdpbkluRGFzaGJvYXJkVmlld1xuICAgICk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZVJ0bFgoY3JpdGVyaWE6IENhbnZhc0dyb3VwUG9zaXRpb25Dcml0ZXJpYSkge1xuICAgIHJldHVybiAoXG4gICAgICBjcml0ZXJpYS5wcmV2aW91c0NhbnZhc0dyb3VwUG9zaXRpb24ueCAtXG4gICAgICBjcml0ZXJpYS5wcmV2aW91c0NhbnZhc0dyb3VwUG9zaXRpb24ud2lkdGggLVxuICAgICAgVmlld2VyT3B0aW9ucy5vdmVybGF5cy5jYW52YXNHcm91cE1hcmdpbkluRGFzaGJvYXJkVmlld1xuICAgICk7XG4gIH1cbn1cbiJdfQ==