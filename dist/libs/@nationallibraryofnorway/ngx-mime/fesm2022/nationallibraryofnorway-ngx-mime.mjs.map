{"version":3,"file":"nationallibraryofnorway-ngx-mime.mjs","sources":["../../../../../libs/ngx-mime/src/lib/core/intl/help-intl.ts","../../../../../libs/ngx-mime/src/lib/core/intl/viewer-intl.ts","../../../../../libs/ngx-mime/src/lib/core/intl/help-intl.no_nb.ts","../../../../../libs/ngx-mime/src/lib/core/intl/viewer-intl.no_nb.ts","../../../../../libs/ngx-mime/src/lib/core/intl/help-intl.lt.ts","../../../../../libs/ngx-mime/src/lib/core/intl/viewer-intl.lt.ts","../../../../../libs/ngx-mime/src/lib/core/models/mode-changes.ts","../../../../../libs/ngx-mime/src/lib/core/models/recognized-text-mode.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewer-mode.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewer-layout.ts","../../../../../libs/ngx-mime/src/lib/core/mime-viewer-config.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewing-direction.ts","../../../../../libs/ngx-mime/src/lib/core/models/manifest.ts","../../../../../libs/ngx-mime/src/lib/core/mode-service/mode.service.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/strings.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/text-lines.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/text-blocks.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/print-space.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/page.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/layout.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/styles.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/alto/alto.builder.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-layout-service/viewer-layout-service.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/iiif-tile-source-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/iiif-v3-tile-source-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/static-image-tile-source-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/tile-source-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/core/models/canvas-groups.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewer-options.ts","../../../../../libs/ngx-mime/src/lib/core/models/rect.ts","../../../../../libs/ngx-mime/src/lib/core/utils.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-group-position/calculate-canvas-group-position-utils.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-group-position/one-page-calculate-page-position-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-service/one-canvas-per-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-group-position/two-page-calculate-page-position-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-service/two-canvas-per-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-service/canvas-groups-strategy.factory.ts","../../../../../libs/ngx-mime/src/lib/core/canvas-service/canvas-service.ts","../../../../../libs/ngx-mime/src/lib/core/highlight-service/highlight.service.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/builder-utils.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/metadata.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/sizes.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/tiles.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/service.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/resource.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/images.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/canvas.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/sequence.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/structure.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/tile-source.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v2/manifest.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/builder-utils.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/metadata.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/sizes.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/tiles.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/service.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/resource.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/images.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/canvas.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/sequence.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/structure.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/tile-source.builder.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/v3/manifest.builder.ts","../../../../../libs/ngx-mime/src/lib/core/spinner-service/spinner.service.ts","../../../../../libs/ngx-mime/src/lib/core/iiif-manifest-service/iiif-manifest-service.ts","../../../../../libs/ngx-mime/src/lib/core/alto-service/html.formatter.ts","../../../../../libs/ngx-mime/src/lib/core/alto-service/alto.service.ts","../../../../../libs/ngx-mime/src/lib/core/click-service/click.service.ts","../../../../../libs/ngx-mime/src/lib/core/ext/svg-overlay.ts","../../../../../libs/ngx-mime/src/lib/core/models/highlight-rect.ts","../../../../../libs/ngx-mime/src/lib/core/models/hit.ts","../../../../../libs/ngx-mime/src/lib/core/models/search-result.ts","../../../../../libs/ngx-mime/src/lib/core/builders/iiif/search-result.builder.ts","../../../../../libs/ngx-mime/src/lib/core/iiif-content-search-service/iiif-content-search.service.ts","../../../../../libs/ngx-mime/src/lib/core/iiif-manifest-service/iiif-manifest-utils.ts","../../../../../libs/ngx-mime/src/lib/core/models/pinchStatus.ts","../../../../../libs/ngx-mime/src/lib/core/models/side.ts","../../../../../libs/ngx-mime/src/lib/core/style-service/style.service.ts","../../../../../libs/ngx-mime/src/lib/core/models/direction.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/navigator-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/dashboard-mode-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/page-mode-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/page-zoomed-mode-calculate-next-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/calculate-next-canvas-group-factory.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/canvas-group-mask.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/go-to-canvas-group-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/options.factory.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/swipe-drag-end-counter.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/swipe-utils.ts","../../../../../libs/ngx-mime/src/lib/core/models/dimensions.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/zoom-utils.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/zoom-strategy.ts","../../../../../libs/ngx-mime/src/lib/core/viewer-service/viewer.service.ts","../../../../../libs/ngx-mime/src/lib/core/mime-resize-service/mime-resize.service.ts","../../../../../libs/ngx-mime/src/lib/core/fullscreen-service/fullscreen.service.ts","../../../../../libs/ngx-mime/src/lib/core/mime-dom-helper.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog-config-strategy.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog-config-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/core/navigation/content-search-navigation-service/content-search-navigation.service.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.component.html","../../../../../libs/ngx-mime/src/lib/content-search-dialog/content-search-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/information-dialog/information-dialog-config-strategy.ts","../../../../../libs/ngx-mime/src/lib/information-dialog/information-dialog-config-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/information-dialog/metadata/metadata.component.ts","../../../../../libs/ngx-mime/src/lib/information-dialog/metadata/metadata.component.html","../../../../../libs/ngx-mime/src/lib/information-dialog/table-of-contents/table-of-contents.component.ts","../../../../../libs/ngx-mime/src/lib/information-dialog/table-of-contents/table-of-contents.component.html","../../../../../libs/ngx-mime/src/lib/information-dialog/information-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/information-dialog/information-dialog.component.html","../../../../../libs/ngx-mime/src/lib/information-dialog/information-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/view-dialog/view-dialog-config-strategy.ts","../../../../../libs/ngx-mime/src/lib/view-dialog/view-dialog-config-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/view-dialog/icon/icon.component.ts","../../../../../libs/ngx-mime/src/lib/view-dialog/icon/icon.component.html","../../../../../libs/ngx-mime/src/lib/view-dialog/view-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/view-dialog/view-dialog.component.html","../../../../../libs/ngx-mime/src/lib/view-dialog/view-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/core/models/AccessKeys.ts","../../../../../libs/ngx-mime/src/lib/core/access-keys-handler-service/access-keys.service.ts","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog-resize.service.ts","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.component.html","../../../../../libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.component.html","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog.component.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog.component.html","../../../../../libs/ngx-mime/src/lib/shared/mime-material.module.ts","../../../../../libs/ngx-mime/src/lib/shared/shared.module.ts","../../../../../libs/ngx-mime/src/lib/shared/animations.ts","../../../../../libs/ngx-mime/src/lib/viewer/osd-toolbar/osd-toolbar.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/osd-toolbar/osd-toolbar.component.html","../../../../../libs/ngx-mime/src/lib/viewer/recognized-text-content/recognized-text-content.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/recognized-text-content/recognized-text-content.component.html","../../../../../libs/ngx-mime/src/lib/canvas-group-dialog/canvas-group-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component.html","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/content-search-navigator/content-search-navigator.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/content-search-navigator/content-search-navigator.component.html","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/viewer-footer.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-footer/viewer-footer.component.html","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog-config-strategy.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog-config-strategy-factory.ts","../../../../../libs/ngx-mime/src/lib/help-dialog/help-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-header/viewer-header.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-header/viewer-header.component.html","../../../../../libs/ngx-mime/src/lib/viewer/viewer-spinner/viewer-spinner.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer-spinner/viewer-spinner.component.html","../../../../../libs/ngx-mime/src/lib/attribution-dialog/attribution-dialog.service.ts","../../../../../libs/ngx-mime/src/lib/core/models/content-dialog-state.ts","../../../../../libs/ngx-mime/src/lib/core/models/contents-search-dialog-state.ts","../../../../../libs/ngx-mime/src/lib/core/models/help-dialog-state.ts","../../../../../libs/ngx-mime/src/lib/core/models/view-dialog-state.ts","../../../../../libs/ngx-mime/src/lib/core/models/viewerState.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer.providers.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer.component.ts","../../../../../libs/ngx-mime/src/lib/viewer/viewer.component.html","../../../../../libs/ngx-mime/src/lib/ngx-mime.module.ts","../../../../../libs/ngx-mime/src/nationallibraryofnorway-ngx-mime.ts"],"sourcesContent":["export class HelpIntl {\n  helpLabel = 'Help';\n  line1 =\n    '<strong>ARROW LEFT</strong> or <strong>PAGE UP</strong>: Previous page';\n  line2 =\n    '<strong>ARROW RIGHT</strong> or <strong>PAGE DOWN</strong>: Next page';\n  line3 = '<strong>HOME</strong>: Go to first page';\n  line4 = '<strong>END</strong>: Go to last page';\n  line5 =\n    '<strong>C</strong>: Show more information about the object. (Close with <strong>ESC</strong>.)';\n  line6 =\n    '<strong>S</strong>: Search inside the object. (Close with <strong>ESC</strong>.)';\n  line7 = '<strong>N</strong>: Next result';\n  line8 = '<strong>P</strong>: Previous result';\n  line9 =\n    '<strong>F</strong>: Fullscreen on/off (Close with <strong>F</strong> or <strong>ESC</strong>.)';\n  line10 = '<strong>R</strong>: Rotate 90°';\n  line11 =\n    '<strong>T</strong>:  Show/hide optically recognized text (for content that can be displayed).';\n  line12 = '<strong>Shift-S</strong>: Clear text search';\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\nimport { HelpIntl } from './help-intl';\n\n@Injectable()\nexport class MimeViewerIntl {\n  changes: Subject<void> = new Subject<void>();\n\n  help: HelpIntl = new HelpIntl();\n  closeLabel = 'Close';\n  attributionLabel = 'Attribution';\n  attributonCloseAriaLabel = 'Close attribution dialog';\n  helpCloseAriaLabel = 'Close help dialog';\n  informationLabel = 'Information';\n  layoutMenuLabel = 'View';\n  pageLayoutLabel = 'Page layout';\n  singlePageViewLabel = 'Single pages';\n  twoPageViewLabel = 'Two pages';\n  digitalTextLabel = 'Digital text';\n  recognizedTextContentCloseLabel = 'None';\n  recognizedTextContentInSplitViewLabel = 'Split';\n  showRecognizedTextContentLabel = 'Digital text only';\n  metadataLabel = 'Metadata';\n  licenseLabel = 'License';\n  tocLabel = 'Table of Contents';\n  fullScreenLabel = 'Full screen';\n  exitFullScreenLabel = 'Exit full screen';\n  openOsdControlPanelLabel = 'Open control panel';\n  closeOsdControlPanelLabel = 'Close control panel';\n  zoomInLabel = 'Zoom in';\n  zoomOutLabel = 'Zoom out';\n  resetZoomLabel = 'Reset zoom';\n  previousPageLabel = 'Previous Page';\n  nextPageLabel = 'Next Page';\n  rotateCwLabel = 'Rotate 90°';\n  searchLabel = 'Search';\n  clearSearchLabel = 'Clear';\n  previousHitLabel = 'Previous Hit';\n  nextHitLabel = 'Next Hit';\n  goToPageLabel = 'Go to page';\n  currentPageLabel = 'Current page';\n  enterPageNumber = 'Enter page number';\n  dropDisabled = 'Sorry, but drag and drop is disabled';\n  loading = 'Loading ...';\n  rotationIsNotSupported = 'Rotation is not supported by your device';\n\n  // ERRORS\n  somethingHasGoneWrongLabel = 'Oh dear, something has gone terribly wrong...';\n  manifestUriMissingLabel = 'ManifestUri is missing';\n  manifestNotValidLabel = 'Manifest is not valid';\n  pageDoesNotExists = 'Sorry, that page does not exist';\n  textContentErrorLabel = `Oh dear, i can't find the text for you`;\n\n  noResultsFoundLabel = (q: string) => {\n    return `No results found for <em class=\"current-search\">${q}</em>`;\n  };\n\n  resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} results found for <em class=\"current-search\">${q}</em>`;\n  };\n\n  currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} of ${numberOfHits} hits`;\n  };\n}\n","import { HelpIntl } from './help-intl';\n\nexport class HelpIntlNoNb extends HelpIntl {\n  override helpLabel = 'Hjelp';\n  override line1 =\n    '<strong>PIL VENSTRE</strong> eller <strong>PAGE UP</strong>: Gå til forrige side';\n  override line2 =\n    '<strong>PIL HØYRE</strong> eller <strong>PAGE DOWN</strong>: Gå til neste side';\n  override line3 = '<strong>HOME</strong>: Gå til første side';\n  override line4 = '<strong>END</strong>: Gå til siste side';\n  override line5 =\n    '<strong>C</strong>: Vis flere opplysninger om materialet. (Lukk med <strong>ESC</strong>.)';\n  override line6 =\n    '<strong>S</strong>: Åpner søkefeltet for søk i objektet. (Lukk med <strong>ESC</strong>.)';\n  override line7 = '<strong>N</strong>: Går til neste treff i objektet';\n  override line8 = '<strong>P</strong>: Går til forrige treff i objektet';\n  override line9 =\n    '<strong>F</strong>: Fullskjerm av og på (Lukk med <strong>F</strong> eller <strong>ESC</strong>.)';\n  override line10 = '<strong>R</strong>: Rotér 90°';\n  override line11 =\n    '<strong>T</strong>: Vis/skjul optisk gjenkjent tekst (for innhold som kan vises).';\n  override line12 = '<strong>Shift-S</strong>: Tøm søk i tekst';\n}\n","import { Injectable } from '@angular/core';\nimport { MimeViewerIntl } from './viewer-intl';\nimport { HelpIntlNoNb } from './help-intl.no_nb';\n\n@Injectable()\nexport class MimeViewerIntlNoNb extends MimeViewerIntl {\n  override help = new HelpIntlNoNb();\n  override closeLabel = 'Lukk';\n  override attributionLabel = 'Tillatelse';\n  override attributonCloseAriaLabel = 'Steng tillatelse dialog';\n  override helpCloseAriaLabel = 'Steng hjelp dialog';\n  override informationLabel = 'Opplysninger';\n  override layoutMenuLabel = 'Visning';\n  override pageLayoutLabel = 'Sideoppsett';\n  override singlePageViewLabel = 'Enkeltsider';\n  override digitalTextLabel = 'Digital tekst';\n  override twoPageViewLabel = 'To sider';\n  override recognizedTextContentCloseLabel = 'Ingen';\n  override recognizedTextContentInSplitViewLabel = 'Delt';\n  override showRecognizedTextContentLabel = 'Kun digital tekst';\n  override metadataLabel = 'Metadata';\n  override licenseLabel = 'Lisens';\n  override tocLabel = 'Innholdsfortegnelse';\n  override fullScreenLabel = 'Fullskjerm';\n  override exitFullScreenLabel = 'Avslutt fullskjerm';\n  override openOsdControlPanelLabel = 'Åpne kontrollpanel';\n  override closeOsdControlPanelLabel = 'Lukk kontrollpanel';\n  override zoomInLabel = 'Zoom inn';\n  override zoomOutLabel = 'Zoom ut';\n  override resetZoomLabel = 'Nullstill zoom';\n  override previousPageLabel = 'Forrige side';\n  override nextPageLabel = 'Neste side';\n  override rotateCwLabel = 'Rotér 90°';\n  override searchLabel = 'Søk';\n  override clearSearchLabel = 'Tøm';\n  override previousHitLabel = 'Forrige treff';\n  override nextHitLabel = 'Neste treff';\n  override goToPageLabel = 'Gå til side';\n  override currentPageLabel = 'Nåværende side';\n  override enterPageNumber = 'Skriv inn sidenummer';\n  override dropDisabled = 'Beklager, men drag and drop er ikke aktivert';\n  override loading = 'Laster ...';\n  override rotationIsNotSupported = 'Rotasjon støttes ikke av enheten din';\n\n  // ERRORS\n  override somethingHasGoneWrongLabel = 'Å nei! Noe har gått galt...';\n  override manifestUriMissingLabel = 'Lenke til manifest mangler';\n  override manifestNotValidLabel = 'Manifestet er ikke gyldig';\n  override pageDoesNotExists = 'Beklager, men den siden finnes ikke';\n  override textContentErrorLabel =\n    'Beklager, men jeg finner ikke teksten for deg';\n\n  override noResultsFoundLabel = (q: string) => {\n    return `Ingen treff funnet for <em class=\"current-search\">${q}</em>`;\n  };\n\n  override resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} treff funnet for <em class=\"current-search\">${q}</em>`;\n  };\n\n  override currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} av ${numberOfHits} treff`;\n  };\n}\n","import { HelpIntl } from './help-intl';\n\nexport class HelpIntlLt extends HelpIntl {\n  override helpLabel = 'Pagalba';\n  override line1 =\n    '<strong>RODYKLĖ KAIRĖN</strong> arba <strong>PAGE UP</strong>: Buvęs puslapis';\n  override line2 =\n    '<strong>RODYKLĖ DEŠINĖN</strong> arba <strong>PAGE DOWN</strong>: Kitas puslapis';\n  override line3 = '<strong>HOME</strong>: Pirmas puslapis';\n  override line4 = '<strong>END</strong>: Paskutinis puslapis';\n  override line5 =\n    '<strong>C</strong>: Rodyti daugiau informacijos apie objektą. (Uždarykite su <strong>ESC</strong>.)';\n  override line6 =\n    '<strong>S</strong>: Paieška objekto viduje. (Uždarykite su <strong>ESC</strong>.)';\n  override line7 = '<strong>N</strong>: Kitas rezultatas';\n  override line8 = '<strong>P</strong>: Buvęs rezultatas';\n  override line9 =\n    '<strong>F</strong>: Pilno ekrano režimas (Uždarykite su <strong>F</strong> arba <strong>ESC</strong>.)';\n  override line10 = '<strong>R</strong>: Pasukti 90 laipsnių';\n  override line11 =\n    '<strong>T</strong>:  Rodyti/slėpti optiškai atpažįstamą tekstą (turiniui, kurį galima rodyti).';\n  override line12 = '<strong>Shift-S</strong>: Ištuštinkite teksto paiešką';\n}\n","import { Injectable } from '@angular/core';\nimport { HelpIntlLt } from './help-intl.lt';\nimport { MimeViewerIntl } from './viewer-intl';\n\n@Injectable()\nexport class MimeViewerIntlLt extends MimeViewerIntl {\n  override help = new HelpIntlLt();\n  override closeLabel = 'Uždaryti';\n  override attributionLabel = 'Teisių priskyrimas';\n  override attributonCloseAriaLabel = 'Uždaryti teisių priskyrimo langą';\n  override helpCloseAriaLabel = 'Uždaryti pagalbos dialogo langą';\n  override informationLabel = 'Informacija';\n  override layoutMenuLabel = 'Žiūrėti';\n  override pageLayoutLabel = 'Puslapio išdėstymas';\n  override singlePageViewLabel = 'Atvaizduoti po vieną puslapį';\n  override twoPageViewLabel = 'Atvaizduoti po du puslapius';\n  override digitalTextLabel = 'Skaitmeninis tekstas';\n  override recognizedTextContentCloseLabel = 'Nė vienas';\n  override recognizedTextContentInSplitViewLabel = 'Suskaidytas';\n  override showRecognizedTextContentLabel = 'Tik skaitmeninis tekstas';\n  override metadataLabel = 'Metaduomenys';\n  override licenseLabel = 'Licencija';\n  override tocLabel = 'Turinys';\n  override fullScreenLabel = 'Pilno ekrano režimas';\n  override exitFullScreenLabel = 'Išeiti iš pilno ekrano režimo';\n  override openOsdControlPanelLabel = 'Atidarykite valdymo skydelį';\n  override closeOsdControlPanelLabel = 'Uždarykite valdymo skydelį';\n  override zoomInLabel = 'Priartinti';\n  override zoomOutLabel = 'Atitolinti';\n  override resetZoomLabel = 'iš naujo nustatykite skalę';\n  override previousPageLabel = 'Buvęs puslapis';\n  override nextPageLabel = 'Kitas puslapis';\n  override rotateCwLabel = 'Pasukti 90°';\n  override searchLabel = 'Paieška';\n  override clearSearchLabel = 'Išvalyti';\n  override previousHitLabel = 'Buvęs rezultatas';\n  override nextHitLabel = 'Kitas rezultatas';\n  override goToPageLabel = 'Persikelti į puslapį';\n  override currentPageLabel = 'Dabartinis puslapis';\n  override enterPageNumber = 'Įveskite puslapio numerį';\n  override dropDisabled = 'Atleiskite, bet veiksmas negalimas';\n  override loading = 'Pakrovimas ...';\n  override rotationIsNotSupported = 'Sukimas jūsų įrenginyje nepalaikomas';\n\n  // ERRORS\n  override somethingHasGoneWrongLabel = 'Objekto atvaizduoti nepavyko...';\n  override manifestUriMissingLabel =\n    'Nerastas objektų sąrašo identifikatorius (ManifestUri)';\n  override manifestNotValidLabel = 'Netinkamas objektų sąrašas (Manifest)';\n  override pageDoesNotExists = 'Nepavyko rasti šio paslapio';\n  override textContentErrorLabel = 'Atsiprašau, bet nerandu jums teksto';\n\n  override noResultsFoundLabel = (q: string) => {\n    return `Objekte nerasta atitikmenų <em class=\"current-search\">${q}</em>`;\n  };\n\n  override resultsFoundLabel = (numberOfHits: number, q: string) => {\n    return `${numberOfHits} rezultata${\n      numberOfHits === 1 ? 's' : 'i'\n    } su <em class=\"current-search\">${q}</em>`;\n  };\n  override currentHitLabel = (currentHit: number, numberOfHits: number) => {\n    return `${currentHit} iš ${numberOfHits} atitikmenų`;\n  };\n}\n","import { ViewerMode } from './viewer-mode';\n\nexport class ModeChanges {\n  public currentValue?: ViewerMode;\n  public previousValue?: ViewerMode;\n\n  constructor(fields?: {\n    currentValue?: ViewerMode;\n    previousValue?: ViewerMode;\n  }) {\n    if (fields) {\n      this.currentValue = fields.currentValue || this.currentValue;\n      this.previousValue = fields.previousValue || this.previousValue;\n    }\n  }\n}\n","export enum RecognizedTextMode {\n  NONE = 'NONE',\n  ONLY = 'ONLY',\n  SPLIT = 'SPLIT',\n}\n\nexport interface RecognizedTextModeChanges {\n  currentValue: RecognizedTextMode;\n  previousValue?: RecognizedTextMode;\n}\n","export enum ViewerMode {\n  DASHBOARD,\n  PAGE,\n  PAGE_ZOOMED,\n  NAVIGATOR,\n}\n","export enum ViewerLayout {\n  ONE_PAGE,\n  TWO_PAGE,\n}\n","import { RecognizedTextMode, ViewerMode } from './models';\nimport { ViewerLayout } from './models/viewer-layout';\n\nexport class MimeViewerConfig {\n  public attributionDialogEnabled? = true;\n  public attributionDialogHideTimeout? = -1;\n  public navigationControlEnabled? = true;\n  public initViewerMode = ViewerMode.PAGE;\n  public initViewerLayout = ViewerLayout.TWO_PAGE;\n  public withCredentials = false;\n  public loadTilesWithAjax = false;\n  public crossOriginPolicy:\n    | 'Anonymous'\n    | 'use-credentials'\n    | false\n    | undefined = false;\n  public ajaxHeaders: any = null;\n  public preserveZoomOnCanvasGroupChange = false;\n  public startOnTopOnCanvasGroupChange = false;\n  public isDropEnabled = false;\n  public initRecognizedTextContentMode = RecognizedTextMode.NONE;\n  public ignorePhysicalScale = false;\n\n  constructor(fields?: {\n    attributionDialogEnabled?: boolean;\n    attributionDialogHideTimeout?: number;\n    navigationControlEnabled?: boolean;\n    initViewerMode?: ViewerMode;\n    initViewerLayout?: ViewerLayout;\n    withCredentials?: boolean;\n    loadTilesWithAjax?: boolean;\n    crossOriginPolicy?: 'Anonymous' | 'use-credentials' | false | undefined;\n    ajaxHeaders?: any;\n    preserveZoomOnCanvasGroupChange?: boolean;\n    startOnTopOnCanvasGroupChange?: boolean;\n    isDropEnabled?: boolean;\n    initRecognizedTextContentMode?: RecognizedTextMode;\n    ignorePhysicalScale?: boolean;\n  }) {\n    if (fields) {\n      this.attributionDialogEnabled =\n        fields.attributionDialogEnabled !== undefined\n          ? fields.attributionDialogEnabled\n          : this.attributionDialogEnabled;\n\n      this.attributionDialogHideTimeout =\n        fields.attributionDialogHideTimeout ||\n        this.attributionDialogHideTimeout;\n\n      this.navigationControlEnabled =\n        fields.navigationControlEnabled !== undefined\n          ? fields.navigationControlEnabled\n          : this.navigationControlEnabled;\n\n      this.initViewerMode =\n        fields.initViewerMode !== undefined\n          ? fields.initViewerMode\n          : this.initViewerMode;\n\n      this.initViewerLayout =\n        fields.initViewerLayout !== undefined\n          ? fields.initViewerLayout\n          : this.initViewerLayout;\n\n      this.withCredentials =\n        fields.withCredentials !== undefined\n          ? fields.withCredentials\n          : this.withCredentials;\n\n      this.loadTilesWithAjax =\n        fields.loadTilesWithAjax !== undefined\n          ? fields.loadTilesWithAjax\n          : this.loadTilesWithAjax;\n\n      this.crossOriginPolicy =\n        fields.crossOriginPolicy !== undefined\n          ? fields.crossOriginPolicy\n          : this.crossOriginPolicy;\n\n      this.ajaxHeaders =\n        fields.ajaxHeaders !== undefined\n          ? fields.ajaxHeaders\n          : this.ajaxHeaders;\n\n      this.preserveZoomOnCanvasGroupChange =\n        fields.preserveZoomOnCanvasGroupChange !== undefined\n          ? fields.preserveZoomOnCanvasGroupChange\n          : this.preserveZoomOnCanvasGroupChange;\n\n      this.startOnTopOnCanvasGroupChange =\n        fields.startOnTopOnCanvasGroupChange !== undefined\n          ? fields.startOnTopOnCanvasGroupChange\n          : this.startOnTopOnCanvasGroupChange;\n\n      this.isDropEnabled =\n        fields.isDropEnabled !== undefined\n          ? fields.isDropEnabled\n          : this.isDropEnabled;\n\n      this.initRecognizedTextContentMode =\n        fields.initRecognizedTextContentMode !== undefined\n          ? fields.initRecognizedTextContentMode\n          : this.initRecognizedTextContentMode;\n\n      this.ignorePhysicalScale =\n        fields.ignorePhysicalScale !== undefined\n          ? fields.ignorePhysicalScale\n          : this.ignorePhysicalScale;\n    }\n  }\n}\n","export enum ViewingDirection {\n  LTR = 'ltr',\n  RTL = 'rtl',\n}\n","import { ViewingDirection } from './viewing-direction';\n\nexport class Manifest {\n  public context?: string;\n  public type?: string;\n  public id?: string;\n  public viewingDirection = ViewingDirection.LTR;\n  public label = '';\n  public metadata?: Metadata[];\n  public license?: string;\n  public logo?: string;\n  public attribution?: string;\n  public service?: Service;\n  public sequences?: Sequence[];\n  public structures?: Structure[] = [];\n  public tileSource?: Resource[];\n  public viewingHint?: string;\n\n  constructor(fields?: {\n    context?: string;\n    type?: string;\n    id?: string;\n    viewingDirection?: ViewingDirection;\n    label?: string;\n    metadata?: Metadata[];\n    license?: string;\n    logo?: string;\n    attribution?: string;\n    service?: Service;\n    sequences?: Sequence[];\n    structures?: Structure[];\n    tileSource?: Resource[];\n    viewingHint?: string;\n  }) {\n    if (fields) {\n      this.context = fields.context || this.context;\n      this.type = fields.type || this.type;\n      this.id = fields.id || this.id;\n      this.viewingDirection = fields.viewingDirection || this.viewingDirection;\n      this.label = fields.label || this.label;\n      this.metadata = fields.metadata || this.metadata;\n      this.license = fields.license || this.license;\n      this.logo = fields.logo || this.logo;\n      this.attribution = fields.attribution || this.attribution;\n      this.service = fields.service || this.service;\n      this.sequences = fields.sequences || this.sequences;\n      this.structures = fields.structures || this.structures;\n      this.tileSource = fields.tileSource || this.tileSource;\n      this.viewingHint = fields.viewingHint || this.viewingHint;\n    }\n  }\n}\n\nexport class Metadata {\n  constructor(\n    public label: string,\n    public value: string | number,\n  ) {}\n}\n\nexport class Sequence {\n  public id?: string;\n  public type?: string;\n  public label?: string;\n  public viewingHint?: string;\n  public canvases?: Canvas[];\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    viewingHint?: string;\n    canvases?: Canvas[];\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.viewingHint = fields.viewingHint || this.viewingHint;\n      this.canvases = fields.canvases || this.canvases;\n    }\n  }\n}\n\nexport class Canvas {\n  public id?: string;\n  public type?: string;\n  public label?: string;\n  public thumbnail?: string;\n  public height?: number;\n  public width?: number;\n  public images?: Images[];\n  public altoUrl?: string;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    thumbnail?: string;\n    height?: number;\n    width?: number;\n    images?: Images[];\n    altoUrl?: string;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.thumbnail = fields.thumbnail || this.thumbnail;\n      this.height = fields.height || this.height;\n      this.width = fields.width || this.width;\n      this.images = fields.images || this.images;\n      this.altoUrl = fields.altoUrl || this.altoUrl;\n    }\n  }\n}\n\nexport class Images {\n  public id?: string;\n  public type?: string;\n  public motivation?: string;\n  public resource?: Resource;\n  public on?: string;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    motivation?: string;\n    resource?: Resource;\n    on?: string;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.motivation = fields.motivation || this.motivation;\n      this.resource = fields.resource || this.resource;\n      this.on = fields.on || this.on;\n    }\n  }\n}\n\nexport class Resource {\n  public id!: string;\n  public type?: string;\n  public format?: string;\n  public service?: Service;\n  public height = 0;\n  public width = 0;\n  public tileOverlap = 0;\n\n  constructor(fields?: {\n    id: string;\n    type?: string;\n    format?: string;\n    service?: Service;\n    height?: number;\n    width?: number;\n    tileOverlap?: number;\n  }) {\n    if (fields) {\n      this.id = fields.id;\n      this.type = fields.type || this.type;\n      this.format = fields.format || this.format;\n      this.service = fields.service || this.service;\n      this.height = fields.height || this.height;\n      this.width = fields.width || this.width;\n      this.tileOverlap = fields.tileOverlap || this.tileOverlap;\n    }\n  }\n}\n\nexport class Service {\n  public context?: string;\n  public id?: string;\n  public protocol?: string;\n  public width = 0;\n  public height = 0;\n  public sizes?: Size[];\n  public tiles?: Tile[];\n  public profile?: string;\n  public physicalScale?: number;\n  public physicalUnits?: string;\n  public service?: Service;\n\n  constructor(fields?: {\n    context?: string;\n    id?: string;\n    protocol?: string;\n    width?: number;\n    height?: number;\n    sizes?: Size[];\n    tiles?: Tile[];\n    profile?: string;\n    physicalScale?: number;\n    physicalUnits?: string;\n    service?: Service;\n  }) {\n    if (fields) {\n      this.context = fields.context || this.context;\n      this.id = fields.id || this.id;\n      this.protocol = fields.protocol || this.protocol;\n      this.width = fields.width || this.width;\n      this.height = fields.height || this.height;\n      this.sizes = fields.sizes || this.sizes;\n      this.tiles = fields.tiles || this.tiles;\n      this.profile = fields.profile || this.profile;\n      this.physicalScale = fields.physicalScale || this.physicalScale;\n      this.physicalUnits = fields.physicalUnits || this.physicalUnits;\n      this.service = fields.service || this.service;\n    }\n  }\n}\n\nexport class Size {\n  constructor(\n    public width: number,\n    public height: number,\n  ) {}\n}\n\nexport class Tile {\n  public width?: number;\n  public scaleFactors?: number[];\n\n  constructor(fields?: { width?: number; scaleFactors?: number[] }) {\n    if (fields) {\n      this.width = fields.width || this.width;\n      this.scaleFactors = fields.scaleFactors || this.scaleFactors;\n    }\n  }\n}\n\nexport class Structure {\n  public id?: string;\n  public type = '';\n  public label?: string;\n  public canvases: string[] = [];\n  public canvasIndex = 0;\n\n  constructor(fields?: {\n    id?: string;\n    type?: string;\n    label?: string;\n    canvases?: string[];\n    canvasIndex: number;\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.type = fields.type || this.type;\n      this.label = fields.label || this.label;\n      this.canvases = fields.canvases || this.canvases;\n      this.canvasIndex = fields.canvasIndex;\n    }\n  }\n}\n\nexport class TileSource {}\n","import { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ModeChanges, ViewerMode } from '../models';\n\n@Injectable()\nexport class ModeService {\n  private config!: MimeViewerConfig;\n  private _mode!: ViewerMode;\n  private toggleModeSubject: BehaviorSubject<ModeChanges>;\n  private modeChanges = new ModeChanges();\n\n  constructor() {\n    this.toggleModeSubject = new BehaviorSubject(new ModeChanges());\n  }\n\n  get onChange(): Observable<ModeChanges> {\n    return this.toggleModeSubject.asObservable().pipe(distinctUntilChanged());\n  }\n\n  set mode(mode: ViewerMode) {\n    this._mode = mode;\n    this.change();\n  }\n\n  get mode(): ViewerMode {\n    return this._mode;\n  }\n\n  initialize(): void {\n    this.mode = this.config?.initViewerMode;\n  }\n\n  destroy() {\n    this.mode = this.config?.initViewerMode;\n  }\n\n  setConfig(config: MimeViewerConfig) {\n    this.config = config;\n  }\n\n  toggleMode(): void {\n    if (this.mode === ViewerMode.DASHBOARD) {\n      this.mode = ViewerMode.PAGE;\n    } else if (\n      this.mode === ViewerMode.PAGE ||\n      this.mode === ViewerMode.PAGE_ZOOMED\n    ) {\n      this.mode = ViewerMode.DASHBOARD;\n    }\n  }\n\n  isPageZoomed(): boolean {\n    return this.mode === ViewerMode.PAGE_ZOOMED;\n  }\n\n  private change() {\n    this.modeChanges.previousValue = this.modeChanges.currentValue;\n    this.modeChanges.currentValue = this._mode;\n    this.toggleModeSubject.next({\n      ...this.modeChanges,\n    });\n  }\n}\n","import { String } from '../../alto-service/alto.model';\n\nexport class StringsBuilder {\n  private stringXml: any | undefined;\n\n  withStringXml(stringXml: any): StringsBuilder {\n    this.stringXml = stringXml;\n    return this;\n  }\n\n  build(): String[] {\n    return this.stringXml\n      ? this.stringXml\n          .filter(\n            (string: any) =>\n              !string.$.SUBS_CONTENT || string.$.SUBS_TYPE === 'HypPart1'\n          )\n          .map((string: any) => {\n            return { content: string.$.SUBS_CONTENT || string.$.CONTENT };\n          })\n      : [];\n  }\n}\n","import { TextLine } from '../../alto-service/alto.model';\nimport { StringsBuilder } from './strings.builder';\n\nexport class TextLinesBuilder {\n  private stringBuilder = new StringsBuilder();\n  private textLinesXml: any | undefined;\n\n  withTextLinesXml(textLinesXml: any) {\n    this.textLinesXml = textLinesXml;\n    return this;\n  }\n\n  build(): TextLine[] {\n    return this.textLinesXml\n      ? this.textLinesXml.map((textLine: any) => {\n          return {\n            strings: this.stringBuilder.withStringXml(textLine.String).build(),\n          };\n        })\n      : [];\n  }\n}\n","import { TextBlock, TextStyle } from '../../alto-service/alto.model';\nimport { TextLinesBuilder } from './text-lines.builder';\n\nexport class TextBlocksBuilder {\n  private textLinesBuilder = new TextLinesBuilder();\n  private textStyles: Map<string, TextStyle> | undefined;\n  private textBlocksXml: any | undefined;\n\n  withTextBlocksXml(textBlocksXml: any) {\n    this.textBlocksXml = textBlocksXml;\n    return this;\n  }\n\n  withTextStyles(\n    textStyles: Map<string, TextStyle> | undefined\n  ): TextBlocksBuilder {\n    this.textStyles = textStyles;\n    return this;\n  }\n\n  build(): TextBlock[] {\n    return this.textBlocksXml\n      ? this.textBlocksXml.map((textBlock: any) => {\n          const styleRef = textBlock.$.STYLEREFS?.split(' ');\n          let textStyle = undefined;\n          if (styleRef && this.textStyles) {\n            textStyle = this.textStyles.get(styleRef[0]);\n          }\n          return {\n            textLines: this.textLinesBuilder\n              .withTextLinesXml(textBlock.TextLine)\n              .build(),\n            textStyle: {\n              fontStyle: textStyle?.fontStyle,\n            },\n          };\n        })\n      : [];\n  }\n}\n","import { PrintSpace, TextStyle } from '../../alto-service/alto.model';\nimport { TextBlocksBuilder } from './text-blocks.builder';\n\nexport class PrintSpaceBuilder {\n  private textStyles: Map<string, TextStyle> | undefined;\n  private printSpaceXml: any | undefined;\n\n  withPrintSpaceXml(printSpaceXml: any) {\n    this.printSpaceXml = printSpaceXml;\n    return this;\n  }\n\n  withTextStyles(\n    textStyles: Map<string, TextStyle> | undefined\n  ): PrintSpaceBuilder {\n    this.textStyles = textStyles;\n    return this;\n  }\n\n  build(): PrintSpace {\n    let textBlocks: any[] = [];\n\n    if (this.printSpaceXml?.$$) {\n      textBlocks = this.extractTextBlocks(this.printSpaceXml.$$);\n    }\n    return {\n      textBlocks: new TextBlocksBuilder()\n        .withTextBlocksXml(textBlocks)\n        .withTextStyles(this.textStyles)\n        .build(),\n    };\n  }\n\n  private extractTextBlocks(node: any): any[] {\n    let blocks: any[] = [];\n    node.forEach((n: any) => {\n      if (this.isTextBlock(n)) {\n        blocks = [...blocks, n];\n      } else if (this.isComposedBlock(n)) {\n        if (n.$$) {\n          blocks = [...blocks, ...this.extractTextBlocks(n.$$)];\n        }\n      }\n    });\n    return blocks;\n  }\n\n  private isTextBlock(n: any): boolean {\n    return n['#name'] && n['#name'] === 'TextBlock';\n  }\n\n  private isComposedBlock(n: any): boolean {\n    return n['#name'] && n['#name'] === 'ComposedBlock';\n  }\n}\n","import { Page, TextStyle } from '../../alto-service/alto.model';\nimport { PrintSpaceBuilder } from './print-space.builder';\n\nexport class PageBuilder {\n  private printSpaceBuilder = new PrintSpaceBuilder();\n  private pageXml: any | undefined;\n\n  withPageXml(pageXml: any) {\n    this.pageXml = pageXml;\n    return this;\n  }\n\n  withTextStyles(textStyles: Map<string, TextStyle> | undefined): PageBuilder {\n    this.printSpaceBuilder.withTextStyles(textStyles);\n    return this;\n  }\n\n  build(): Page {\n    const topMargin = this.getFirstPrintSpace(this.pageXml.TopMargin);\n    const leftMargin = this.getFirstPrintSpace(this.pageXml.LeftMargin);\n    const rightMargin = this.getFirstPrintSpace(this.pageXml.RightMargin);\n    const bottomMargin = this.getFirstPrintSpace(this.pageXml.BottomMargin);\n    const printSpace = this.getFirstPrintSpace(this.pageXml.PrintSpace);\n\n    return {\n      topMargin: this.printSpaceBuilder.withPrintSpaceXml(topMargin).build(),\n      leftMargin: this.printSpaceBuilder.withPrintSpaceXml(leftMargin).build(),\n      rightMargin: this.printSpaceBuilder\n        .withPrintSpaceXml(rightMargin)\n        .build(),\n      bottomMargin: this.printSpaceBuilder\n        .withPrintSpaceXml(bottomMargin)\n        .build(),\n      printSpace: this.printSpaceBuilder.withPrintSpaceXml(printSpace).build(),\n    };\n  }\n\n  private getFirstPrintSpace(printSpace: any[]): any | undefined {\n    return printSpace ? printSpace[0] : undefined;\n  }\n}\n","import { Layout, TextStyle } from '../../alto-service/alto.model';\nimport { PageBuilder } from './page.builder';\n\nexport class LayoutBuilder {\n  private pageBuilder = new PageBuilder();\n\n  withLayoutXml(layoutXml: any): LayoutBuilder {\n    this.pageBuilder.withPageXml(layoutXml.Page[0]);\n    return this;\n  }\n\n  withTextStyles(\n    textStyles: Map<string, TextStyle> | undefined\n  ): LayoutBuilder {\n    this.pageBuilder.withTextStyles(textStyles);\n    return this;\n  }\n\n  build(): Layout {\n    return {\n      page: this.pageBuilder.build(),\n    };\n  }\n}\n","import { TextStyle } from '../../alto-service/alto.model';\n\nexport class StylesBuilder {\n  constructor(private stylesXml: any) {}\n\n  build(): Map<string, TextStyle> {\n    const textStyles: Map<string, TextStyle> = new Map();\n    if (this.stylesXml.TextStyle) {\n      this.stylesXml.TextStyle.forEach((textStyle: any) => {\n        textStyles.set(textStyle.$.ID, {\n          fontStyle: textStyle.$.FONTSTYLE,\n        });\n      });\n    }\n    return textStyles;\n  }\n}\n","import { Alto } from '../../alto-service/alto.model';\nimport { LayoutBuilder } from './layout.builder';\nimport { StylesBuilder } from './styles.builder';\n\nexport class AltoBuilder {\n  private layoutBuilder = new LayoutBuilder();\n  private altoXml: any | undefined;\n\n  withAltoXml(altoXml: any): AltoBuilder {\n    this.altoXml = altoXml;\n    return this;\n  }\n\n  build(): Alto {\n    if (this.altoXml.Styles) {\n      this.layoutBuilder.withTextStyles(\n        new StylesBuilder(this.altoXml.Styles[0]).build()\n      );\n    }\n    this.layoutBuilder.withLayoutXml(this.altoXml.Layout[0]);\n\n    return {\n      layout: this.layoutBuilder.build(),\n    };\n  }\n}\n","import { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ViewerLayout } from '../models/viewer-layout';\n\n@Injectable()\nexport class ViewerLayoutService {\n  private config = new MimeViewerConfig();\n  private _layout!: ViewerLayout;\n  private subject: BehaviorSubject<ViewerLayout> =\n    new BehaviorSubject<ViewerLayout>(this.config.initViewerLayout);\n\n  constructor(private breakpointObserver: BreakpointObserver) {}\n\n  init(isPagedManifest?: boolean): void {\n    if (\n      this.config.initViewerLayout === ViewerLayout.TWO_PAGE &&\n      isPagedManifest &&\n      !this.isHandsetOrTabletInPortrait()\n    ) {\n      this._layout = ViewerLayout.TWO_PAGE;\n      this.change();\n    } else {\n      this._layout = ViewerLayout.ONE_PAGE;\n      this.change();\n    }\n  }\n\n  get onChange(): Observable<ViewerLayout> {\n    return this.subject.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get layout(): ViewerLayout {\n    return this._layout;\n  }\n\n  setConfig(config: MimeViewerConfig) {\n    this.config = config;\n  }\n\n  setLayout(viewerLayout: ViewerLayout) {\n    this._layout = viewerLayout;\n    this.change();\n  }\n\n  toggle() {\n    if (this._layout === ViewerLayout.TWO_PAGE) {\n      this.setLayout(ViewerLayout.ONE_PAGE);\n    } else if (this._layout === ViewerLayout.ONE_PAGE) {\n      this.setLayout(ViewerLayout.TWO_PAGE);\n    }\n  }\n\n  private change() {\n    this.subject.next(this._layout);\n  }\n\n  private isHandsetOrTabletInPortrait(): boolean {\n    return this.breakpointObserver.isMatched([\n      Breakpoints.Handset,\n      Breakpoints.TabletPortrait,\n    ]);\n  }\n}\n","import { Resource } from '../models/manifest';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class IiifTileSourceStrategy implements TileSourceStrategy {\n  public getTileSource(resource: Resource): any {\n    let tileSource: any;\n    if (resource?.service?.service) {\n      tileSource = resource.service;\n    } else {\n      tileSource = (<any>resource.service)['@id'];\n      if (!tileSource) {\n        tileSource = (<any>resource)['@id'];\n      }\n\n      tileSource =\n        tileSource && tileSource.startsWith('//')\n          ? `${location.protocol}${tileSource}`\n          : tileSource;\n      tileSource =\n        tileSource && !tileSource.endsWith('/info.json')\n          ? `${tileSource}/info.json`\n          : tileSource;\n    }\n    return tileSource;\n  }\n}\n","import { TileSourceStrategy } from './tile-source-strategy';\n\nexport class IiifV3TileSourceStrategy implements TileSourceStrategy {\n  public getTileSource(resource: any): any {\n    return resource.service.id;\n  }\n}\n","import { Service } from '../models/manifest';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class StaticImageTileSourceStrategy implements TileSourceStrategy {\n  public getTileSource(resource: Service | any): any {\n    return {\n      type: 'image',\n      url: resource['@id'] || resource['id'],\n    };\n  }\n}\n","import { Resource } from '../models/manifest';\nimport { IiifTileSourceStrategy } from './iiif-tile-source-strategy';\nimport { IiifV3TileSourceStrategy } from './iiif-v3-tile-source-strategy';\nimport { StaticImageTileSourceStrategy } from './static-image-tile-source-strategy';\nimport { TileSourceStrategy } from './tile-source-strategy';\n\nexport class TileSourceStrategyFactory {\n  public static create(resource: Resource): TileSourceStrategy {\n    if (resource.service) {\n      if (resource.type === 'Image') {\n        return new IiifV3TileSourceStrategy();\n      } else {\n        return new IiifTileSourceStrategy();\n      }\n    } else {\n      return new StaticImageTileSourceStrategy();\n    }\n  }\n}\n","import {\n  CanvasGroup,\n  TileSourceAndRect,\n} from '../canvas-service/tile-source-and-rect.model';\nimport { Point } from './point';\n\nexport class CanvasGroups {\n  canvasGroups: CanvasGroup[] = [];\n  tileSourceAndRects: TileSourceAndRect[] = [];\n  canvasesPerCanvasGroup: number[][] = [];\n\n  public add(canvasGroup: CanvasGroup): void {\n    this.canvasGroups.push(canvasGroup);\n\n    if (canvasGroup.tileSourceAndRects) {\n      canvasGroup.tileSourceAndRects.forEach(\n        (tileSourceAndRect: TileSourceAndRect, i: number) => {\n          this.tileSourceAndRects.push(tileSourceAndRect);\n        },\n      );\n    }\n  }\n\n  public addRange(canvasGroups: ReadonlyArray<CanvasGroup>): void {\n    this.canvasGroups = [...canvasGroups];\n  }\n\n  public get(index: number): CanvasGroup {\n    return { ...this.canvasGroups[index] };\n  }\n\n  public findClosestIndex(point: Point): number {\n    let i = 0;\n    let lastDelta: any;\n\n    if (point === null) {\n      return -1;\n    }\n    this.canvasGroups.some(function (canvasGroup: CanvasGroup, index: number) {\n      const delta = Math.abs(point.x - canvasGroup.rect.centerX);\n      if (delta >= lastDelta) {\n        return true;\n      }\n      i = index;\n      lastDelta = delta;\n      return false;\n    });\n    return i;\n  }\n\n  public length(): number {\n    return this.canvasGroups.length;\n  }\n}\n","/****************************************************************\n * MIME-viewer options\n ****************************************************************/\n\nexport const ViewerOptions = {\n  zoom: {\n    zoomFactor: 1.15,\n    dblClickZoomFactor: 2.7,\n    // How many pixels since lastDistance before it is considered a pinch\n    pinchZoomThreshold: 3,\n  },\n\n  pan: {\n    // Sensitivity when determining swipe-direction.\n    // Higher threshold means that swipe must be more focused in\n    // x-direction before the gesture is recognized as \"left\" or \"right\"\n    swipeDirectionThreshold: 70,\n  },\n\n  // All transition times in milliseconds\n  transitions: {\n    toolbarsEaseInTime: 400,\n    toolbarsEaseOutTime: 500,\n    OSDAnimationTime: 600, // Animation-time for OSD-animations\n  },\n\n  overlays: {\n    // Margin between canvas groups in Dashboard View in OpenSeadragon viewport-coordinates\n    canvasGroupMarginInDashboardView: 300,\n    // Margin between canvas groups in Page View in OpenSeadragon viewport-coordinates\n    canvasGroupMarginInPageView: 20,\n  },\n\n  padding: {\n    // Padding in viewer container in pixels\n    header: 80, // Placeholder above viewer for header in Dashboard View\n    footer: 80, // Placeholder below viewer for footer in Dashboard View\n  },\n\n  colors: {\n    canvasGroupBackgroundColor: '#fafafa',\n  },\n};\n","export class Rect {\n  public x = 0;\n  public y = 0;\n  public width = 0;\n  public height = 0;\n  public centerX = 0;\n  public centerY = 0;\n\n  constructor(fields?: {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n  }) {\n    if (fields) {\n      this.x = fields.x || this.x;\n      this.y = fields.y || this.y;\n      this.width = fields.width || this.width;\n      this.height = fields.height || this.height;\n      this.centerX = this.x + this.width / 2;\n      this.centerY = this.y + this.height / 2;\n    }\n  }\n}\n","export class Utils {\n  static numbersAreClose(\n    thing: number,\n    realThing: number,\n    epsilon: number\n  ): boolean {\n    return Math.abs(thing - realThing) <= epsilon;\n  }\n  static shortenDecimals(zoom: any, precision: number): number {\n    const short = Number(zoom).toPrecision(precision);\n    return Number(short);\n  }\n\n  static getScaleFactor(\n    physicalScale: number | undefined,\n    ignorePhysicalScale = false\n  ): number {\n    return ignorePhysicalScale ? 1 : (physicalScale ? physicalScale : 1) * 400;\n  }\n}\n","import { Rect } from '../models/rect';\nimport { Utils } from '../utils';\nimport { CanvasGroupPositionCriteria } from './calculate-canvas-group-position-strategy';\n\nexport const canvasRectFromCriteria = (\n  rotation: number,\n  criteria: CanvasGroupPositionCriteria,\n  x: number,\n  ignorePhysicalScale: boolean\n) => {\n  let rect = {};\n  const scale = Utils.getScaleFactor(\n    criteria.canvasSource.service?.service?.physicalScale,\n    ignorePhysicalScale\n  );\n  if (rotation === 90 || rotation === 270) {\n    rect = {\n      height: Math.trunc(criteria.canvasSource.width * scale),\n      width: Math.trunc(criteria.canvasSource.height * scale),\n      x: x,\n      y: Math.trunc((criteria.canvasSource.width * scale) / 2) * -1,\n    };\n  } else {\n    rect = {\n      height: Math.trunc(criteria.canvasSource.height * scale),\n      width: Math.trunc(criteria.canvasSource.width * scale),\n      x: x,\n      y: Math.trunc((criteria.canvasSource.height * scale) / 2) * -1,\n    };\n  }\n  return new Rect(rect);\n};\n","import { MimeViewerConfig } from '../mime-viewer-config';\nimport { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateCanvasGroupPositionStrategy,\n  CanvasGroupPositionCriteria,\n} from './calculate-canvas-group-position-strategy';\nimport { canvasRectFromCriteria } from './calculate-canvas-group-position-utils';\n\nexport class OnePageCalculatePagePositionStrategy\n  implements CalculateCanvasGroupPositionStrategy\n{\n  constructor(private config: MimeViewerConfig) {}\n\n  calculateCanvasGroupPosition(\n    criteria: CanvasGroupPositionCriteria,\n    rotation = 0\n  ): Rect {\n    let x: number;\n    if (!criteria.canvasGroupIndex) {\n      if (rotation === 90 || rotation === 270) {\n        x = (criteria.canvasSource.height / 2) * -1;\n      } else {\n        x = (criteria.canvasSource.width / 2) * -1;\n      }\n    } else {\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateLtrX(criteria)\n          : this.calculateRtlX(criteria);\n    }\n    return canvasRectFromCriteria(\n      rotation,\n      criteria,\n      x,\n      this.config.ignorePhysicalScale\n    );\n  }\n\n  private calculateLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width +\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateRtlX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x -\n      criteria.previousCanvasGroupPosition.width -\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n}\n","import { OnePageCalculatePagePositionStrategy } from '../canvas-group-position/one-page-calculate-page-position-strategy';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { CanvasGroups } from '../models/canvas-groups';\nimport { Rect } from '../models/rect';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { AbstractCanvasGroupStrategy } from './canvas-group.strategy';\nimport { CanvasGroup, TileSourceAndRect } from './tile-source-and-rect.model';\n\nexport class OneCanvasPerCanvasGroupStrategy\n  implements AbstractCanvasGroupStrategy\n{\n  private positionStrategy: OnePageCalculatePagePositionStrategy;\n\n  constructor(\n    private config: MimeViewerConfig,\n    private viewingDirection: ViewingDirection,\n    private rotation: number,\n  ) {\n    this.positionStrategy = new OnePageCalculatePagePositionStrategy(\n      this.config,\n    );\n  }\n\n  addAll(tileSources: ReadonlyArray<any>): CanvasGroups {\n    const canvasGroups = new CanvasGroups();\n\n    tileSources.forEach((tileSource, index) => {\n      const previousCanvasGroup = this.getPreviousCanvasGroup(\n        canvasGroups,\n        index,\n      );\n      const position = this.calculatePosition(\n        tileSource,\n        index,\n        previousCanvasGroup,\n      );\n      const newCanvasGroup = this.createCanvasGroup(tileSource, position);\n\n      canvasGroups.add(newCanvasGroup);\n      canvasGroups.canvasesPerCanvasGroup.push([index]);\n    });\n\n    return canvasGroups;\n  }\n\n  private getPreviousCanvasGroup(\n    canvasGroups: CanvasGroups,\n    index: number,\n  ): CanvasGroup | undefined {\n    return index === 0\n      ? undefined\n      : canvasGroups.canvasGroups[canvasGroups.canvasGroups.length - 1];\n  }\n\n  private calculatePosition(\n    tileSource: any,\n    index: number,\n    previousCanvasGroup?: CanvasGroup,\n  ): Rect {\n    return this.positionStrategy.calculateCanvasGroupPosition(\n      {\n        canvasGroupIndex: index,\n        canvasSource: tileSource,\n        previousCanvasGroupPosition: previousCanvasGroup\n          ? previousCanvasGroup.rect\n          : new Rect(),\n        viewingDirection: this.viewingDirection,\n      },\n      this.rotation,\n    );\n  }\n\n  private createCanvasGroup(tileSource: any, position: Rect): CanvasGroup {\n    const tileSourceAndRect: TileSourceAndRect = { tileSource, rect: position };\n    return { tileSourceAndRects: [tileSourceAndRect], rect: position };\n  }\n}\n","import { MimeViewerConfig } from '../mime-viewer-config';\nimport { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateCanvasGroupPositionStrategy,\n  CanvasGroupPositionCriteria,\n} from './calculate-canvas-group-position-strategy';\nimport { canvasRectFromCriteria } from './calculate-canvas-group-position-utils';\n\nexport class TwoPageCalculateCanvasGroupPositionStrategy\n  implements CalculateCanvasGroupPositionStrategy\n{\n  constructor(private config: MimeViewerConfig) {}\n\n  calculateCanvasGroupPosition(\n    criteria: CanvasGroupPositionCriteria,\n    rotation = 0\n  ): Rect {\n    let x: number;\n\n    if (!criteria.canvasGroupIndex) {\n      // First page\n      x = 0;\n    } else if (criteria.canvasGroupIndex % 2) {\n      // Even page numbers\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateEvenLtrX(criteria)\n          : this.calculateEvenRtlX(criteria);\n    } else {\n      // Odd page numbers\n      x =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? this.calculateOddLtrX(criteria)\n          : this.calculateOddRtlX(criteria);\n    }\n\n    return canvasRectFromCriteria(\n      rotation,\n      criteria,\n      x,\n      this.config.ignorePhysicalScale\n    );\n  }\n\n  private calculateEvenLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width +\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateOddLtrX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x +\n      criteria.previousCanvasGroupPosition.width\n    );\n  }\n\n  private calculateEvenRtlX(criteria: CanvasGroupPositionCriteria) {\n    return (\n      criteria.previousCanvasGroupPosition.x -\n      criteria.canvasSource.width -\n      ViewerOptions.overlays.canvasGroupMarginInDashboardView\n    );\n  }\n\n  private calculateOddRtlX(criteria: CanvasGroupPositionCriteria) {\n    return criteria.previousCanvasGroupPosition.x - criteria.canvasSource.width;\n  }\n}\n","import { TwoPageCalculateCanvasGroupPositionStrategy } from '../canvas-group-position/two-page-calculate-page-position-strategy';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { CanvasGroups } from '../models/canvas-groups';\nimport { Rect } from '../models/rect';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { AbstractCanvasGroupStrategy } from './canvas-group.strategy';\nimport { CanvasGroup, TileSourceAndRect } from './tile-source-and-rect.model';\n\nexport class TwoCanvasPerCanvasGroupStrategy\n  implements AbstractCanvasGroupStrategy\n{\n  private positionStrategy: TwoPageCalculateCanvasGroupPositionStrategy;\n\n  constructor(\n    private config: MimeViewerConfig,\n    private viewingDirection: ViewingDirection,\n    private rotation: number,\n  ) {\n    this.positionStrategy = new TwoPageCalculateCanvasGroupPositionStrategy(\n      this.config,\n    );\n  }\n\n  addAll(tileSources: ReadonlyArray<any>): CanvasGroups {\n    const canvasGroups = new CanvasGroups();\n\n    // Add first single page\n    this.addSinglePage(canvasGroups, tileSources[0], 0, new Rect());\n\n    for (let i = 1; i < tileSources.length; i += 2) {\n      if (this.hasNextPage(tileSources, i)) {\n        this.addPairedPages(canvasGroups, tileSources, i);\n      } else {\n        this.addSinglePage(\n          canvasGroups,\n          tileSources[i],\n          i,\n          this.getLastRect(canvasGroups),\n        );\n      }\n    }\n\n    return canvasGroups;\n  }\n\n  private addSinglePage(\n    canvasGroups: CanvasGroups,\n    tileSource: any,\n    index: number,\n    previousRect: Rect,\n  ): void {\n    const position = this.calculatePosition(tileSource, index, previousRect);\n    const tileSourceAndRect: TileSourceAndRect = { tileSource, rect: position };\n    const newCanvasGroup: CanvasGroup = {\n      tileSourceAndRects: [tileSourceAndRect],\n      rect: position,\n    };\n\n    canvasGroups.add(newCanvasGroup);\n    canvasGroups.canvasesPerCanvasGroup.push([index]);\n  }\n\n  private addPairedPages(\n    canvasGroups: CanvasGroups,\n    tileSources: ReadonlyArray<any>,\n    index: number,\n  ): void {\n    const previousCanvasGroup = this.getLastCanvasGroup(canvasGroups);\n    const firstTileSourceAndRect = this.createTileSourceAndRect(\n      tileSources[index],\n      index,\n      previousCanvasGroup.rect,\n    );\n    const secondTileSourceAndRect = this.createTileSourceAndRect(\n      tileSources[index + 1],\n      index + 1,\n      firstTileSourceAndRect.rect,\n    );\n\n    const newCanvasGroup: CanvasGroup = {\n      tileSourceAndRects: [firstTileSourceAndRect, secondTileSourceAndRect],\n      rect: this.combineRects(\n        firstTileSourceAndRect.rect,\n        secondTileSourceAndRect.rect,\n      ),\n    };\n\n    canvasGroups.add(newCanvasGroup);\n    canvasGroups.canvasesPerCanvasGroup.push([index, index + 1]);\n  }\n\n  private hasNextPage(tileSources: ReadonlyArray<any>, index: number): boolean {\n    return index + 1 < tileSources.length;\n  }\n\n  private createTileSourceAndRect(\n    tileSource: any,\n    index: number,\n    previousRect: Rect,\n  ): TileSourceAndRect {\n    return {\n      tileSource,\n      rect: this.calculatePosition(tileSource, index, previousRect),\n    };\n  }\n\n  private calculatePosition(\n    tileSource: any,\n    index: number,\n    previousRect: Rect,\n  ): Rect {\n    return this.positionStrategy.calculateCanvasGroupPosition(\n      {\n        canvasGroupIndex: index,\n        canvasSource: tileSource,\n        previousCanvasGroupPosition: previousRect,\n        viewingDirection: this.viewingDirection,\n      },\n      this.rotation,\n    );\n  }\n\n  private getLastCanvasGroup(canvasGroups: CanvasGroups): CanvasGroup {\n    return canvasGroups.canvasGroups[canvasGroups.canvasGroups.length - 1];\n  }\n\n  private getLastRect(canvasGroups: CanvasGroups): Rect {\n    const lastCanvasGroup = this.getLastCanvasGroup(canvasGroups);\n    return lastCanvasGroup.rect;\n  }\n\n  private combineRects(rect1: Rect, rect2: Rect): Rect {\n    return new Rect({\n      x: Math.min(rect1.x, rect2.x),\n      y: Math.min(rect1.y, rect2.y),\n      height: Math.max(rect1.height, rect2.height),\n      width: rect1.width + rect2.width,\n    });\n  }\n}\n","import { MimeViewerConfig } from '../mime-viewer-config';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { OneCanvasPerCanvasGroupStrategy } from './one-canvas-per-canvas-group-strategy';\nimport { TwoCanvasPerCanvasGroupStrategy } from './two-canvas-per-canvas-group-strategy';\n\nexport class CanvasGroupStrategyFactory {\n  public static create(\n    layout: ViewerLayout,\n    config: MimeViewerConfig,\n    viewingDirection: ViewingDirection,\n    rotation: number,\n  ) {\n    if (layout === ViewerLayout.ONE_PAGE) {\n      return new OneCanvasPerCanvasGroupStrategy(\n        config,\n        viewingDirection,\n        rotation,\n      );\n    } else {\n      return new TwoCanvasPerCanvasGroupStrategy(\n        config,\n        viewingDirection,\n        rotation,\n      );\n    }\n  }\n}\n","import { Injectable } from '@angular/core';\nimport * as OpenSeadragon from 'openseadragon';\nimport { Viewer } from 'openseadragon';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { Resource } from '../models/manifest';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { ViewerLayoutService } from '../viewer-layout-service/viewer-layout-service';\nimport { TileSourceStrategyFactory } from '../viewer-service/tile-source-strategy-factory';\nimport { CanvasGroups } from './../models/canvas-groups';\nimport { Point } from './../models/point';\nimport { Rect } from './../models/rect';\nimport { CanvasGroupStrategyFactory } from './canvas-groups-strategy.factory';\nimport { TileSourceAndRect } from './tile-source-and-rect.model';\n\n@Injectable()\nexport class CanvasService {\n  protected _currentNumberOfCanvasGroups: BehaviorSubject<number> =\n    new BehaviorSubject(0);\n  protected _currentCanvasGroupIndex: BehaviorSubject<number> =\n    new BehaviorSubject(0);\n  protected canvasGroups: CanvasGroups = new CanvasGroups();\n  protected _numberOfCanvases = 0;\n  private config = new MimeViewerConfig();\n  private tileSources: any[] = [];\n  private viewer: Viewer | undefined = undefined;\n  private rotation = 0;\n  private viewingDirection = ViewingDirection.LTR;\n  private svgNode: any;\n  private _overlays: SVGRectElement[] = [];\n\n  constructor(private viewerLayoutService: ViewerLayoutService) {}\n\n  get overlays(): ReadonlyArray<SVGRectElement> {\n    return this._overlays;\n  }\n\n  get onCanvasGroupIndexChange(): Observable<number> {\n    return this._currentCanvasGroupIndex\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  get onNumberOfCanvasGroupsChange(): Observable<number> {\n    return this._currentNumberOfCanvasGroups\n      .asObservable()\n      .pipe(distinctUntilChanged());\n  }\n\n  set currentCanvasGroupIndex(currentCanvasGroupIndex: number) {\n    if (!this.isWithinBounds(currentCanvasGroupIndex)) {\n      return;\n    }\n    this._currentCanvasGroupIndex.next(currentCanvasGroupIndex);\n  }\n\n  get currentCanvasGroupIndex(): number {\n    return this._currentCanvasGroupIndex.value;\n  }\n\n  get numberOfCanvases(): number {\n    return this._numberOfCanvases;\n  }\n\n  set numberOfCanvases(numberOfCanvases: number) {\n    this._numberOfCanvases = numberOfCanvases;\n  }\n\n  get numberOfCanvasGroups(): number {\n    return this.canvasGroups.length();\n  }\n\n  get currentCanvasIndex(): number {\n    const canvases =\n      this.canvasGroups.canvasesPerCanvasGroup[this.currentCanvasGroupIndex];\n    return canvases && canvases.length >= 1 ? canvases[0] : 0;\n  }\n\n  setViewer(viewer: any): void {\n    this.viewer = viewer;\n  }\n\n  setConfig(config: MimeViewerConfig): void {\n    this.config = config;\n  }\n\n  setSvgNode(svgNode: any): void {\n    this.svgNode = svgNode;\n  }\n\n  setRotation(rotation: number): void {\n    this.rotation = rotation;\n  }\n\n  setViewingDirection(viewingDirection: ViewingDirection): void {\n    this.viewingDirection = viewingDirection;\n  }\n\n  addTileSources(tileSources: Resource[]): void {\n    this.tileSources = tileSources;\n  }\n\n  updateViewer(): void {\n    this.createCanvasGroups();\n    this.createAndAppendCanvasGroups();\n  }\n\n  isWithinBounds(canvasGroupIndex: number): boolean {\n    return (\n      canvasGroupIndex > -1 && canvasGroupIndex <= this.numberOfCanvasGroups - 1\n    );\n  }\n\n  isCurrentCanvasGroupValid(): boolean {\n    return this.isWithinBounds(this.currentCanvasGroupIndex);\n  }\n\n  // Returns -1 if next canvas index is out of bounds\n  getNextCanvasGroupIndex(): number {\n    if (!this.isWithinBounds(this.currentCanvasGroupIndex + 1)) {\n      return -1;\n    }\n    this.currentCanvasGroupIndex++;\n    return this.currentCanvasGroupIndex;\n  }\n\n  // Returns -1 if previous canvas index is out of bounds\n  getPrevCanvasGroupIndex(): number {\n    if (!this.isWithinBounds(this.currentCanvasGroupIndex - 1)) {\n      return -1;\n    }\n    this.currentCanvasGroupIndex--;\n    return this.currentCanvasGroupIndex;\n  }\n\n  constrainToRange(canvasGroupsIndex: number): number {\n    if (canvasGroupsIndex < 0) {\n      return 0;\n    } else if (canvasGroupsIndex >= this.numberOfCanvasGroups - 1) {\n      return this.numberOfCanvasGroups - 1;\n    } else {\n      return canvasGroupsIndex;\n    }\n  }\n\n  findClosestCanvasGroupIndex(point: Point): number {\n    return this.canvasGroups.findClosestIndex(point);\n  }\n\n  findCanvasGroupByCanvasIndex(canvasIndex: number): number {\n    return this.canvasGroups.canvasesPerCanvasGroup.findIndex(function (\n      canvasForCanvasGroup: number[],\n    ) {\n      return canvasForCanvasGroup.indexOf(canvasIndex) >= 0;\n    });\n  }\n\n  findCanvasByCanvasIndex(canvasIndex: number): number {\n    return this.canvasGroups.canvasesPerCanvasGroup.length === 0\n      ? -1\n      : this.canvasGroups.canvasesPerCanvasGroup[canvasIndex][0];\n  }\n\n  getCanvasGroupLabel(canvasGroupIndex: number): string {\n    if (\n      !this.canvasGroups.canvasGroups ||\n      this.canvasGroups.canvasesPerCanvasGroup.length === 0\n    ) {\n      return '1';\n    }\n\n    const canvasGroup =\n      this.canvasGroups.canvasesPerCanvasGroup[canvasGroupIndex];\n    let canvasGroupLabel = '' + (canvasGroup[0] + 1);\n\n    if (canvasGroup.length > 1) {\n      canvasGroupLabel =\n        canvasGroupLabel + '-' + (canvasGroup[canvasGroup.length - 1] + 1);\n    }\n\n    return canvasGroupLabel;\n  }\n\n  getCanvasesPerCanvasGroup(canvasIndex: number): number[] {\n    return !this.canvasGroups.canvasGroups\n      ? [0]\n      : this.canvasGroups.canvasesPerCanvasGroup[canvasIndex];\n  }\n\n  getCanvasRect(canvasIndex: number): Rect {\n    return this.canvasGroups.tileSourceAndRects[canvasIndex].rect;\n  }\n\n  getCurrentCanvasGroupRect(): Rect {\n    return this.getCanvasGroupRect(this.currentCanvasGroupIndex);\n  }\n\n  getCanvasGroupRect(canvasGroupIndex: number): Rect {\n    return this.canvasGroups.get(canvasGroupIndex).rect;\n  }\n\n  reset() {\n    this.viewer = undefined;\n    this._overlays = [];\n    this.numberOfCanvases = 0;\n    this._currentCanvasGroupIndex.next(0);\n    this.canvasGroups = new CanvasGroups();\n  }\n\n  private createTile(tile: TileSourceAndRect): void {\n    const position = tile.rect;\n    const rotated = this.rotation === 90 || this.rotation === 270;\n\n    let bounds;\n\n    /* Because image scaling is performed before rotation,\n     * we must invert width & height and translate position so that tile rotation ends up correct\n     */\n    if (rotated) {\n      bounds = new OpenSeadragon.Rect(\n        position.x + (position.width - position.height) / 2,\n        position.y - (position.width - position.height) / 2,\n        position.height,\n        position.width,\n      );\n    } else {\n      bounds = new OpenSeadragon.Rect(\n        position.x,\n        position.y,\n        position.width,\n        position.height,\n      );\n    }\n\n    const tileSourcesStrategy = TileSourceStrategyFactory.create(\n      tile.tileSource,\n    );\n    const tileSource = tileSourcesStrategy.getTileSource(tile.tileSource);\n    this.viewer?.addTiledImage({\n      tileSource: tileSource,\n      fitBounds: bounds,\n      degrees: this.rotation,\n    });\n  }\n\n  private createAndAppendCanvasGroups(): void {\n    let index = 0;\n    this.canvasGroups.canvasGroups.forEach((canvasGroup) => {\n      const group: any = this.appendPageGroup();\n      canvasGroup.tileSourceAndRects.forEach((tileSourceAndRect) => {\n        this.createTile(tileSourceAndRect);\n        this.createOverlay(group, tileSourceAndRect, index);\n        index++;\n      });\n    });\n  }\n\n  private appendPageGroup(): any {\n    return this.svgNode.append('g').attr('class', 'page-group');\n  }\n\n  private createOverlay(group: any, tile: TileSourceAndRect, i: number): void {\n    const position = tile.rect;\n    const currentOverlay = this.createRectangle(group, position);\n\n    // Make custom borders if current layout is two-paged\n    if (this.viewerLayoutService.layout === ViewerLayout.TWO_PAGE) {\n      this.applyCustomBorders(i, position, currentOverlay);\n    }\n\n    const currentOverlayNode: SVGRectElement = currentOverlay.node();\n    this._overlays[i] = currentOverlayNode;\n  }\n\n  private createCanvasGroups(): void {\n    this.numberOfCanvases = this.tileSources.length;\n    const canvasGroupStrategy = CanvasGroupStrategyFactory.create(\n      this.viewerLayoutService.layout,\n      this.config,\n      this.viewingDirection,\n      this.rotation,\n    );\n    this.canvasGroups = canvasGroupStrategy.addAll(this.tileSources);\n    this._currentNumberOfCanvasGroups.next(this.canvasGroups.length());\n  }\n\n  private applyCustomBorders(\n    i: number,\n    position: any,\n    currentOverlay: any,\n  ): void {\n    if (i % 2 === 0 && i !== 0) {\n      const noLeftStrokeStyle =\n        Number(position.width * 2 + position.height) +\n        ', ' +\n        position.width * 2;\n      currentOverlay.style('stroke-dasharray', noLeftStrokeStyle);\n    } else if (i % 2 !== 0 && i !== 0) {\n      const noRightStrokeStyle =\n        position.width +\n        ', ' +\n        position.height +\n        ', ' +\n        Number(position.width * 2 + position.height);\n      currentOverlay.style('stroke-dasharray', noRightStrokeStyle);\n    }\n  }\n\n  private createRectangle(group: any, position: Rect): any {\n    return group\n      .append('rect')\n      .attr('x', position.x)\n      .attr('y', position.y)\n      .attr('width', position.width)\n      .attr('height', position.height)\n      .attr('class', 'tile');\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Hit } from './../../core/models/hit';\n\n@Injectable()\nexport class HighlightService {\n  highlightSelectedHit(id: number): void {\n    document.querySelector('.selectedHit')?.removeAttribute('class');\n    document\n      .querySelector(`mark[data-id='${id}']`)\n      ?.setAttribute('class', 'selectedHit');\n  }\n\n  highlight(\n    html: string,\n    currentIndex: number,\n    hits?: Hit[] | undefined\n  ): string {\n    if (hits && hits.length > 0) {\n      for (const hit of hits) {\n        if (hit.index === currentIndex) {\n          html = this.markHtml(html, hit.match, hit.id);\n        }\n      }\n    }\n    return html;\n  }\n\n  private markHtml(html: string, pattern: string, id?: number): string {\n    const wordBoundary = '\\\\b';\n    return html?.replace(\n      new RegExp(\n        wordBoundary + this.escapeSpecialCharacters(pattern) + '(?!<)'\n      ),\n      `<mark data-id=\"${id}\">$&</mark>`\n    );\n  }\n\n  /*\n    \"escapeAndRegexMatch\" \"\\\\\" Is a escape character used to escape special\n    characters in the regexPattern, \"$&\" is a back reference to the whole match.\n\n    \"searchValuePattern\" is a list of special characters to be escaped,\n    everything inside /[ ... ] including \\s (whitespace) is to be escaped.\n\n    text.substring(1) removes the first character of a string if the character is \",\n    this is a special case in order to highlight all words.\n  */\n  private escapeSpecialCharacters(text: string): string {\n    const escapeAndRegexMatch = '\\\\$&';\n    const searchValuePattern = /[-[\\]{}()*\"+?.,\\\\^$|#\\s]/g;\n    return text.charAt(0) === '\"'\n      ? text.substring(1).replace(searchValuePattern, escapeAndRegexMatch)\n      : text.replace(searchValuePattern, escapeAndRegexMatch);\n  }\n}\n","import { Canvas, Sequence } from '../../../models/manifest';\nimport { ViewingDirection } from '../../../models/viewing-direction';\n\nexport class BuilderUtils {\n  static extractId(value: any): any {\n    return value['@id'];\n  }\n\n  static extracType(value: any): any {\n    return value['@type'];\n  }\n\n  static extractContext(value: any): any {\n    return value['@context'];\n  }\n\n  static extractViewingDirection(value: any): ViewingDirection {\n    if (value['viewingDirection'] === 'right-to-left') {\n      return ViewingDirection.RTL;\n    } else {\n      return ViewingDirection.LTR;\n    }\n  }\n\n  static findCanvasIndex(canvases: string[], sequences: Sequence[]): number {\n    let index = -1;\n    if (sequences[0] && sequences[0].canvases && canvases[0]) {\n      index = sequences[0].canvases.findIndex(\n        (canvas: Canvas) => canvas.id === canvases[0]\n      );\n    }\n    return index;\n  }\n}\n","import { Metadata } from '../../../models/manifest';\n\nexport class MetadataBuilder {\n  constructor(private metadatas: any) {}\n\n  build(): Metadata[] {\n    const metadatas: Metadata[] = [];\n    if (this.metadatas) {\n      for (let i = 0; i < this.metadatas.length; i++) {\n        const data = this.metadatas[i];\n        metadatas.push(new Metadata(data.label, data.value));\n      }\n    }\n    return metadatas;\n  }\n}\n","import { Size } from '../../../models/manifest';\n\nexport class SizesBuilder {\n  constructor(private sizes: any[]) {}\n\n  build(): Size[] {\n    const sizes: Size[] = [];\n    if (this.sizes) {\n      for (let i = 0; i < this.sizes.length; i++) {\n        const size = this.sizes[i];\n        sizes.push(new Size(size.width, size.height));\n      }\n    }\n    return sizes;\n  }\n}\n","import { Tile } from '../../../models/manifest';\n\nexport class TilesBuilder {\n  constructor(private tiles: any[]) {}\n\n  build(): Tile[] {\n    const tiles: Tile[] = [];\n    if (this.tiles) {\n      for (let i = 0; i < this.tiles.length; i++) {\n        const tile = this.tiles[i];\n        tiles.push(\n          new Tile({\n            width: tile.width,\n            scaleFactors: tile.scaleFactors,\n          })\n        );\n      }\n    }\n    return tiles;\n  }\n}\n","import { Service } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { SizesBuilder } from './sizes.builder';\nimport { TilesBuilder } from './tiles.builder';\n\nexport class ServiceBuilder {\n  constructor(private service: any) {}\n\n  build(): Service | undefined {\n    if (!this.service) {\n      return undefined;\n    } else {\n      return new Service({\n        id: BuilderUtils.extractId(this.service),\n        context: BuilderUtils.extractContext(this.service),\n        protocol: this.service.protocol,\n        width: this.service.width,\n        height: this.service.height,\n        sizes: new SizesBuilder(this.service.sizes).build(),\n        tiles: new TilesBuilder(this.service.tiles).build(),\n        profile: this.service.profile,\n        physicalScale: this.service.physicalScale,\n        physicalUnits: this.service.physicalUnits,\n        service: new ServiceBuilder(this.service.service).build(),\n      });\n    }\n  }\n}\n","import { Resource } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ServiceBuilder } from './service.builder';\n\nexport class ResourceBuilder {\n  constructor(private resource: any) {}\n\n  build(): Resource {\n    if (!this.resource) {\n      throw new Error('No resource');\n    }\n    return new Resource({\n      id: BuilderUtils.extractId(this.resource),\n      type: BuilderUtils.extracType(this.resource),\n      format: this.resource.format,\n      service: new ServiceBuilder(this.resource.service).build(),\n      height: this.resource.height,\n      width: this.resource.width,\n    });\n  }\n}\n","import { Images } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ResourceBuilder } from './resource.builder';\n\nexport class ImagesBuilder {\n  constructor(private images: any[]) {}\n\n  build(): Images[] {\n    const images: Images[] = [];\n    if (this.images) {\n      for (let i = 0; i < this.images.length; i++) {\n        const image = this.images[i];\n        images.push(\n          new Images({\n            id: BuilderUtils.extractId(image),\n            type: BuilderUtils.extracType(image),\n            motivation: image.motivation,\n            resource: new ResourceBuilder(image.resource).build(),\n            on: image.on,\n          })\n        );\n      }\n    }\n    return images;\n  }\n}\n","import { Canvas } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ImagesBuilder } from './images.builder';\n\nexport class CanvasBuilder {\n  constructor(private canvases: any[]) {}\n\n  build(): Canvas[] {\n    const canvases: Canvas[] = [];\n    if (this.canvases) {\n      for (let i = 0; i < this.canvases.length; i++) {\n        const canvas = this.canvases[i];\n        const seeAlso = canvas.seeAlso ? canvas.seeAlso : [];\n        if (canvas['@seeAlso']) {\n          seeAlso.push(canvas['@seeAlso']);\n        }\n\n        canvases.push(\n          new Canvas({\n            id: BuilderUtils.extractId(canvas),\n            type: BuilderUtils.extracType(canvas),\n            label: canvas.label,\n            thumbnail: canvas.thumbnail,\n            height: canvas.height,\n            width: canvas.width,\n            images: new ImagesBuilder(canvas.images).build(),\n            altoUrl: this.extractAltoUrl(seeAlso),\n          })\n        );\n      }\n    }\n    return canvases;\n  }\n\n  private extractAltoUrl(seeAlso: any[]): string | undefined {\n    if (!seeAlso) {\n      return undefined;\n    }\n\n    const altoService = seeAlso.find(\n      (s: any) => s.format === 'application/alto+xml'\n    );\n    return altoService ? BuilderUtils.extractId(altoService) : undefined;\n  }\n}\n","import { Sequence } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { CanvasBuilder } from './canvas.builder';\n\nexport class SequenceBuilder {\n  constructor(private sequences: any[]) {}\n\n  build(): Sequence[] {\n    const sequences: Sequence[] = [];\n    if (this.sequences) {\n      for (let i = 0; i < this.sequences.length; i++) {\n        const seq = this.sequences[i];\n        sequences.push(\n          new Sequence({\n            id: BuilderUtils.extractId(seq),\n            type: BuilderUtils.extracType(seq),\n            label: seq.label,\n            viewingHint: seq.viewingHint,\n            canvases: new CanvasBuilder(seq.canvases).build(),\n          })\n        );\n      }\n    }\n    return sequences;\n  }\n}\n","import { Sequence, Structure } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\n\nexport class StructureBuilder {\n  constructor(private structures: any[], private sequences: Sequence[]) {}\n\n  build(): Structure[] {\n    const structures: Structure[] = [];\n    if (this.structures) {\n      for (let i = 0; i < this.structures.length; i++) {\n        const structure = this.structures[i];\n        structures.push(\n          new Structure({\n            id: BuilderUtils.extractId(structure),\n            type: BuilderUtils.extracType(structure),\n            label: structure.label,\n            canvases: structure.canvases,\n            canvasIndex: BuilderUtils.findCanvasIndex(\n              structure.canvases,\n              this.sequences\n            ),\n          })\n        );\n      }\n    }\n    return structures;\n  }\n}\n","import { Resource, Sequence } from '../../../models/manifest';\n\nexport class TileSourceBuilder {\n  constructor(private sequences: Sequence[]) {}\n\n  build(): Resource[] {\n    const tilesources: Resource[] = [];\n    if (this.sequences && this.sequences.length > 0) {\n      const canvases = this.sequences[0].canvases;\n      for (let i = 0; canvases && i < canvases.length; i++) {\n        const canvas = canvases[i];\n        if (canvas) {\n          if (canvas.images && canvas.images.length >= 0) {\n            const resource = canvas.images[0].resource;\n            if (resource) {\n              tilesources.push(resource);\n            }\n          }\n        }\n      }\n    }\n    return tilesources;\n  }\n}\n","import { Manifest, Sequence } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { MetadataBuilder } from './metadata.builder';\nimport { SequenceBuilder } from './sequence.builder';\nimport { ServiceBuilder } from './service.builder';\nimport { StructureBuilder } from './structure.builder';\nimport { TileSourceBuilder } from './tile-source.builder';\n\nexport class ManifestBuilder {\n  constructor(private data: any) {}\n\n  build(): Manifest {\n    const sequences: Sequence[] = new SequenceBuilder(\n      this.data.sequences\n    ).build();\n\n    return new Manifest({\n      context: BuilderUtils.extractContext(this.data),\n      type: BuilderUtils.extracType(this.data),\n      id: BuilderUtils.extractId(this.data),\n      viewingDirection: BuilderUtils.extractViewingDirection(this.data),\n      label: this.data.label,\n      metadata: new MetadataBuilder(this.data.metadata).build(),\n      license: this.data.license,\n      logo: this.data.logo,\n      attribution: this.data.attribution,\n      service: new ServiceBuilder(this.data.service).build(),\n      sequences: sequences,\n      structures: new StructureBuilder(this.data.structures, sequences).build(),\n      tileSource: new TileSourceBuilder(this.data.sequences).build(),\n      viewingHint: this.data.viewingHint,\n    });\n  }\n}\n","import { Canvas } from '../../../models/manifest';\nimport { ViewingDirection } from '../../../models/viewing-direction';\n\nexport class BuilderUtils {\n  static extractId(value: any): any {\n    return value['id'];\n  }\n\n  static extracType(value: any): any {\n    return value['type'];\n  }\n\n  static extractContext(value: any): any {\n    return value['@context'];\n  }\n\n  static extractViewingDirection(value: any): ViewingDirection {\n    if (value['viewingDirection'] === 'right-to-left') {\n      return ViewingDirection.RTL;\n    } else {\n      return ViewingDirection.LTR;\n    }\n  }\n\n  static extractViewingHint(value: any): string | undefined {\n    if (Array.isArray(value)) {\n      return value[0];\n    }\n    return undefined;\n  }\n\n  static findCanvasIndex(canvases: any[], sequences: any[]): number {\n    let index = -1;\n    if (canvases[0]) {\n      index = sequences[0].canvases.findIndex(\n        (canvas: Canvas) => canvas.id === canvases[0].id\n      );\n    }\n    return index;\n  }\n\n  static extractLogo(provider: any[] | undefined): string | undefined {\n    let logo;\n    if (Array.isArray(provider)) {\n      logo = this.extractId(provider[0].logo[0]);\n    }\n    return logo;\n  }\n\n  static extractLanguageValue(\n    data: Record<string, string[]>,\n    preferredLanguage?: string\n  ): string {\n    if (!data) {\n      return '';\n    }\n    const key =\n      preferredLanguage && data[preferredLanguage]\n        ? preferredLanguage\n        : this.extractDefaultLanguage(data);\n    return data[key][0];\n  }\n\n  static extractDefaultLanguage(data: Record<string, string[]>): string {\n    return Object.keys(data)[0];\n  }\n}\n","import { Metadata } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\n\nexport class MetadataBuilder {\n  constructor(private metadatas: any) {}\n\n  build(): Metadata[] {\n    const metadatas: Metadata[] = [];\n    if (this.metadatas) {\n      for (let i = 0; i < this.metadatas.length; i++) {\n        const data = this.metadatas[i];\n        metadatas.push(\n          new Metadata(\n            BuilderUtils.extractLanguageValue(data.label),\n            BuilderUtils.extractLanguageValue(data.value)\n          )\n        );\n      }\n    }\n    return metadatas;\n  }\n}\n","import { Size } from '../../../models/manifest';\n\nexport class SizesBuilder {\n  constructor(private sizes: any[]) {}\n\n  build(): Size[] {\n    const sizes: Size[] = [];\n    if (this.sizes) {\n      for (let i = 0; i < this.sizes.length; i++) {\n        const size = this.sizes[i];\n        sizes.push(new Size(size.width, size.height));\n      }\n    }\n    return sizes;\n  }\n}\n","import { Tile } from '../../../models/manifest';\n\nexport class TilesBuilder {\n  constructor(private tiles: any[]) {}\n\n  build(): Tile[] {\n    const tiles: Tile[] = [];\n    if (this.tiles) {\n      for (let i = 0; i < this.tiles.length; i++) {\n        const tile = this.tiles[i];\n        tiles.push(\n          new Tile({\n            width: tile.width,\n            scaleFactors: tile.scaleFactors,\n          })\n        );\n      }\n    }\n    return tiles;\n  }\n}\n","import { Service } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { SizesBuilder } from './sizes.builder';\nimport { TilesBuilder } from './tiles.builder';\n\nexport class ServiceBuilder {\n  constructor(private service: any) {}\n\n  build(): Service | undefined {\n    if (!Array.isArray(this.service) || this.service.length < 1) {\n      return undefined;\n    } else {\n      const service = this.service[0];\n      return new Service({\n        id: BuilderUtils.extractId(service),\n        context: BuilderUtils.extractContext(service),\n        protocol: service.protocol,\n        width: service.width,\n        height: service.height,\n        sizes: new SizesBuilder(service.sizes).build(),\n        tiles: new TilesBuilder(service.tiles).build(),\n        profile: service.profile,\n        physicalScale: service.physicalScale,\n        physicalUnits: service.physicalUnits,\n        service: new ServiceBuilder(service.service).build(),\n      });\n    }\n  }\n}\n","import { Resource } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ServiceBuilder } from './service.builder';\n\nexport class ResourceBuilder {\n  constructor(private resource: any) {}\n\n  build(): Resource {\n    if (!this.resource) {\n      throw new Error('No resource');\n    }\n    return new Resource({\n      id: BuilderUtils.extractId(this.resource),\n      type: BuilderUtils.extracType(this.resource),\n      format: this.resource.format,\n      service: new ServiceBuilder(this.resource.service).build(),\n      height: this.resource.height,\n      width: this.resource.width,\n    });\n  }\n}\n","import { Images } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ResourceBuilder } from './resource.builder';\n\nexport class ImagesBuilder {\n  constructor(private images: any[]) {}\n\n  build(): Images[] {\n    const images: Images[] = [];\n\n    if (this.images) {\n      this.images.forEach((i) => {\n        if (i.items) {\n          i.items.forEach((image: any) => {\n            images.push(\n              new Images({\n                id: BuilderUtils.extractId(image),\n                type: BuilderUtils.extracType(image),\n                resource: new ResourceBuilder(image.body).build(),\n                motivation: image.motivation,\n                on: image.target,\n              })\n            );\n          });\n        }\n      });\n    }\n    return images;\n  }\n}\n","import { Canvas } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { ImagesBuilder } from './images.builder';\n\nexport class CanvasBuilder {\n  constructor(private canvases: any[]) {}\n\n  build(): Canvas[] {\n    const canvases: Canvas[] = [];\n    if (this.canvases) {\n      for (let i = 0; i < this.canvases.length; i++) {\n        const canvas = this.canvases[i];\n        let seeAlso: any[] = [];\n\n        if (canvas.seeAlso) {\n          seeAlso = seeAlso.concat(canvas.seeAlso);\n        }\n\n        canvases.push(\n          new Canvas({\n            id: BuilderUtils.extractId(canvas),\n            type: BuilderUtils.extracType(canvas),\n            label: canvas.label,\n            height: canvas.height,\n            width: canvas.width,\n            images: new ImagesBuilder(canvas.items).build(),\n            altoUrl: this.extractAltoUrl(seeAlso),\n          })\n        );\n      }\n    }\n    return canvases;\n  }\n\n  private extractAltoUrl(seeAlso: any[]): string | undefined {\n    if (!seeAlso) {\n      return undefined;\n    }\n\n    const altoService = seeAlso.find(\n      (s) => s?.format === 'application/alto+xml'\n    );\n    return altoService ? BuilderUtils.extractId(altoService) : undefined;\n  }\n}\n","import { Sequence } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { CanvasBuilder } from './canvas.builder';\n\nexport class SequenceBuilder {\n  constructor(private data: any) {}\n\n  build(): Sequence[] {\n    const sequences: Sequence[] = [];\n    if (this.data) {\n      sequences.push(\n        new Sequence({\n          id: BuilderUtils.extractId(this.data),\n          type: 'Sequence',\n          label: 'Current Page Order',\n          viewingHint: BuilderUtils.extractViewingHint(this.data.behavior),\n          canvases: new CanvasBuilder(this.data.items).build(),\n        })\n      );\n    }\n\n    return sequences;\n  }\n}\n","import { Sequence, Structure } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\n\nexport class StructureBuilder {\n  constructor(private structures: any[], private sequences: Sequence[]) {}\n\n  build(): Structure[] {\n    const structures: Structure[] = [];\n    if (this.structures) {\n      for (let i = 0; i < this.structures.length; i++) {\n        const structure = this.structures[i];\n        structures.push(\n          new Structure({\n            id: BuilderUtils.extractId(structure),\n            type: BuilderUtils.extracType(structure),\n            label: BuilderUtils.extractLanguageValue(structure.label),\n            canvases: structure.items,\n            canvasIndex: BuilderUtils.findCanvasIndex(\n              structure.items,\n              this.sequences\n            ),\n          })\n        );\n      }\n    }\n    return structures;\n  }\n}\n","import { Resource } from '../../../models/manifest';\n\nexport class TileSourceBuilder {\n  constructor(private items: any[]) {}\n\n  build(): Resource[] {\n    const tilesources: Resource[] = [];\n    if (this.items && this.items.length > 0) {\n      this.items.forEach((canvas) => {\n        if (canvas.type === 'Canvas') {\n          canvas.items.forEach((annotationPage: any) => {\n            if (annotationPage.type === 'AnnotationPage') {\n              annotationPage.items.forEach((annotation: any) => {\n                if (annotation.type === 'Annotation') {\n                  let body = annotation.body;\n                  if (body) {\n                    body.service = this.flattenService(body.service);\n                    tilesources.push(body);\n                  }\n                }\n              });\n            }\n          });\n        }\n      });\n    }\n    return tilesources;\n  }\n\n  private flattenService(service: any): any {\n    if (Array.isArray(service) && service.length === 1) {\n      return {\n        ...service[0],\n        service: this.flattenService(service[0].service),\n      };\n    }\n    return service;\n  }\n}\n","import { Manifest, Sequence } from '../../../models/manifest';\nimport { BuilderUtils } from './builder-utils';\nimport { MetadataBuilder } from './metadata.builder';\nimport { SequenceBuilder } from './sequence.builder';\nimport { ServiceBuilder } from './service.builder';\nimport { StructureBuilder } from './structure.builder';\nimport { TileSourceBuilder } from './tile-source.builder';\n\nexport class ManifestBuilder {\n  constructor(private data: any) {}\n\n  build(): Manifest {\n    const sequences: Sequence[] = new SequenceBuilder(this.data).build();\n\n    const manifest = new Manifest({\n      context: BuilderUtils.extractContext(this.data),\n      type: BuilderUtils.extracType(this.data),\n      id: BuilderUtils.extractId(this.data),\n      viewingDirection: BuilderUtils.extractViewingDirection(this.data),\n      label: BuilderUtils.extractLanguageValue(this.data.label),\n      metadata: new MetadataBuilder(this.data.metadata).build(),\n      license: this.data.rights,\n      logo: BuilderUtils.extractLogo(this.data.provider),\n      attribution: BuilderUtils.extractLanguageValue(\n        this.data.requiredStatement?.value\n      ),\n      service: new ServiceBuilder(this.data.service).build(),\n      sequences: sequences,\n      structures: new StructureBuilder(this.data.structures, sequences).build(),\n      tileSource: new TileSourceBuilder(this.data.items).build(),\n      viewingHint: BuilderUtils.extractViewingHint(this.data.behavior),\n    });\n\n    return manifest;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subject } from 'rxjs';\n\nexport interface SpinnerState {\n  show: boolean;\n}\n\n@Injectable()\nexport class SpinnerService {\n  private spinnerSubject = new Subject<SpinnerState>();\n  public spinnerState = this.spinnerSubject.asObservable();\n\n  constructor() {}\n\n  show() {\n    this.spinnerSubject.next(<SpinnerState>{ show: true });\n  }\n\n  hide() {\n    this.spinnerSubject.next(<SpinnerState>{ show: false });\n  }\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { distinctUntilChanged, finalize, take } from 'rxjs/operators';\nimport { ManifestBuilder as IiifV2ManifestBuilder } from '../builders/iiif/v2/manifest.builder';\nimport { ManifestBuilder as IiifV3ManifestBuilder } from '../builders/iiif/v3/manifest.builder';\nimport { MimeViewerIntl } from '../intl';\nimport { Manifest } from '../models/manifest';\nimport { SpinnerService } from '../spinner-service/spinner.service';\n\n@Injectable()\nexport class IiifManifestService {\n  protected _currentManifest = new BehaviorSubject<Manifest | null>(null);\n  protected _errorMessage = new BehaviorSubject<string | null>(null);\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private http: HttpClient,\n    private spinnerService: SpinnerService\n  ) {}\n\n  get currentManifest(): Observable<Manifest | null> {\n    return this._currentManifest.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get errorMessage(): Observable<string | null> {\n    return this._errorMessage.asObservable();\n  }\n\n  load(manifestUri: string | null): Observable<boolean> {\n    return new Observable((observer) => {\n      if (!manifestUri || manifestUri.length === 0) {\n        this._errorMessage.next(this.intl.manifestUriMissingLabel);\n        observer.next(false);\n      } else {\n        this.spinnerService.show();\n        this.http\n          .get<Response>(manifestUri)\n          .pipe(\n            finalize(() => this.spinnerService.hide()),\n            take(1)\n          )\n          .subscribe(\n            (response: Response) => {\n              const manifest = this.extractData(response);\n              if (this.isManifestValid(manifest)) {\n                this._currentManifest.next(manifest);\n                observer.next(true);\n              } else {\n                this._errorMessage.next(this.intl.manifestNotValidLabel);\n                observer.next(false);\n              }\n            },\n            (err: HttpErrorResponse) => {\n              this._errorMessage.next(this.handleError(err));\n              observer.next(false);\n            }\n          );\n      }\n    });\n  }\n\n  destroy() {\n    this.resetCurrentManifest();\n    this.resetErrorMessage();\n  }\n\n  private resetCurrentManifest() {\n    this._currentManifest.next(null);\n  }\n\n  private resetErrorMessage() {\n    this._errorMessage.next(null);\n  }\n\n  private extractData(response: any) {\n    if (response.type === 'Manifest') {\n      return new IiifV3ManifestBuilder(response).build();\n    } else {\n      return new IiifV2ManifestBuilder(response).build();\n    }\n  }\n\n  private isManifestValid(manifest: Manifest): boolean {\n    return (\n      manifest &&\n      manifest.tileSource !== undefined &&\n      manifest.tileSource.length > 0\n    );\n  }\n\n  private handleError(err: HttpErrorResponse): string {\n    let errMsg: string;\n    if (err.error instanceof Object) {\n      errMsg = err.message;\n    } else {\n      errMsg = err.error;\n    }\n    return errMsg;\n  }\n}\n","import { Alto, String, TextLine } from './alto.model';\n\nexport class HtmlFormatter {\n  altoToHtml(alto: Alto): string {\n    const page = alto.layout.page;\n    let html = '';\n    let textBlocks: any[] = [];\n\n    if (page.topMargin.textBlocks) {\n      textBlocks = [...textBlocks, ...page.topMargin.textBlocks];\n    }\n    if (page.leftMargin.textBlocks) {\n      textBlocks = [...textBlocks, ...page.leftMargin.textBlocks];\n    }\n    if (page.printSpace.textBlocks) {\n      textBlocks = [...textBlocks, ...page.printSpace.textBlocks];\n    }\n    if (page.bottomMargin.textBlocks) {\n      textBlocks = [...textBlocks, ...page.bottomMargin.textBlocks];\n    }\n\n    textBlocks.forEach((textBlock) => {\n      let words: string[] = [];\n      textBlock.textLines.forEach((textLine: TextLine) => {\n        textLine.strings.forEach((string: String) => {\n          words.push(string.content);\n        });\n      });\n      const styles: string[] = [];\n      if (textBlock?.textStyle?.fontStyle === 'bold') {\n        styles.push('font-weight: bold');\n      }\n\n      html += '<p';\n      if (styles && styles.length > 0) {\n        html += ` style=\"${styles.join(';')}\"`;\n      }\n      html += `>${words.join(' ')}<p/>`;\n    });\n\n    return html;\n  }\n}\n","import { HttpClient, HttpHeaders } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { DomSanitizer, SafeHtml } from '@angular/platform-browser';\nimport {\n  BehaviorSubject,\n  forkJoin,\n  Observable,\n  of,\n  Subject,\n  Subscriber,\n  Subscription,\n} from 'rxjs';\nimport { catchError, debounceTime, finalize, take } from 'rxjs/operators';\nimport { parseString } from 'xml2js';\nimport { AltoBuilder } from '../builders/alto';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { HighlightService } from '../highlight-service/highlight.service';\nimport { IiifManifestService } from '../iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../intl';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { RecognizedTextMode, RecognizedTextModeChanges } from '../models';\nimport { Manifest } from '../models/manifest';\nimport { Hit } from './../../core/models/hit';\nimport { Alto } from './alto.model';\nimport { HtmlFormatter } from './html.formatter';\n\n@Injectable()\nexport class AltoService {\n  private config!: MimeViewerConfig;\n  private altos: string[] = [];\n  private isLoading = new BehaviorSubject(false);\n  private textContentReady = new Subject<void>();\n  private textError = new Subject<string | undefined>();\n  private manifest: Manifest | null = null;\n  private subscriptions = new Subscription();\n  private altoBuilder = new AltoBuilder();\n  private htmlFormatter!: HtmlFormatter;\n  private hits: Hit[] | undefined;\n  private _recognizedTextContentModeChanges =\n    new BehaviorSubject<RecognizedTextModeChanges>({\n      previousValue: RecognizedTextMode.NONE,\n      currentValue: RecognizedTextMode.NONE,\n    });\n  private previousRecognizedTextMode = RecognizedTextMode.NONE;\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private http: HttpClient,\n    private iiifManifestService: IiifManifestService,\n    private highlightService: HighlightService,\n    private canvasService: CanvasService,\n    private sanitizer: DomSanitizer\n  ) {}\n\n  get onRecognizedTextContentModeChange$(): Observable<RecognizedTextModeChanges> {\n    return this._recognizedTextContentModeChanges.asObservable();\n  }\n\n  get onTextContentReady$(): Observable<void> {\n    return this.textContentReady.asObservable();\n  }\n\n  get isLoading$(): Observable<boolean> {\n    return this.isLoading.asObservable();\n  }\n\n  get hasErrors$(): Observable<string | undefined> {\n    return this.textError.asObservable();\n  }\n\n  get recognizedTextContentMode(): RecognizedTextMode {\n    return this._recognizedTextContentModeChanges.value.currentValue;\n  }\n\n  set recognizedTextContentMode(value: RecognizedTextMode) {\n    this._recognizedTextContentModeChanges.next({\n      currentValue: value,\n      previousValue: this.previousRecognizedTextMode,\n    });\n    this.previousRecognizedTextMode = value;\n  }\n\n  initialize(hits?: Hit[]) {\n    this.hits = hits;\n    this.htmlFormatter = new HtmlFormatter();\n    this.subscriptions = new Subscription();\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.clearCache();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange\n        .pipe(debounceTime(200))\n        .subscribe((currentCanvasGroupIndex: number) => {\n          this.textError.next(undefined);\n          const sources: Observable<void>[] = [];\n\n          const canvasGroup = this.canvasService.getCanvasesPerCanvasGroup(\n            currentCanvasGroupIndex\n          );\n\n          if (!canvasGroup || canvasGroup.length === 0) {\n            return;\n          }\n          this.addAltoSource(canvasGroup[0], sources);\n          if (canvasGroup.length === 2) {\n            this.addAltoSource(canvasGroup[1], sources);\n          }\n          this.isLoading.next(true);\n          forkJoin(sources)\n            .pipe(\n              take(1),\n              finalize(() => this.isLoading.next(false))\n            )\n            .subscribe();\n        })\n    );\n  }\n\n  destroy() {\n    this.recognizedTextContentMode = this.config?.initRecognizedTextContentMode\n      ? this.config?.initRecognizedTextContentMode\n      : RecognizedTextMode.NONE;\n\n    this.subscriptions.unsubscribe();\n    this.clearCache();\n  }\n\n  setConfig(config: MimeViewerConfig) {\n    this.config = config;\n  }\n\n  showRecognizedTextContentOnly() {\n    this.recognizedTextContentMode = RecognizedTextMode.ONLY;\n  }\n\n  showRecognizedTextContentInSplitView() {\n    this.recognizedTextContentMode = RecognizedTextMode.SPLIT;\n  }\n\n  closeRecognizedTextContent() {\n    this.recognizedTextContentMode = RecognizedTextMode.NONE;\n  }\n\n  getHtml(index: number): SafeHtml | undefined {\n    return this.altos && this.altos.length >= index + 1\n      ? this.sanitizer.bypassSecurityTrustHtml(\n          this.highlightService.highlight(this.altos[index], index, this.hits)\n        )\n      : undefined;\n  }\n\n  clearCache() {\n    this.altos = [];\n  }\n\n  private addAltoSource(index: number, sources: Observable<void>[]) {\n    if (this.manifest && this.manifest.sequences) {\n      const seq = this.manifest.sequences[0];\n      if (seq.canvases) {\n        const canvas = seq.canvases[index];\n        if (canvas && canvas.altoUrl) {\n          sources.push(this.add(index, canvas.altoUrl));\n        }\n      }\n    }\n  }\n\n  private add(index: number, url: string): Observable<void> {\n    return new Observable((observer) => {\n      if (this.isInCache(index)) {\n        this.done(observer);\n      } else {\n        this.load(observer, index, url);\n      }\n    });\n  }\n\n  private isInCache(index: number) {\n    return this.altos[index];\n  }\n\n  private load(observer: Subscriber<void>, index: number, url: string) {\n    this.http\n      .get(url, {\n        headers: new HttpHeaders().set('Content-Type', 'text/xml'),\n        responseType: 'text',\n      })\n      .pipe(\n        take(1),\n        catchError((err) => of({ isError: true, error: err }))\n      )\n      .subscribe((data: Alto | any) => {\n        try {\n          if (!data.isError) {\n            parseString(\n              data,\n              { explicitChildren: true, preserveChildrenOrder: true },\n              (error, result) => {\n                const alto = this.altoBuilder.withAltoXml(result.alto).build();\n                this.addToCache(index, alto);\n                this.done(observer);\n              }\n            );\n          } else {\n            throw data.err;\n          }\n        } catch {\n          this.error(observer);\n        }\n      });\n  }\n\n  private addToCache(index: number, alto: Alto) {\n    this.altos[index] = this.htmlFormatter.altoToHtml(alto);\n  }\n\n  private done(observer: Subscriber<void>) {\n    this.textContentReady.next();\n    this.complete(observer);\n  }\n\n  private error(observer: Subscriber<void>) {\n    this.textError.next(this.intl.textContentErrorLabel);\n    this.complete(observer);\n  }\n\n  private complete(observer: Subscriber<void>) {\n    observer.next();\n    observer.complete();\n  }\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class ClickService {\n  private singleClickHandlers: Array<(event: any) => void> = [];\n  private doubleClickHandlers: Array<(event: any) => void> = [];\n  private clickCount = 0;\n  private dblClickTimeOut: any;\n\n  constructor() {}\n\n  reset(): void {\n    this.singleClickHandlers = [];\n    this.doubleClickHandlers = [];\n  }\n\n  addSingleClickHandler(singleClickHandler: (event: any) => void) {\n    this.singleClickHandlers.push(singleClickHandler);\n  }\n\n  addDoubleClickHandler(doubleClickHandler: (event: any) => void) {\n    this.doubleClickHandlers.push(doubleClickHandler);\n  }\n\n  private triggerSingleClick(event: any) {\n    this.singleClickHandlers.forEach((handler: any) => {\n      handler(event);\n    });\n  }\n\n  private triggerDoubleClick(event: any) {\n    this.doubleClickHandlers.forEach((handler: any) => {\n      handler(event);\n    });\n  }\n\n  click = (event: any) => {\n    event.preventDefaultAction = true;\n    if (event.quick) {\n      this.clickCount++;\n      if (this.clickCount === 1) {\n        this.dblClickTimeOut = setTimeout(() => {\n          this.clickCount = 0;\n          this.triggerSingleClick(event);\n        }, event.tracker.dblClickTimeThreshold);\n      } else if (this.clickCount === 2) {\n        clearTimeout(this.dblClickTimeOut);\n        this.clickCount = 0;\n        this.triggerDoubleClick(event);\n      }\n    }\n  };\n}\n","declare const OpenSeadragon: any;\n\n// OpenSeadragon SVG Overlay plugin 0.0.4\n\nexport function createSvgOverlay() {\n  if (!OpenSeadragon) {\n    console.error('[openseadragon-svg-overlay] requires OpenSeadragon');\n    return;\n  }\n\n  const svgNS = 'http://www.w3.org/2000/svg';\n\n  // ----------\n  class Overlay {\n    // ----------\n\n    _viewer: any;\n    _containerWidth: any;\n    _containerHeight: any;\n    _svg: any;\n    _node: any;\n\n    constructor(viewer: any) {\n      const self = this;\n\n      this._viewer = viewer;\n      this._containerWidth = 0;\n      this._containerHeight = 0;\n\n      this._svg = document.createElementNS(svgNS, 'svg');\n      this._svg.style.position = 'absolute';\n      this._svg.style.left = 0;\n      this._svg.style.top = 0;\n      this._svg.style.width = '100%';\n      this._svg.style.height = '100%';\n      this._viewer.canvas.appendChild(this._svg);\n\n      this._node = document.createElementNS(svgNS, 'g');\n      this._svg.appendChild(this._node);\n\n      this._viewer.addHandler('animation', function () {\n        self.resize();\n      });\n\n      this._viewer.addHandler('open', function () {\n        self.resize();\n      });\n\n      this._viewer.addHandler('rotate', function (evt: any) {\n        self.resize();\n      });\n\n      this._viewer.addHandler('resize', function () {\n        self.resize();\n      });\n\n      this.resize();\n    }\n    node() {\n      return this._node;\n    }\n\n    // ----------\n    resize() {\n      if (this._containerWidth !== this._viewer.container.clientWidth) {\n        this._containerWidth = this._viewer.container.clientWidth;\n        this._svg.setAttribute('width', this._containerWidth);\n      }\n\n      if (this._containerHeight !== this._viewer.container.clientHeight) {\n        this._containerHeight = this._viewer.container.clientHeight;\n        this._svg.setAttribute('height', this._containerHeight);\n      }\n\n      const p = this._viewer.viewport.pixelFromPoint(\n        new OpenSeadragon.Point(0, 0),\n        true\n      );\n      const zoom = this._viewer.viewport.getZoom(true);\n      const rotation = this._viewer.viewport.getRotation();\n      // TODO: Expose an accessor for _containerInnerSize in the OSD API so we don't have to use the private variable.\n      const scale = this._viewer.viewport._containerInnerSize.x * zoom;\n      this._node.setAttribute(\n        'transform',\n        'translate(' +\n          p.x +\n          ',' +\n          p.y +\n          ') scale(' +\n          scale +\n          ') rotate(' +\n          rotation +\n          ')'\n      );\n    }\n\n    // ----------\n    onClick(node: any, handler: any) {\n      // TODO: Fast click for mobile browsers\n\n      new OpenSeadragon.MouseTracker({\n        element: node,\n        clickHandler: handler,\n      }).setTracking(true);\n    }\n  }\n\n  // ----------\n\n  // ----------\n  OpenSeadragon.Viewer.prototype.svgOverlay = function () {\n    if (this._svgOverlayInfo) {\n      return this._svgOverlayInfo;\n    }\n\n    this._svgOverlayInfo = new Overlay(this);\n    return this._svgOverlayInfo;\n  };\n}\n","import { Rect } from './rect';\n\nexport class HighlightRect extends Rect {\n  public canvasIndex = 0;\n\n  constructor(fields?: {\n    x?: number;\n    y?: number;\n    width?: number;\n    height?: number;\n    canvasIndex?: number;\n  }) {\n    super();\n    if (fields) {\n      this.x = fields.x || this.x;\n      this.y = fields.y || this.y;\n      this.width = fields.width || this.width;\n      this.height = fields.height || this.height;\n      this.centerX = this.x + this.width / 2;\n      this.centerY = this.y + this.height / 2;\n      this.canvasIndex = fields.canvasIndex || this.canvasIndex;\n    }\n  }\n}\n","import { HighlightRect } from './highlight-rect';\n\nexport class Hit {\n  public id = 0;\n  public index = 0;\n  public label = '';\n  public match = '';\n  public before = '';\n  public after = '';\n  public highlightRects: HighlightRect[] = [];\n\n  constructor(fields?: {\n    id?: number;\n    index?: number;\n    label?: string;\n    match?: string;\n    before?: string;\n    after?: string;\n    highlightRects?: HighlightRect[];\n  }) {\n    if (fields) {\n      this.id = fields.id || this.id;\n      this.index = fields.index || this.index;\n      this.label = fields.label || this.label;\n      this.match = fields.match || this.match;\n      this.before = fields.before || this.before;\n      this.after = fields.after || this.after;\n      this.highlightRects = fields.highlightRects || this.highlightRects;\n    }\n  }\n}\n","import { Hit } from './hit';\n\nexport class SearchResult {\n  public q = '';\n  public hits: Hit[] = [];\n\n  constructor(fields?: { q?: string; hits?: Hit[] }) {\n    if (fields) {\n      this.q = fields.q || this.q;\n      this.hits = fields.hits || this.hits;\n    }\n  }\n\n  public add(hit: Hit): void {\n    this.hits.push(hit);\n  }\n\n  public get(index: number): Hit {\n    return new Hit({\n      ...this.hits[index],\n    });\n  }\n\n  public size(): number {\n    return this.hits.length;\n  }\n\n  public last(): Hit {\n    return this.get(this.size() - 1);\n  }\n}\n","import { MimeViewerConfig } from '../../mime-viewer-config';\nimport { HighlightRect } from '../../models/highlight-rect';\nimport { Utils } from '../../utils';\nimport { Hit } from './../../models/hit';\nimport {\n  Hit as IiifHit,\n  IiifSearchResult,\n  Resource as IiifResource,\n} from './../../models/iiif-search-result';\nimport { Canvas, Manifest, Sequence } from './../../models/manifest';\nimport { SearchResult } from './../../models/search-result';\n\nexport class SearchResultBuilder {\n  constructor(\n    private q: string,\n    private manifest: Manifest,\n    private iiifSearchResult: IiifSearchResult,\n    private config: MimeViewerConfig\n  ) {}\n\n  public build(): SearchResult {\n    const searchResult = new SearchResult();\n    searchResult.q = this.q;\n    if (this.iiifSearchResult && this.iiifSearchResult.hits) {\n      this.iiifSearchResult.hits.forEach((hit: IiifHit, index: number) => {\n        const id: number = index;\n        let startCanvasIndex = -1;\n        let label;\n        const highlightRects: HighlightRect[] = [];\n        if (this.manifest.sequences && this.manifest.sequences[0].canvases) {\n          const resources = this.findResources(hit);\n          resources.forEach((resource, index) => {\n            if (index === 0) {\n              startCanvasIndex = this.findSequenceIndex(resource);\n              label = this.findLabel(startCanvasIndex);\n            }\n            const canvasIndex = this.findSequenceIndex(resource);\n            const on = resource.on;\n            if (on) {\n              const scale = this.getScale(canvasIndex);\n              const coords = on.substring(on.indexOf('=') + 1).split(',');\n              const rect = new HighlightRect({\n                x: this.scaleValue(coords[0], scale),\n                y: this.scaleValue(coords[1], scale),\n                width: this.scaleValue(coords[2], scale),\n                height: this.scaleValue(coords[3], scale),\n                canvasIndex\n              });\n              highlightRects.push(rect);\n            }\n          });\n        }\n\n        searchResult.add(\n          new Hit({\n            id: id,\n            index: startCanvasIndex,\n            label: label,\n            match: hit.match,\n            before: hit.before,\n            after: hit.after,\n            highlightRects,\n          })\n        );\n      });\n    }\n    return searchResult;\n  }\n\n  private findResources(hit: IiifHit): IiifResource[] {\n    const resources: IiifResource[] = [];\n    if (hit.annotations) {\n      for (const annotation of hit.annotations) {\n        if (this.iiifSearchResult.resources) {\n          const res = this.iiifSearchResult.resources.find(\n            (r: IiifResource) => r['@id'] === annotation\n          );\n          if (res) {\n            resources.push(res);\n          }\n        }\n      }\n    }\n    return resources;\n  }\n\n  private findSequenceIndex(resource: IiifResource): number {\n    if (!this.manifest.sequences) {\n      throw new Error('No sequences found!');\n    }\n    const firstSequence = this.getFirstSequence();\n    const on = resource.on;\n    if (on && firstSequence && firstSequence.canvases) {\n      const id = on.substring(0, on.indexOf('#'));\n      return firstSequence.canvases.findIndex((c) => c.id === id);\n    }\n    return -1;\n  }\n\n  private findLabel(index: number): string | undefined {\n    if (index === -1) {\n      return undefined;\n    } else {\n      const canvas = this.getFirstSequenceCanvas(index);\n      return canvas ? canvas.label : undefined;\n    }\n  }\n\n  private getFirstSequence(): Sequence | undefined {\n    const sequences = this.manifest.sequences;\n    return sequences ? sequences[0] : undefined;\n  }\n\n  private getFirstSequenceCanvas(index: number): Canvas | undefined {\n    const firstSequence = this.getFirstSequence();\n    return firstSequence && firstSequence.canvases !== undefined\n      ? firstSequence.canvases[index]\n      : undefined;\n  }\n\n  private getScale(index: number): number {\n    const physicalScale = this.getPhysicalScale(index);\n    return Utils.getScaleFactor(\n      physicalScale,\n      this.config?.ignorePhysicalScale\n    );\n  }\n\n  private getPhysicalScale(index: number): number | undefined {\n    const canvas = this.getFirstSequenceCanvas(index);\n    return canvas?.images?.[0].resource?.service?.service?.physicalScale;\n  }\n\n  private scaleValue(value: string, scale: number): number {\n    return Math.trunc(parseInt(value, 10) * scale);\n  }\n}\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { BehaviorSubject, Observable, of, Subject, throwError } from 'rxjs';\nimport {\n  distinctUntilChanged,\n  finalize,\n  map,\n  switchMap,\n  take,\n} from 'rxjs/operators';\nimport { SearchResultBuilder } from '../builders/iiif/search-result.builder';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { Hit } from './../models/hit';\nimport { IiifSearchResult } from './../models/iiif-search-result';\nimport { Manifest } from './../models/manifest';\nimport { SearchResult } from './../models/search-result';\n\n@Injectable()\nexport class IiifContentSearchService {\n  protected _currentSearchResult: Subject<SearchResult> =\n    new BehaviorSubject<SearchResult>(new SearchResult({}));\n  protected _searching = new BehaviorSubject<boolean>(false);\n  protected _currentQ = new BehaviorSubject<string>('');\n  protected _selected = new BehaviorSubject<Hit | null>(null);\n\n  private config!: MimeViewerConfig;\n  constructor(private http: HttpClient) {}\n\n  destroy() {\n    this._currentSearchResult.next(new SearchResult({}));\n    this._searching.next(false);\n    this._currentQ.next('');\n    this._selected.next(null);\n  }\n\n  get onQChange(): Observable<string> {\n    return this._currentQ.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onChange(): Observable<SearchResult> {\n    return this._currentSearchResult.asObservable();\n  }\n\n  get isSearching(): Observable<boolean> {\n    return this._searching.asObservable();\n  }\n\n  get onSelected(): Observable<Hit | null> {\n    return this._selected.asObservable();\n  }\n\n  public search(manifest: Manifest, q: string): void {\n    this._currentQ.next(q);\n    this._selected.next(null);\n\n    if (q.length === 0) {\n      this._currentSearchResult.next(new SearchResult());\n      return;\n    }\n    if (!manifest.service || manifest.service === null) {\n      return;\n    }\n    this._searching.next(true);\n    this.http\n      .get(`${manifest.service.id}?q=${q}`)\n      .pipe(\n        finalize(() => this._searching.next(false)),\n        take(1),\n        switchMap((res: IiifSearchResult) => {\n          return of(this.extractData(q, manifest, res));\n        })\n      )\n      .subscribe(\n        (res: SearchResult) => this._currentSearchResult.next(res),\n        (err: HttpErrorResponse) => this.handleError\n      );\n  }\n\n  public selected(hit: Hit) {\n    this._selected.next(hit);\n  }\n\n  public setConfig(config: MimeViewerConfig) {\n    this.config = config;\n  }\n\n  private extractData(\n    q: string,\n    manifest: Manifest,\n    iiifSearchResult: IiifSearchResult\n  ): SearchResult {\n    return new SearchResultBuilder(\n      q,\n      manifest,\n      iiifSearchResult,\n      this.config\n    ).build();\n  }\n\n  private handleError(err: HttpErrorResponse | any) {\n    let errMsg: string;\n    if (err.error instanceof Error) {\n      errMsg = err.error.message;\n    } else {\n      errMsg = err.error;\n    }\n    return throwError(errMsg);\n  }\n}\n","import { Manifest, Sequence } from '../models/manifest';\n\nexport class ManifestUtils {\n  static isManifestPaged(manifest: Manifest): boolean {\n    return (\n      ManifestUtils.isManifestViewingHintPaged(manifest) ||\n      ManifestUtils.isSequenceViewingHintPaged(manifest)\n    );\n  }\n\n  static isManifestViewingHintPaged(manifest: Manifest): boolean {\n    return manifest && manifest.viewingHint === 'paged';\n  }\n\n  static isSequenceViewingHintPaged(manifest: Manifest): boolean {\n    let firstSequence: Sequence | null = null;\n    if (manifest && manifest.sequences && manifest.sequences.length > 0) {\n      firstSequence = manifest.sequences[0];\n    }\n    return firstSequence ? firstSequence.viewingHint === 'paged' : false;\n  }\n\n  static hasRecognizedTextContent(manifest: Manifest): boolean {\n    if (manifest.sequences && manifest.sequences.length > 0) {\n      const firstSequence = manifest.sequences[0];\n      if (firstSequence.canvases && firstSequence.canvases.length > 0) {\n        return firstSequence.canvases.find((c: any) => c.altoUrl) !== undefined;\n      }\n    }\n    return false;\n  }\n}\n","export class PinchStatus {\n  public active = false;\n  public previousGestureId = 0;\n  public shouldStop = false;\n}\n","export enum Side {\n  LEFT,\n  RIGHT,\n  TOP,\n  BOTTOM,\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { interval, ReplaySubject, Observable, Subscription } from 'rxjs';\nimport { switchMap, tap, distinctUntilChanged, filter } from 'rxjs/operators';\n\n@Injectable()\nexport class StyleService {\n  private currentRgbColor: string | undefined;\n  private colorSubject: ReplaySubject<string | undefined> = new ReplaySubject();\n  private subscriptions!: Subscription;\n\n  constructor(private zone: NgZone) {}\n\n  get onChange(): Observable<string | undefined> {\n    return this.colorSubject.asObservable().pipe(\n      filter((color: string | undefined) => color !== null),\n      distinctUntilChanged()\n    );\n  }\n\n  initialize() {\n    this.subscriptions = new Subscription();\n    this.zone.runOutsideAngular(() => {\n      this.subscriptions.add(\n        interval(1000)\n          .pipe(\n            tap(() => {\n              const previousRgbColor = this.currentRgbColor;\n              const currentRgbColor = this.getComputedBackgroundColor(1);\n              if (previousRgbColor !== currentRgbColor) {\n                this.currentRgbColor = currentRgbColor;\n                this.colorSubject.next(currentRgbColor);\n              }\n            })\n          )\n          .subscribe()\n      );\n    });\n  }\n\n  destroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  public convertToRgba(rgbColor: string, opacity: number) {\n    return rgbColor.replace(/rgb/i, 'rgba').replace(/\\)/i, `,${opacity})`);\n  }\n\n  private getComputedBackgroundColor(opacity: number): string | undefined {\n    const matAppBackground =\n      document.getElementsByClassName('mat-app-background');\n    const matSidenavContainer = document.getElementsByTagName(\n      'mat-sidenav-container'\n    );\n\n    if (matAppBackground.length > 0) {\n      return this.getComputedStyle(matAppBackground[0], 'background-color');\n    } else if (matSidenavContainer.length > 0) {\n      return this.getComputedStyle(matSidenavContainer[0], 'background-color');\n    } else {\n      return undefined;\n    }\n  }\n\n  private getComputedStyle(el: any, property: string) {\n    return window.getComputedStyle(el, null).getPropertyValue(property);\n  }\n}\n","export enum Direction {\n  UNDEFINED = 0,\n  LEFT = 1,\n  RIGHT = 2,\n  UP = 3,\n  DOWN = 4,\n  NEXT = 5,\n  PREVIOUS = 6,\n}\n","import { Direction } from '../models/direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria,\n} from './calculate-next-canvas-group-strategy';\n\nexport class NavigatorCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy\n{\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n\n    let nextCanvasGroup = 1;\n    nextCanvasGroup =\n      direction === Direction.NEXT ? nextCanvasGroup : nextCanvasGroup * -1;\n    nextCanvasGroup = currentCanvasGroupIndex + nextCanvasGroup;\n    return nextCanvasGroup;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria,\n} from './calculate-next-canvas-group-strategy';\n\nexport class DashboardModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy\n{\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const speed = criteria.speed;\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n    const currentCanvasGroupCenter = criteria.currentCanvasGroupCenter;\n\n    let nextCanvasGroup: number;\n    let canvasGroupDelta = this.calculateNumberOfCanvasGroupsToGo(speed);\n    if (canvasGroupDelta === 0) {\n      nextCanvasGroup = currentCanvasGroupCenter;\n    } else {\n      canvasGroupDelta =\n        direction === Direction.LEFT ? canvasGroupDelta : canvasGroupDelta * -1;\n      nextCanvasGroup =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? currentCanvasGroupIndex + canvasGroupDelta\n          : currentCanvasGroupIndex - canvasGroupDelta;\n    }\n    return nextCanvasGroup;\n  }\n\n  private calculateNumberOfCanvasGroupsToGo(speed: number | undefined): number {\n    let canvasGroupsToGo = 10;\n    if (speed !== undefined) {\n      if (speed < 500) {\n        canvasGroupsToGo = 0;\n      } else if (speed >= 500 && speed < 1500) {\n        canvasGroupsToGo = 1;\n      } else if (speed >= 1500 && speed < 2500) {\n        canvasGroupsToGo = 3;\n      } else if (speed >= 2500 && speed < 3500) {\n        canvasGroupsToGo = 5;\n      }\n    }\n    return canvasGroupsToGo;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria,\n} from './calculate-next-canvas-group-strategy';\n\nexport class PageModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy\n{\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const isNewCanvasGroupInCenter =\n      criteria.currentCanvasGroupIndex !== criteria.currentCanvasGroupCenter;\n    const speed = criteria.speed;\n    const direction = criteria.direction;\n    let nextCanvasGroup = criteria.currentCanvasGroupIndex;\n    if (speed && speed >= 200) {\n      const diff = direction === Direction.LEFT ? 1 : -1;\n      nextCanvasGroup =\n        criteria.viewingDirection === ViewingDirection.LTR\n          ? criteria.currentCanvasGroupIndex + diff\n          : criteria.currentCanvasGroupIndex - diff;\n    } else if (isNewCanvasGroupInCenter) {\n      nextCanvasGroup = criteria.currentCanvasGroupCenter;\n    }\n    return nextCanvasGroup;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport {\n  CalculateNextCanvasGroupStrategy,\n  NextCanvasGroupCriteria,\n} from './calculate-next-canvas-group-strategy';\n\nexport class PageZoomedModeCalculateNextCanvasGroupStrategy\n  implements CalculateNextCanvasGroupStrategy\n{\n  calculateNextCanvasGroup(criteria: NextCanvasGroupCriteria): number {\n    const direction = criteria.direction;\n    const currentCanvasGroupIndex = criteria.currentCanvasGroupIndex;\n    const canvasGroupEndHitCountReached =\n      criteria.canvasGroupEndHitCountReached;\n\n    let nextCanvasGroup = canvasGroupEndHitCountReached ? 1 : 0;\n\n    nextCanvasGroup =\n      direction === Direction.LEFT ? nextCanvasGroup : nextCanvasGroup * -1;\n    nextCanvasGroup =\n      criteria.viewingDirection === ViewingDirection.LTR\n        ? currentCanvasGroupIndex + nextCanvasGroup\n        : currentCanvasGroupIndex - nextCanvasGroup;\n    return nextCanvasGroup;\n  }\n}\n","import { ViewerMode } from '../models/viewer-mode';\nimport { NavigatorCalculateNextCanvasGroupStrategy } from './navigator-calculate-next-canvas-group-strategy';\nimport { CalculateNextCanvasGroupStrategy } from './calculate-next-canvas-group-strategy';\nimport { DashboardModeCalculateNextCanvasGroupStrategy } from './dashboard-mode-calculate-next-canvas-group-strategy';\nimport { PageModeCalculateNextCanvasGroupStrategy } from './page-mode-calculate-next-canvas-group-strategy';\nimport { PageZoomedModeCalculateNextCanvasGroupStrategy } from './page-zoomed-mode-calculate-next-canvas-group-strategy';\n\nexport class CalculateNextCanvasGroupFactory {\n  public static create(mode: ViewerMode): CalculateNextCanvasGroupStrategy {\n    if (mode === ViewerMode.DASHBOARD) {\n      return new DashboardModeCalculateNextCanvasGroupStrategy();\n    } else if (mode === ViewerMode.PAGE) {\n      return new PageModeCalculateNextCanvasGroupStrategy();\n    } else if (mode === ViewerMode.PAGE_ZOOMED) {\n      return new PageZoomedModeCalculateNextCanvasGroupStrategy();\n    } else {\n      return new NavigatorCalculateNextCanvasGroupStrategy();\n    }\n  }\n}\n","import * as d3 from 'd3';\nimport * as OpenSeadragon from 'openseadragon';\nimport { Subscription } from 'rxjs';\nimport { Point } from '../models/point';\nimport { Rect } from '../models/rect';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { StyleService } from '../style-service/style.service';\n\nexport class CanvasGroupMask {\n  viewer: any;\n  canvasGroupRect = new Rect();\n\n  leftMask: any;\n  rightMask: any;\n\n  disableResize = false;\n  center!: Point;\n\n  backgroundColor!: string;\n  private subscriptions!: Subscription;\n\n  constructor(viewer: any, private styleService: StyleService) {\n    this.viewer = viewer;\n  }\n\n  public initialize(pageBounds: Rect, visible: boolean): void {\n    this.unsubscribe();\n    this.subscriptions = new Subscription();\n\n    this.subscriptions.add(\n      this.styleService.onChange.subscribe((color: string | undefined) => {\n        if (color) {\n          this.backgroundColor = color;\n          if (this.leftMask) {\n            this.leftMask.style('fill', this.backgroundColor);\n          }\n          if (this.rightMask) {\n            this.rightMask.style('fill', this.backgroundColor);\n          }\n        }\n      })\n    );\n\n    this.canvasGroupRect = pageBounds;\n\n    this.addCanvasGroupMask();\n\n    this.setCenter();\n    this.resize();\n\n    if (visible) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n\n  public destroy() {\n    this.unsubscribe();\n  }\n\n  public changeCanvasGroup(pageBounds: Rect) {\n    this.canvasGroupRect = pageBounds;\n    this.resize();\n  }\n\n  public show(): void {\n    this.addHandlers();\n    if (!this.leftMask || !this.rightMask) {\n      return;\n    }\n    this.setCenter();\n    this.resize();\n    this.leftMask.attr('height', '100%');\n    this.rightMask.attr('height', '100%');\n  }\n\n  public hide(): void {\n    this.removeHandlers();\n    if (!this.leftMask || !this.rightMask) {\n      return;\n    }\n    this.leftMask.attr('height', '0');\n    this.rightMask.attr('height', '0');\n  }\n\n  private addHandlers() {\n    this.viewer.addHandler('animation', this.animationHandler);\n    this.viewer.addHandler('resize', this.resizeHandler);\n    this.viewer.addHandler('canvas-pinch', this.canvasGroupPinchHandler);\n    this.viewer.addHandler('canvas-drag', this.canvasGroupDragHandler);\n    this.viewer.addHandler('canvas-drag-end', this.canvasGroupDragEndHandler);\n  }\n\n  private removeHandlers() {\n    this.viewer.removeHandler('animation', this.animationHandler);\n    this.viewer.removeHandler('resize', this.resizeHandler);\n    this.viewer.removeHandler('canvas-pinch', this.canvasGroupPinchHandler);\n    this.viewer.removeHandler('canvas-drag', this.canvasGroupDragHandler);\n    this.viewer.removeHandler(\n      'canvas-drag-end',\n      this.canvasGroupDragEndHandler\n    );\n  }\n\n  private animationHandler = () => {\n    this.resize();\n  };\n\n  private resizeHandler = () => {\n    this.setCenter();\n    this.resize();\n  };\n\n  private canvasGroupPinchHandler = () => {\n    this.disableResize = false;\n  };\n\n  private canvasGroupDragHandler = (e: any) => {\n    if ((e.delta.x || e.delta.y) && e.speed > 0 && e.direction !== 0) {\n      this.disableResize = true;\n    }\n  };\n\n  private canvasGroupDragEndHandler = () => {\n    this.disableResize = false;\n    this.resize();\n  };\n\n  private addCanvasGroupMask() {\n    const overlays = d3.select(this.viewer.svgOverlay().node().parentNode);\n\n    const mask = overlays.append('g').attr('data-testid', 'page-mask');\n\n    this.leftMask = mask\n      .append('rect')\n      .attr('data-testid', 'mime-left-page-mask')\n      .attr('height', '100%')\n      .attr('y', 0)\n      .style('fill', this.backgroundColor);\n\n    this.rightMask = mask\n      .append('rect')\n      .attr('data-testid', 'mime-right-page-mask')\n      .attr('height', '100%')\n      .attr('y', 0)\n      .style('fill', this.backgroundColor);\n  }\n\n  private setCenter(): void {\n    this.center = new OpenSeadragon.Point(\n      this.viewer.viewport._containerInnerSize.x / 2,\n      this.viewer.viewport._containerInnerSize.y / 2\n    );\n  }\n\n  private resize(): void {\n    if (this.disableResize || !this.leftMask || !this.rightMask) {\n      return;\n    }\n\n    const leftMaskRect = this.getLeftMaskRect();\n    const rightMaskRect = this.getRightMaskRect();\n    this.leftMask.attr('width', leftMaskRect.width).attr('x', leftMaskRect.x);\n    this.rightMask\n      .attr('width', rightMaskRect.width)\n      .attr('x', Math.round(rightMaskRect.x));\n  }\n\n  private getLeftMaskRect(): Rect {\n    const imgBounds = new OpenSeadragon.Rect(\n      this.canvasGroupRect.x,\n      this.canvasGroupRect.y,\n      this.canvasGroupRect.width,\n      this.canvasGroupRect.height\n    );\n    const topLeft = this.viewer.viewport.viewportToViewerElementCoordinates(\n      imgBounds.getTopLeft()\n    );\n    let width = topLeft.x - ViewerOptions.overlays.canvasGroupMarginInPageView;\n\n    if (width < 0) {\n      width = 0;\n    }\n\n    return new Rect({\n      x: 0,\n      width: width,\n    });\n  }\n\n  private getRightMaskRect(): Rect {\n    const imgBounds = new OpenSeadragon.Rect(\n      this.canvasGroupRect.x,\n      this.canvasGroupRect.y,\n      this.canvasGroupRect.width,\n      this.canvasGroupRect.height\n    );\n    const topRight = this.viewer.viewport.viewportToViewerElementCoordinates(\n      imgBounds.getTopRight()\n    );\n    let width = this.viewer.viewport._containerInnerSize.x - topRight.x;\n    const x =\n      this.viewer.viewport._containerInnerSize.x -\n      width +\n      ViewerOptions.overlays.canvasGroupMarginInPageView;\n\n    if (width < 0) {\n      width = 0;\n    }\n\n    return new Rect({\n      x: x,\n      width: width,\n    });\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { CanvasService } from '../canvas-service/canvas-service';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ModeService } from '../mode-service/mode.service';\nimport { Direction } from '../models/direction';\nimport { Point } from '../models/point';\nimport { Rect } from '../models/rect';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { CalculateNextCanvasGroupFactory } from './calculate-next-canvas-group-factory';\nimport { Strategy } from './zoom-strategy';\n\nexport interface CanvasGroup {\n  canvasGroupIndex: number;\n  direction?: Direction;\n  immediately?: boolean;\n}\n\nexport interface GoToCanvasGroupStrategy {\n  goToCanvasGroup(canvasGroup: CanvasGroup): void;\n  goToPreviousCanvasGroup(currentCanvasIndex: number): void;\n  goToNextCanvasGroup(currentCanvasIndex: number): void;\n  centerCurrentCanvas(): void;\n}\n\nexport class DefaultGoToCanvasGroupStrategy implements GoToCanvasGroupStrategy {\n  constructor(\n    private viewer: any,\n    private zoomStrategy: Strategy,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private config: MimeViewerConfig,\n    private viewingDirection: ViewingDirection\n  ) {}\n\n  goToCanvasGroup(canvasGroup: CanvasGroup) {\n    const oldCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n    this.canvasService.currentCanvasGroupIndex =\n      this.canvasService.constrainToRange(canvasGroup.canvasGroupIndex);\n    const newCanvasGroup = this.canvasService.getCanvasGroupRect(\n      this.canvasService.currentCanvasGroupIndex\n    );\n    if (\n      this.modeService.isPageZoomed() &&\n      this.config.preserveZoomOnCanvasGroupChange\n    ) {\n      let x: number;\n\n      if (oldCanvasGroupIndex > canvasGroup.canvasGroupIndex) {\n        if (this.config.startOnTopOnCanvasGroupChange) {\n          const canvasGroupIndexes =\n            this.canvasService.getCanvasesPerCanvasGroup(\n              canvasGroup.canvasGroupIndex\n            );\n          const previousCanvasIndex =\n            canvasGroupIndexes[canvasGroupIndexes.length - 1];\n          const previousCanvasRect =\n            this.canvasService.getCanvasRect(previousCanvasIndex);\n          x =\n            this.viewingDirection === ViewingDirection.LTR\n              ? this.leftX(previousCanvasRect)\n              : this.rightX(newCanvasGroup);\n        } else {\n          x =\n            this.viewingDirection === ViewingDirection.LTR\n              ? this.rightX(newCanvasGroup)\n              : this.leftX(newCanvasGroup);\n        }\n      } else {\n        x =\n          this.viewingDirection === ViewingDirection.LTR\n            ? this.leftX(newCanvasGroup)\n            : this.rightX(newCanvasGroup);\n      }\n\n      const y =\n        this.config.startOnTopOnCanvasGroupChange &&\n        oldCanvasGroupIndex !== canvasGroup.canvasGroupIndex\n          ? newCanvasGroup.y +\n            this.getViewportBounds().height / 2 -\n            this.viewer.collectionTileMargin\n          : this.getViewportCenter().y;\n\n      this.panTo(x, y, canvasGroup.immediately);\n    } else if (this.modeService.isPageZoomed()) {\n      const oldCanvasGroupCenter =\n        this.canvasService.getCanvasGroupRect(oldCanvasGroupIndex);\n      this.panToCenter(oldCanvasGroupCenter, canvasGroup.immediately);\n      this.zoomStrategy.goToHomeZoom();\n      setTimeout(() => {\n        this.panToCenter(newCanvasGroup, canvasGroup.immediately);\n        this.modeService.mode = ViewerMode.PAGE;\n      }, ViewerOptions.transitions.OSDAnimationTime);\n    } else {\n      this.panToCenter(newCanvasGroup, canvasGroup.immediately);\n    }\n  }\n\n  public goToPreviousCanvasGroup(currentCanvasIndex: number): void {\n    if (this.canvasService.currentCanvasGroupIndex > 0) {\n      const viewportCenter = this.getViewportCenter();\n      const currentCanvasGroupIndex =\n        this.canvasService.findClosestCanvasGroupIndex(viewportCenter);\n\n      const calculateNextCanvasGroupStrategy =\n        CalculateNextCanvasGroupFactory.create(ViewerMode.NAVIGATOR);\n      const newCanvasGroupIndex =\n        calculateNextCanvasGroupStrategy.calculateNextCanvasGroup({\n          direction: Direction.PREVIOUS,\n          currentCanvasGroupIndex: currentCanvasGroupIndex,\n          currentCanvasGroupCenter: currentCanvasIndex,\n          viewingDirection: this.viewingDirection,\n        });\n      this.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false,\n      });\n    }\n  }\n\n  public goToNextCanvasGroup(currentCanvasIndex: number): void {\n    if (\n      this.canvasService.currentCanvasGroupIndex <\n      this.canvasService.numberOfCanvasGroups\n    ) {\n      const viewportCenter = this.getViewportCenter();\n      const currentCanvasGroupIndex =\n        this.canvasService.findClosestCanvasGroupIndex(viewportCenter);\n\n      const calculateNextCanvasGroupStrategy =\n        CalculateNextCanvasGroupFactory.create(ViewerMode.NAVIGATOR);\n      const newCanvasGroupIndex =\n        calculateNextCanvasGroupStrategy.calculateNextCanvasGroup({\n          direction: Direction.NEXT,\n          currentCanvasGroupIndex: currentCanvasGroupIndex,\n          currentCanvasGroupCenter: currentCanvasIndex,\n          viewingDirection: this.viewingDirection,\n        });\n      this.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false,\n      });\n    }\n  }\n\n  public centerCurrentCanvas(): void {\n    const currentCanvasGroupIndex = this.canvasService.currentCanvasGroupIndex;\n    const currentCanvasGroupCenter = this.canvasService.getCanvasGroupRect(\n      currentCanvasGroupIndex\n    );\n    this.panToCenter(currentCanvasGroupCenter, false);\n  }\n\n  private leftX(canvas: Rect): number {\n    return canvas.x + this.getViewportBounds().width / 2;\n  }\n\n  private rightX(canvas: Rect): number {\n    return canvas.x + canvas.width - this.getViewportBounds().width / 2;\n  }\n\n  private panToCenter(canvasGroup: Rect, immediately = false): void {\n    this.panTo(canvasGroup.centerX, canvasGroup.centerY, immediately);\n  }\n\n  private panTo(x: number, y: number, immediately = false): void {\n    this.viewer.viewport.panTo(\n      {\n        x: x,\n        y: y,\n      },\n      immediately\n    );\n  }\n\n  private getViewportCenter(): Point {\n    return this.viewer.viewport.getCenter(true);\n  }\n\n  private getViewportBounds(): Rect {\n    return this.viewer.viewport.getBounds(true);\n  }\n}\n","import * as OpenSeadragon from 'openseadragon';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport { ViewerOptions } from '../models/viewer-options';\n\nexport class OptionsFactory {\n  public static create(\n    id: string,\n    mimeViewerConfig: MimeViewerConfig\n  ): OpenSeadragon.Options {\n    let options: OpenSeadragon.Options = OpenSeadragon.DEFAULT_SETTINGS;\n\n    return {\n      ...options,\n      id: id,\n      useCanvas: this.canUseCanvas(),\n      panVertical: true,\n      minZoomImageRatio: 1,\n      maxZoomPixelRatio: 5,\n      smoothTileEdgesMinZoom: 1,\n      preserveImageSizeOnResize: true,\n      visibilityRatio: 0,\n      showNavigationControl: false,\n      animationTime: ViewerOptions.transitions.OSDAnimationTime / 1000,\n      ajaxWithCredentials: mimeViewerConfig.withCredentials,\n      loadTilesWithAjax: mimeViewerConfig.loadTilesWithAjax,\n      crossOriginPolicy: mimeViewerConfig.crossOriginPolicy,\n      ajaxHeaders: mimeViewerConfig.ajaxHeaders,\n      gestureSettingsMouse: {\n        ...options.gestureSettingsMouse,\n        scrollToZoom: false,\n        clickToZoom: false,\n      },\n      gestureSettingsTouch: {\n        ...options.gestureSettingsTouch,\n        dblClickToZoom: false,\n        pinchToZoom: false,\n        flickEnabled: false,\n      },\n      gestureSettingsPen: {\n        ...options.gestureSettingsPen,\n        clickToZoom: false,\n      },\n      gestureSettingsUnknown: {\n        ...options.gestureSettingsUnknown,\n        scrollToZoom: false,\n        dblClickToZoom: false,\n        pinchToZoom: false,\n        flickEnabled: false,\n      },\n    };\n  }\n\n  private static canUseCanvas() {\n    const isHandheldIOS =\n      /iPad|iPhone|iPod/.test(navigator.platform ?? '') ||\n      (navigator.platform === 'MacIntel' &&\n        typeof (navigator as any).standalone !== 'undefined');\n\n    return !isHandheldIOS;\n  }\n}\n","import { Direction } from '../models/direction';\nimport { Side } from '../models/side';\nexport class SwipeDragEndCounter {\n  public leftCount = 0;\n  public rightCount = 0;\n\n  constructor() {\n    this.reset();\n  }\n\n  public reset(): void {\n    this.leftCount = 0;\n    this.rightCount = 0;\n  }\n\n  /**\n   * @param direction of swipe / pan\n   * @param side hit by swipe\n   */\n  public addHit(side: Side | null, dir: Direction | null): void {\n    if (side !== null) {\n      this.incrementSide(side);\n    }\n    if (dir !== null) {\n      this.clearOppositeSideOfDragDirection(dir);\n    }\n  }\n\n  public hitCountReached(): boolean {\n    return this.leftCount >= 2 || this.rightCount >= 2;\n  }\n\n  private incrementSide(side: Side): void {\n    if (side === Side.LEFT) {\n      this.leftCount++;\n      this.rightCount = 0;\n    } else if (side === Side.RIGHT) {\n      this.rightCount++;\n      this.leftCount = 0;\n    }\n  }\n\n  /**\n   * Clear opposite side if swiping in the other direction\n   * @param Direction of swipe / pan\n   */\n  private clearOppositeSideOfDragDirection(dir: Direction): void {\n    if (dir === Direction.LEFT) {\n      this.leftCount = 0;\n    } else if (dir === Direction.RIGHT) {\n      this.rightCount = 0;\n    }\n  }\n}\n","import { Rect } from '../models/rect';\nimport { Point } from '../models/point';\nimport { Side } from '../models/side';\nimport { Direction } from '../models/direction';\nimport { ViewerOptions } from '../models/viewer-options';\nexport class SwipeUtils {\n  // Added threshold to prevent sensitive direction-calculation when zoomed in\n  static getSwipeDirection(\n    start: Point,\n    end: Point,\n    useThreshold?: boolean\n  ): Direction {\n    let deltaX = Math.abs(start.x - end.x);\n    const deltaY = Math.abs(start.y - end.y);\n    deltaX = useThreshold\n      ? deltaX - ViewerOptions.pan.swipeDirectionThreshold\n      : deltaX;\n\n    if (start.x > end.x && deltaX >= deltaY) {\n      return Direction.LEFT;\n    } else if (start.x < end.x && deltaX >= deltaY) {\n      return Direction.RIGHT;\n    } else {\n      return Direction.UNDEFINED;\n    }\n  }\n\n  static getSideIfPanningPastEndOfCanvasGroup(\n    canvasGroupRect: Rect,\n    vpBounds: Rect\n  ): Side | null {\n    if (this.isPanningOutsideLeft(canvasGroupRect, vpBounds)) {\n      return Side.LEFT;\n    } else if (this.isPanningOutsideRight(canvasGroupRect, vpBounds)) {\n      return Side.RIGHT;\n    } else {\n      return null;\n    }\n  }\n\n  static isPanningOutsideCanvasGroup(\n    canvasGroupRect: Rect,\n    vpBounds: Rect\n  ): boolean {\n    return (\n      this.isPanningOutsideLeft(canvasGroupRect, vpBounds) ||\n      this.isPanningOutsideRight(canvasGroupRect, vpBounds)\n    );\n  }\n\n  static isPanningOutsideLeft(canvasGroupRect: Rect, vpBounds: Rect): boolean {\n    return vpBounds.x < canvasGroupRect.x;\n  }\n\n  static isPanningOutsideRight(canvasGroupRect: Rect, vpBounds: Rect): boolean {\n    return (\n      vpBounds.x + vpBounds.width > canvasGroupRect.x + canvasGroupRect.width\n    );\n  }\n\n  /**\n   *\n   * @param direction Current computed direction, expressed as an\n   * angle counterclockwise relative to the positive X axis (-pi to pi, in radians).\n   * Only valid if speed > 0.\n   */\n  static isDirectionInRightSemicircle(direction: number): boolean {\n    return direction > -Math.PI / 2 && direction < Math.PI / 2;\n  }\n\n  /**\n   * @param direction @see isDirectionInRightSemicircle\n   */\n  static isDirectionInLeftSemicircle(direction: number): boolean {\n    return !this.isDirectionInRightSemicircle(direction) || direction === 0; // fix for speed = 0\n  }\n}\n","export class Dimensions {\n  bottom = 0;\n  height = 0;\n  left = 0;\n  right = 0;\n  top = 0;\n  width = 0;\n\n  constructor(fields?: {\n    bottom?: number;\n    height?: number;\n    left?: number;\n    right?: number;\n    top?: number;\n    width?: number;\n  }) {\n    if (fields) {\n      this.bottom = fields.bottom || this.bottom;\n      this.height = fields.height || this.height;\n      this.left = fields.left || this.left;\n      this.right = fields.right || this.right;\n      this.top = fields.top || this.top;\n      this.width = fields.width || this.width;\n    }\n  }\n}\n","import { Rect } from '../models/rect';\nimport { Point } from '../models/point';\n\nexport class ZoomUtils {\n  /**\n   *\n   * @param Point in OSD-viewport-coordinates\n   * @param Rect canvasGroupBounds\n   */\n  static constrainPositionToCanvasGroup(\n    point: Point,\n    canvasGroupBounds: Rect\n  ): Point {\n    if (point.x < canvasGroupBounds.x) {\n      point.x = canvasGroupBounds.x;\n    } else if (point.x > canvasGroupBounds.x + canvasGroupBounds.width) {\n      point.x = canvasGroupBounds.x + canvasGroupBounds.width;\n    }\n    return point;\n  }\n\n  static constraintZoomFactor(\n    zoomFactor: number,\n    currentZoom: number,\n    maxZoom: number\n  ): number {\n    const target = currentZoom * zoomFactor;\n    return target > maxZoom ? (maxZoom / target) * zoomFactor : zoomFactor;\n  }\n}\n","import * as d3 from 'd3';\nimport * as OpenSeadragon from 'openseadragon';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { ModeService } from '../mode-service/mode.service';\nimport { Dimensions } from '../models/dimensions';\nimport { Direction } from '../models/direction';\nimport { Point } from '../models/point';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { Utils } from '../utils';\nimport { ViewerLayoutService } from '../viewer-layout-service/viewer-layout-service';\nimport { ZoomUtils } from './zoom-utils';\n\nexport interface CanvasGroup {\n  canvasGroupIndex: number;\n  canvasGroupEndHitCountReached?: boolean;\n  direction: Direction;\n  immediately: boolean;\n}\n\nexport interface Strategy {\n  setMinZoom(mode: ViewerMode): void;\n  getMinZoom(): number;\n  getMaxZoom(): number;\n  getZoom(): number;\n  goToHomeZoom(): void;\n  zoomTo(level: number, position?: Point): void;\n  zoomIn(zoomFactor?: number, position?: Point): void;\n  zoomOut(zoomFactor?: number, position?: Point): void;\n}\n\nexport class ZoomStrategy {\n  constructor(\n    protected viewer: any,\n    protected canvasService: CanvasService,\n    protected modeService: ModeService,\n    protected viewerLayoutService: ViewerLayoutService\n  ) {}\n\n  setMinZoom(mode: ViewerMode): void {\n    this.viewer.viewport.minZoomLevel = this.getHomeZoomLevel(mode);\n  }\n\n  getMinZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getMinZoom(), 5);\n  }\n\n  getMaxZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getMaxZoom(), 5);\n  }\n\n  getZoom(): number {\n    return Utils.shortenDecimals(this.viewer.viewport.getZoom(true), 5);\n  }\n\n  goToHomeZoom(): void {\n    this.zoomTo(this.getHomeZoomLevel(this.modeService.mode));\n    if (this.modeService.isPageZoomed()) {\n      this.modeService.mode = ViewerMode.PAGE;\n    }\n  }\n\n  zoomTo(level: number, position?: Point): void {\n    if (level !== 0) {\n      this.viewer.viewport.zoomTo(level, position);\n    }\n  }\n\n  private getHomeZoomLevel(mode: ViewerMode): number {\n    if (!this.viewer || !this.canvasService || !this.viewer.container) {\n      return 1;\n    }\n\n    let currentCanvasHeight: number;\n    let currentCanvasWidth: number;\n    let viewportBounds: any;\n\n    const currentCanvasGroupRect =\n      this.canvasService.getCurrentCanvasGroupRect();\n    currentCanvasHeight = currentCanvasGroupRect.height;\n    currentCanvasWidth = currentCanvasGroupRect.width;\n    viewportBounds =\n      mode === ViewerMode.DASHBOARD\n        ? this.getDashboardViewportBounds()\n        : this.viewer.viewport.getBounds();\n\n    return this.getFittedZoomLevel(\n      viewportBounds,\n      currentCanvasHeight,\n      currentCanvasWidth\n    );\n  }\n\n  zoomIn(zoomFactor?: number, position?: Point): void {\n    if (!zoomFactor) {\n      zoomFactor = ViewerOptions.zoom.zoomFactor;\n    }\n\n    if (position) {\n      position = this.viewer.viewport.pointFromPixel(position);\n      if (position) {\n        position = ZoomUtils.constrainPositionToCanvasGroup(\n          position,\n          this.canvasService.getCurrentCanvasGroupRect()\n        );\n      }\n    }\n\n    if (this.modeService.mode !== ViewerMode.PAGE_ZOOMED) {\n      this.modeService.mode = ViewerMode.PAGE_ZOOMED;\n    }\n\n    this.zoomBy(zoomFactor, position);\n  }\n\n  zoomOut(zoomFactor?: number, position?: Point): void {\n    if (!zoomFactor) {\n      zoomFactor = Math.pow(ViewerOptions.zoom.zoomFactor, -1);\n    }\n\n    if (position) {\n      position = this.viewer.viewport.pointFromPixel(position);\n      if (position) {\n        position = ZoomUtils.constrainPositionToCanvasGroup(\n          position,\n          this.canvasService.getCurrentCanvasGroupRect()\n        );\n      }\n    }\n\n    if (this.isViewportLargerThanCanvasGroup()) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      this.zoomBy(zoomFactor, position);\n    }\n  }\n\n  private getDashboardViewportBounds(): any {\n    const homeZoomFactor = this.getHomeZoomFactor();\n    const maxViewportDimensions = new Dimensions(\n      d3\n        .select(this.viewer.container.parentNode.parentNode)\n        .node()\n        .getBoundingClientRect()\n    );\n    const viewportHeight =\n      maxViewportDimensions.height -\n      ViewerOptions.padding.header -\n      ViewerOptions.padding.footer;\n    const viewportWidth = maxViewportDimensions.width * homeZoomFactor;\n\n    const viewportSizeInViewportCoordinates =\n      this.viewer.viewport.deltaPointsFromPixels(\n        new OpenSeadragon.Point(viewportWidth, viewportHeight)\n      );\n\n    return new OpenSeadragon.Rect(\n      0,\n      0,\n      viewportSizeInViewportCoordinates.x,\n      viewportSizeInViewportCoordinates.y\n    );\n  }\n\n  private getFittedZoomLevel(\n    viewportBounds: any,\n    canvasGroupHeight: number,\n    canvasGroupWidth: number\n  ) {\n    const currentZoom: number = this.viewer.viewport.getZoom();\n    const resizeRatio: number = viewportBounds.height / canvasGroupHeight;\n\n    if (resizeRatio * canvasGroupWidth <= viewportBounds.width) {\n      return Utils.shortenDecimals(resizeRatio * currentZoom, 5);\n    } else {\n      // Canvas group at full height is wider than viewport.  Return fit by width instead.\n      return Utils.shortenDecimals(\n        (viewportBounds.width / canvasGroupWidth) * currentZoom,\n        5\n      );\n    }\n  }\n\n  private zoomBy(zoomFactor: number, position?: Point): void {\n    const currentZoom = this.viewer.viewport.getZoom(false);\n    zoomFactor = ZoomUtils.constraintZoomFactor(\n      zoomFactor,\n      currentZoom,\n      this.getMaxZoom()\n    );\n    this.viewer.viewport.zoomBy(zoomFactor, position);\n  }\n\n  private isViewportLargerThanCanvasGroup(): boolean {\n    const canvasGroupRec = this.canvasService.getCurrentCanvasGroupRect();\n    const viewportBounds = this.viewer.viewport.getBounds();\n    const pbWidth = Math.round(canvasGroupRec.width);\n    const pbHeight = Math.round(canvasGroupRec.height);\n    const vpWidth = Math.round(viewportBounds.width);\n    const vpHeight = Math.round(viewportBounds.height);\n    return vpHeight >= pbHeight || vpWidth >= pbWidth;\n  }\n\n  private getHomeZoomFactor() {\n    return this.modeService.mode === ViewerMode.DASHBOARD\n      ? this.getDashboardZoomHomeFactor()\n      : 1;\n  }\n\n  private getDashboardZoomHomeFactor() {\n    return this.viewerLayoutService.layout === ViewerLayout.ONE_PAGE\n      ? 0.85\n      : 0.66;\n  }\n}\n\nexport class DefaultZoomStrategy extends ZoomStrategy implements Strategy {\n  constructor(\n    viewer: any,\n    canvasService: CanvasService,\n    modeService: ModeService,\n    viewerLayoutService: ViewerLayoutService\n  ) {\n    super(viewer, canvasService, modeService, viewerLayoutService);\n  }\n}\n","import { Injectable, NgZone } from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport * as d3 from 'd3';\nimport {\n  BehaviorSubject,\n  Observable,\n  Subject,\n  Subscription,\n  interval,\n} from 'rxjs';\nimport { distinctUntilChanged, sample } from 'rxjs/operators';\nimport { ModeService } from '../../core/mode-service/mode.service';\nimport { AltoService } from '../alto-service/alto.service';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { ClickService } from '../click-service/click.service';\nimport { createSvgOverlay } from '../ext/svg-overlay';\nimport { IiifContentSearchService } from '../iiif-content-search-service/iiif-content-search.service';\nimport { ManifestUtils } from '../iiif-manifest-service/iiif-manifest-utils';\nimport { MimeViewerIntl } from '../intl';\nimport { MimeViewerConfig } from '../mime-viewer-config';\nimport {\n  ModeChanges,\n  RecognizedTextMode,\n  RecognizedTextModeChanges,\n} from '../models';\nimport { Direction } from '../models/direction';\nimport { Manifest, Resource } from '../models/manifest';\nimport { PinchStatus } from '../models/pinchStatus';\nimport { Side } from '../models/side';\nimport { ViewerLayout } from '../models/viewer-layout';\nimport { ViewerMode } from '../models/viewer-mode';\nimport { ViewerOptions } from '../models/viewer-options';\nimport { StyleService } from '../style-service/style.service';\nimport { ViewerLayoutService } from '../viewer-layout-service/viewer-layout-service';\nimport { Hit } from './../models/hit';\nimport { Point } from './../models/point';\nimport { Rect } from './../models/rect';\nimport { SearchResult } from './../models/search-result';\nimport { CalculateNextCanvasGroupFactory } from './calculate-next-canvas-group-factory';\nimport { CanvasGroupMask } from './canvas-group-mask';\nimport {\n  DefaultGoToCanvasGroupStrategy,\n  GoToCanvasGroupStrategy,\n} from './go-to-canvas-group-strategy';\nimport { OptionsFactory } from './options.factory';\nimport { SwipeDragEndCounter } from './swipe-drag-end-counter';\nimport { SwipeUtils } from './swipe-utils';\nimport { DefaultZoomStrategy, ZoomStrategy } from './zoom-strategy';\n\ndeclare const OpenSeadragon: any;\n\n@Injectable()\nexport class ViewerService {\n  config!: MimeViewerConfig;\n  private viewer?: any;\n  private svgOverlay: any;\n  private svgNode: any;\n\n  private tileSources: Array<Resource> = [];\n  private subscriptions!: Subscription;\n\n  public isCanvasPressed: Subject<boolean> = new BehaviorSubject<boolean>(\n    false,\n  );\n\n  private currentCenter: Subject<Point> = new Subject();\n  private currentCanvasIndex: BehaviorSubject<number> = new BehaviorSubject(0);\n  private currentHit: Hit | null = null;\n  private osdIsReady = new BehaviorSubject<boolean>(false);\n  private swipeDragEndCounter = new SwipeDragEndCounter();\n  private canvasGroupMask!: CanvasGroupMask;\n  private pinchStatus = new PinchStatus();\n  private dragStartPosition: any;\n  private manifest!: Manifest;\n  private isManifestPaged = false;\n  private defaultKeyDownHandler: any;\n\n  public currentSearch: SearchResult | null = null;\n  private zoomStrategy!: ZoomStrategy;\n  private goToCanvasGroupStrategy!: GoToCanvasGroupStrategy;\n\n  private rotation: BehaviorSubject<number> = new BehaviorSubject(0);\n  private dragStatus = false;\n  public id = 'ngx-mime-mimeViewer';\n  public openseadragonId = 'openseadragon';\n\n  constructor(\n    private zone: NgZone,\n    private clickService: ClickService,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private viewerLayoutService: ViewerLayoutService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private styleService: StyleService,\n    private altoService: AltoService,\n    private snackBar: MatSnackBar,\n    private intl: MimeViewerIntl,\n  ) {\n    this.id = this.generateRandomId('ngx-mime-mimeViewer');\n    this.openseadragonId = this.generateRandomId('openseadragon');\n  }\n\n  get onRotationChange(): Observable<number> {\n    return this.rotation.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onCenterChange(): Observable<Point> {\n    return this.currentCenter.asObservable();\n  }\n\n  get onCanvasGroupIndexChange(): Observable<number> {\n    return this.currentCanvasIndex.asObservable().pipe(distinctUntilChanged());\n  }\n\n  get onOsdReadyChange(): Observable<boolean> {\n    return this.osdIsReady.asObservable().pipe(distinctUntilChanged());\n  }\n\n  initialize() {\n    this.unsubscribe();\n    this.subscriptions = new Subscription();\n  }\n\n  setConfig(config: MimeViewerConfig) {\n    this.config = config;\n  }\n\n  public getViewer(): any {\n    return this.viewer;\n  }\n\n  public getTilesources(): Resource[] {\n    return this.tileSources;\n  }\n\n  public getOverlays(): ReadonlyArray<SVGRectElement> {\n    return this.canvasService.overlays;\n  }\n\n  public getZoom(): number {\n    return this.zoomStrategy.getZoom();\n  }\n\n  public getMinZoom(): number {\n    return this.zoomStrategy.getMinZoom();\n  }\n\n  public getMaxZoom(): number {\n    return this.zoomStrategy.getMaxZoom();\n  }\n\n  public home(): void {\n    if (!this.osdIsReady.getValue()) {\n      return;\n    }\n    this.zoomStrategy.setMinZoom(this.modeService.mode);\n\n    this.goToCanvasGroupStrategy.centerCurrentCanvas();\n\n    this.zoomStrategy.goToHomeZoom();\n  }\n\n  public goToPreviousCanvasGroup(): void {\n    this.goToCanvasGroupStrategy.goToPreviousCanvasGroup(\n      this.currentCanvasIndex.getValue(),\n    );\n  }\n\n  public goToNextCanvasGroup(): void {\n    this.goToCanvasGroupStrategy.goToNextCanvasGroup(\n      this.currentCanvasIndex.getValue(),\n    );\n  }\n\n  public goToCanvasGroup(canvasGroupIndex: number, immediately: boolean): void {\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: canvasGroupIndex,\n      immediately: immediately,\n    });\n  }\n\n  public goToCanvas(canvasIndex: number, immediately: boolean): void {\n    const canvasGroupIndex =\n      this.canvasService.findCanvasGroupByCanvasIndex(canvasIndex);\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: canvasGroupIndex,\n      immediately: immediately,\n    });\n  }\n\n  public highlight(searchResult: SearchResult): void {\n    this.clearHightlight();\n    if (this.viewer) {\n      if (searchResult.q) {\n        this.currentSearch = searchResult;\n      }\n\n      const rotation = this.rotation.getValue();\n\n      for (const hit of searchResult.hits) {\n        for (const highlightRect of hit.highlightRects) {\n          const canvasRect = this.canvasService.getCanvasRect(\n            highlightRect.canvasIndex,\n          );\n          if (canvasRect) {\n            const currentHitStrokeOffset = 8;\n            let width = highlightRect.width + currentHitStrokeOffset;\n            let height = highlightRect.height + currentHitStrokeOffset;\n            let x = canvasRect.x - currentHitStrokeOffset / 2;\n            let y = canvasRect.y - currentHitStrokeOffset / 2;\n\n            /* hit rect are relative to each unrotated page canvasRect so x,y must be adjusted by the remaining space */\n            switch (rotation) {\n              case 0:\n                x += highlightRect.x;\n                y += highlightRect.y;\n                break;\n\n              case 90:\n                x += canvasRect.width - highlightRect.y - highlightRect.height;\n                y += highlightRect.x;\n                /* Flip height & width */\n                width = highlightRect.height + currentHitStrokeOffset;\n                height = highlightRect.width + currentHitStrokeOffset;\n                break;\n\n              case 180:\n                x += canvasRect.width - (highlightRect.x + highlightRect.width);\n                y +=\n                  canvasRect.height - (highlightRect.y + highlightRect.height);\n                break;\n\n              case 270:\n                x += highlightRect.y;\n                y += canvasRect.height - highlightRect.x - highlightRect.width;\n                /* Flip height & width */\n                width = highlightRect.height + currentHitStrokeOffset;\n                height = highlightRect.width + currentHitStrokeOffset;\n                break;\n            }\n\n            const currentOverlay: SVGRectElement = this.svgNode\n              .append('rect')\n              .attr('mimeHitIndex', hit.id)\n              .attr('x', x)\n              .attr('y', y)\n              .attr('width', width)\n              .attr('height', height)\n              .attr('class', 'hit');\n          }\n        }\n      }\n    }\n  }\n\n  private highlightCurrentHit() {\n    if (this.currentHit) {\n      this.svgNode.selectAll(`g > rect.selected`).attr('class', 'hit');\n      this.svgNode\n        .selectAll(`g > rect[mimeHitIndex='${this.currentHit.id}']`)\n        .attr('class', 'hit selected');\n    }\n  }\n\n  public clearHightlight(): void {\n    if (this.svgNode) {\n      this.svgNode.selectAll('.hit').remove();\n      this.currentSearch = null;\n    }\n  }\n\n  setUpViewer(manifest: Manifest, config: MimeViewerConfig) {\n    this.config = config;\n    this.canvasService.setConfig(config);\n\n    if (manifest && manifest.tileSource) {\n      this.tileSources = manifest.tileSource;\n      this.canvasService.addTileSources(this.tileSources);\n\n      this.zone.runOutsideAngular(() => {\n        this.manifest = manifest;\n        this.isManifestPaged = ManifestUtils.isManifestPaged(this.manifest);\n        this.viewer = new OpenSeadragon.Viewer(\n          OptionsFactory.create(this.openseadragonId, this.config),\n        );\n\n        createSvgOverlay();\n        this.zoomStrategy = new DefaultZoomStrategy(\n          this.viewer,\n          this.canvasService,\n          this.modeService,\n          this.viewerLayoutService,\n        );\n        this.goToCanvasGroupStrategy = new DefaultGoToCanvasGroupStrategy(\n          this.viewer,\n          this.zoomStrategy,\n          this.canvasService,\n          this.modeService,\n          this.config,\n          this.manifest.viewingDirection,\n        );\n\n        /*\n          This disables keyboard navigation in openseadragon.\n          We use s for opening search dialog and OSD use the same key for panning.\n          Issue: https://github.com/openseadragon/openseadragon/issues/794\n         */\n        this.defaultKeyDownHandler = this.viewer.innerTracker.keyDownHandler;\n        this.disableKeyDownHandler();\n        this.viewer.innerTracker.keyHandler = null;\n        this.canvasService.reset();\n        this.canvasGroupMask = new CanvasGroupMask(\n          this.viewer,\n          this.styleService,\n        );\n      });\n\n      this.addToWindow();\n      this.setupOverlays();\n      this.createOverlays();\n      this.addEvents();\n      this.addSubscriptions();\n    }\n  }\n\n  addSubscriptions(): void {\n    this.initialize();\n    this.subscriptions.add(\n      this.modeService.onChange.subscribe((mode: ModeChanges) => {\n        this.modeChanged(mode);\n      }),\n    );\n\n    this.zone.runOutsideAngular(() => {\n      this.subscriptions.add(\n        this.onCenterChange\n          .pipe(sample(interval(500)))\n          .subscribe((center: Point) => {\n            this.calculateCurrentCanvasGroup(center);\n            if (center && center !== null) {\n              this.osdIsReady.next(true);\n            }\n          }),\n      );\n    });\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex: number) => {\n          this.swipeDragEndCounter.reset();\n          if (canvasGroupIndex !== -1) {\n            this.canvasGroupMask.changeCanvasGroup(\n              this.canvasService.getCanvasGroupRect(canvasGroupIndex),\n            );\n            if (\n              this.modeService.mode === ViewerMode.PAGE ||\n              this.modeService.mode === ViewerMode.DASHBOARD\n            ) {\n              this.home();\n            }\n          }\n        },\n      ),\n    );\n\n    this.subscriptions.add(\n      this.onOsdReadyChange.subscribe((state: boolean) => {\n        if (state) {\n          this.initialCanvasGroupLoaded();\n          this.currentCenter.next(this.viewer?.viewport.getCenter(true));\n        }\n      }),\n    );\n\n    this.subscriptions.add(\n      this.viewerLayoutService.onChange.subscribe((state: ViewerLayout) => {\n        this.layoutPages();\n      }),\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onSelected.subscribe((hit: Hit | null) => {\n        if (hit) {\n          this.currentHit = hit;\n          this.highlightCurrentHit();\n          this.goToCanvas(hit.index, false);\n        }\n      }),\n    );\n\n    this.subscriptions.add(\n      this.onRotationChange.subscribe((rotation: number) => {\n        this.layoutPages();\n      }),\n    );\n\n    this.subscriptions.add(\n      this.altoService.onRecognizedTextContentModeChange$.subscribe(\n        (recognizedTextModeChanges: RecognizedTextModeChanges) => {\n          if (\n            recognizedTextModeChanges.currentValue === RecognizedTextMode.ONLY\n          ) {\n            this.hidePages();\n          }\n\n          if (\n            recognizedTextModeChanges.previousValue === RecognizedTextMode.ONLY\n          ) {\n            this.showPages();\n          }\n\n          if (\n            recognizedTextModeChanges.previousValue ===\n              RecognizedTextMode.ONLY &&\n            recognizedTextModeChanges.currentValue === RecognizedTextMode.SPLIT\n          ) {\n            setTimeout(() => {\n              this.home();\n            }, ViewerOptions.transitions.OSDAnimationTime);\n          }\n        },\n      ),\n    );\n  }\n\n  hidePages() {\n    this.setOpacityOnPages(0);\n  }\n\n  showPages() {\n    this.setOpacityOnPages(1);\n  }\n\n  layoutPages() {\n    if (this.osdIsReady.getValue()) {\n      const currentCanvasIndex = this.canvasService.currentCanvasIndex;\n      this.destroy(true);\n      this.setUpViewer(this.manifest, this.config);\n      this.goToCanvasGroupStrategy.goToCanvasGroup({\n        canvasGroupIndex:\n          this.canvasService.findCanvasGroupByCanvasIndex(currentCanvasIndex),\n        immediately: false,\n      });\n\n      // Recreate highlights if there is an active search going on\n      if (this.currentSearch) {\n        this.highlight(this.currentSearch);\n      }\n    }\n  }\n\n  addToWindow() {\n    (<any>window).openSeadragonViewer = this.viewer;\n  }\n\n  setupOverlays(): void {\n    this.svgOverlay = this.viewer.svgOverlay();\n    this.svgNode = d3.select(this.svgOverlay.node());\n  }\n\n  disableKeyDownHandler() {\n    this.viewer.innerTracker.keyDownHandler = null;\n  }\n\n  resetKeyDownHandler() {\n    this.viewer.innerTracker.keyDownHandler = this.defaultKeyDownHandler;\n  }\n\n  /**\n   *\n   * @param layoutSwitch true if switching between layouts\n   * to keep current search-state and rotation\n   */\n  destroy(layoutSwitch?: boolean) {\n    this.osdIsReady.next(false);\n    this.currentCenter.next({ x: 0, y: 0 });\n    if (this.viewer != null && this.viewer.isOpen()) {\n      if (this.viewer.container != null) {\n        d3.select(this.viewer.container.parentNode).style('opacity', '0');\n      }\n      this.viewer.destroy();\n      this.viewer = null;\n    }\n    this.canvasService.reset();\n    if (this.canvasGroupMask) {\n      this.canvasGroupMask.destroy();\n    }\n    // Keep search-state and rotation only if layout-switch\n    if (!layoutSwitch) {\n      this.altoService.destroy();\n      this.currentSearch = null;\n      this.iiifContentSearchService.destroy();\n      this.rotation.next(0);\n      this.modeService.destroy();\n      this.unsubscribe();\n    }\n  }\n\n  addEvents(): void {\n    this.clickService.reset();\n    this.clickService.addSingleClickHandler(this.singleClickHandler);\n    this.clickService.addDoubleClickHandler(this.dblClickHandler);\n    this.viewer.addHandler('animation-finish', () => {\n      this.currentCenter.next(this.viewer?.viewport.getCenter(true));\n    });\n    this.viewer.addHandler('canvas-click', this.clickService.click);\n    this.viewer.addHandler(\n      'canvas-double-click',\n      (e: any) => (e.preventDefaultAction = true),\n    );\n    this.viewer.addHandler('canvas-press', (e: any) => {\n      this.pinchStatus.active = false;\n      this.dragStartPosition = e.position;\n      this.isCanvasPressed.next(true);\n    });\n    this.viewer.addHandler('canvas-release', () =>\n      this.isCanvasPressed.next(false),\n    );\n    this.viewer.addHandler('canvas-scroll', this.scrollHandler);\n    this.viewer.addHandler('canvas-pinch', this.pinchHandler);\n\n    this.viewer.addHandler('canvas-drag', (e: any) => {\n      this.dragStatus = true;\n      this.dragHandler(e);\n    });\n    this.viewer.addHandler('canvas-drag-end', (e: any) => {\n      if (this.dragStatus) {\n        this.constraintCanvas();\n        this.swipeToCanvasGroup(e);\n      }\n      this.dragStatus = false;\n    });\n    this.viewer.addHandler('animation', (e: any) => {\n      this.currentCenter.next(this.viewer?.viewport.getCenter(true));\n    });\n  }\n\n  zoomIn(zoomFactor?: number, position?: Point): void {\n    this.zoomStrategy.zoomIn(zoomFactor, position);\n  }\n\n  zoomOut(zoomFactor?: number, position?: Point): void {\n    this.zoomStrategy.zoomOut(zoomFactor, position);\n  }\n\n  rotate(): void {\n    if (this.osdIsReady.getValue()) {\n      if (this.viewer.useCanvas) {\n        this.rotateToRight();\n        this.highlightCurrentHit();\n      } else {\n        this.showRotationIsNotSupportetMessage();\n      }\n    }\n  }\n\n  /**\n   * Callback for mode-change\n   * @param mode ViewerMode\n   */\n  modeChanged(mode: ModeChanges): void {\n    if (!this.viewer) {\n      return;\n    }\n\n    if (mode.currentValue === ViewerMode.DASHBOARD) {\n      this.viewer.panVertical = false;\n      this.toggleToDashboard();\n      this.disableKeyDownHandler();\n    } else if (mode.currentValue === ViewerMode.PAGE) {\n      this.viewer.panVertical = false;\n      this.toggleToPage();\n      this.disableKeyDownHandler();\n    } else if (mode.currentValue === ViewerMode.PAGE_ZOOMED) {\n      this.viewer.panVertical = true;\n      this.resetKeyDownHandler();\n    }\n  }\n\n  private generateRandomId(prefix: string): string {\n    const randomString = Math.random().toString(16).slice(2);\n    return `${prefix}-${randomString}`;\n  }\n\n  /**\n   * Switches to DASHBOARD-mode, repositions canvas group and removes max-width on viewer\n   */\n  private toggleToDashboard(): void {\n    if (!this.canvasService.isCurrentCanvasGroupValid()) {\n      return;\n    }\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: this.canvasService.currentCanvasGroupIndex,\n      immediately: false,\n    });\n\n    this.canvasGroupMask.hide();\n\n    this.home();\n  }\n\n  /**\n   * Switches to PAGE-mode, centers current canvas group and repositions other canvas groups\n   */\n  private toggleToPage(): void {\n    if (!this.canvasService.isCurrentCanvasGroupValid()) {\n      return;\n    }\n    this.goToCanvasGroupStrategy.goToCanvasGroup({\n      canvasGroupIndex: this.canvasService.currentCanvasGroupIndex,\n      immediately: false,\n    });\n\n    this.canvasGroupMask.show();\n\n    this.home();\n  }\n\n  /**\n   * Scroll-handler\n   */\n  scrollHandler = (event: any) => {\n    const zoomFactor = Math.pow(ViewerOptions.zoom.zoomFactor, event.scroll);\n    // Scrolling up\n    if (event.scroll > 0) {\n      this.zoomInGesture(event.position, zoomFactor);\n      // Scrolling down\n    } else if (event.scroll < 0) {\n      this.zoomOutGesture(event.position, zoomFactor);\n    }\n  };\n\n  /**\n   * Pinch-handler\n   */\n  pinchHandler = (event: any) => {\n    this.pinchStatus.active = true;\n    const zoomFactor = event.distance / event.lastDistance;\n    // Pinch Out\n    if (\n      event.distance >\n      event.lastDistance + ViewerOptions.zoom.pinchZoomThreshold\n    ) {\n      this.zoomInPinchGesture(event, zoomFactor);\n      // Pinch In\n    } else if (\n      event.distance + ViewerOptions.zoom.pinchZoomThreshold <\n      event.lastDistance\n    ) {\n      this.zoomOutPinchGesture(event, zoomFactor);\n    }\n  };\n\n  /**\n   *\n   * @param point to zoom to. If not set, the viewer will zoom to center\n   */\n  zoomInGesture(position: Point, zoomFactor?: number): void {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      if (position) {\n        this.zoomStrategy.zoomIn(zoomFactor, position);\n      } else {\n        this.zoomStrategy.zoomIn();\n      }\n    }\n  }\n\n  zoomOutGesture(position: Point, zoomFactor?: number): void {\n    if (this.modeService.isPageZoomed()) {\n      this.zoomStrategy.zoomOut(zoomFactor, position);\n    } else if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n    }\n  }\n\n  /**\n   * Process zoom in pinch gesture (pinch out)\n   *\n   * Toggle to page mode and Zoom in\n   *\n   * @param event from pinch gesture\n   */\n  zoomInPinchGesture(event: any, zoomFactor: number): void {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.mode = ViewerMode.PAGE;\n    } else {\n      this.zoomIn(zoomFactor, this.dragStartPosition || event.center);\n    }\n  }\n\n  /**\n   * Process zoom out pinch gesture (pinch in)\n   *\n   * Zoom out and toggle to dashboard when all zoomed out.\n   * Stop between zooming out and toggling to dashboard.\n   *\n   * @param event from pinch gesture\n   */\n  zoomOutPinchGesture(event: any, zoomFactor: number): void {\n    const gestureId = event.gesturePoints[0].id;\n    if (this.modeService.isPageZoomed()) {\n      this.pinchStatus.shouldStop = true;\n      this.zoomStrategy.zoomOut(zoomFactor, event.center);\n    } else if (this.modeService.mode === ViewerMode.PAGE) {\n      if (\n        !this.pinchStatus.shouldStop ||\n        gestureId === this.pinchStatus.previousGestureId + 2\n      ) {\n        this.pinchStatus.shouldStop = false;\n        this.modeService.toggleMode();\n      }\n      this.pinchStatus.previousGestureId = gestureId;\n    }\n  }\n\n  /**\n   * Single-click-handler\n   * Single-click toggles between page/dashboard-mode if a page is hit\n   */\n  singleClickHandler = (event: any) => {\n    const tileIndex = this.getOverlayIndexFromClickEvent(event);\n    const requestedCanvasGroupIndex =\n      this.canvasService.findCanvasGroupByCanvasIndex(tileIndex);\n    if (requestedCanvasGroupIndex !== -1) {\n      this.canvasService.currentCanvasGroupIndex = requestedCanvasGroupIndex;\n    } else {\n      this.calculateCurrentCanvasGroup(this.viewer?.viewport.getCenter(true));\n    }\n    this.modeService.toggleMode();\n  };\n\n  /**\n   * Double-click-handler\n   * Double-click dashboard-mode should go to page-mode\n   * Double-click page-mode should\n   *    a) Zoom in if page is fitted vertically, or\n   *    b) Fit vertically if page is already zoomed in\n   */\n  dblClickHandler = (event: any) => {\n    // Page is fitted vertically, so dbl-click zooms in\n    if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.mode = ViewerMode.PAGE_ZOOMED;\n      this.zoomStrategy.zoomIn(\n        ViewerOptions.zoom.dblClickZoomFactor,\n        event.position,\n      );\n    } else {\n      this.modeService.mode = ViewerMode.PAGE;\n      const canvasIndex: number = this.getOverlayIndexFromClickEvent(event);\n      const requestedCanvasGroupIndex =\n        this.canvasService.findCanvasGroupByCanvasIndex(canvasIndex);\n      if (requestedCanvasGroupIndex >= 0) {\n        this.canvasService.currentCanvasGroupIndex = requestedCanvasGroupIndex;\n      } else {\n        this.calculateCurrentCanvasGroup(this.viewer?.viewport.getCenter(true));\n      }\n    }\n  };\n\n  /**\n   * Checks if hit element is a <rect>-element\n   * @param target\n   */\n  isCanvasGroupHit(target: HTMLElement): boolean {\n    return target instanceof SVGRectElement;\n  }\n\n  /**\n   * Iterates tilesources and adds them to viewer\n   * Creates svg clickable overlays for each tile\n   */\n  createOverlays(): void {\n    this.canvasService.setViewer(this.viewer);\n    this.canvasService.setSvgNode(this.svgNode);\n    this.canvasService.setViewingDirection(this.manifest.viewingDirection);\n    this.canvasService.setRotation(this.rotation.getValue());\n    this.canvasService.updateViewer();\n  }\n\n  /**\n   * Sets viewer size and opacity once the first canvas group has fully loaded\n   */\n  private initialCanvasGroupLoaded(): void {\n    this.home();\n    this.canvasGroupMask.initialize(\n      this.canvasService.getCurrentCanvasGroupRect(),\n      this.modeService.mode !== ViewerMode.DASHBOARD,\n    );\n    if (this.viewer) {\n      d3.select(this.viewer.container.parentNode)\n        .transition()\n        .duration(ViewerOptions.transitions.OSDAnimationTime)\n        .style('opacity', '1');\n    }\n  }\n\n  /**\n   * Returns overlay-index for click-event if hit\n   * @param target hit <rect>\n   */\n  getOverlayIndexFromClickEvent(event: any) {\n    const target = this.getOriginalTarget(event);\n    if (this.isCanvasGroupHit(target)) {\n      const requestedCanvasGroup: number =\n        this.canvasService.overlays.indexOf(target);\n\n      if (requestedCanvasGroup >= 0) {\n        return requestedCanvasGroup;\n      }\n    }\n    return -1;\n  }\n\n  private calculateCurrentCanvasGroup(center: Point) {\n    if (center) {\n      const currentCanvasGroupIndex =\n        this.canvasService.findClosestCanvasGroupIndex(center);\n      this.currentCanvasIndex.next(currentCanvasGroupIndex);\n    }\n  }\n\n  private dragHandler = (e: any) => {\n    this.viewer.panHorizontal = true;\n    if (this.modeService.isPageZoomed()) {\n      const canvasGroupRect: Rect =\n        this.canvasService.getCurrentCanvasGroupRect();\n      const vpBounds: Rect = this.getViewportBounds();\n      const pannedPastCanvasGroup =\n        SwipeUtils.getSideIfPanningPastEndOfCanvasGroup(\n          canvasGroupRect,\n          vpBounds,\n        );\n      const direction: number = e.direction;\n      if (\n        (pannedPastCanvasGroup === Side.LEFT &&\n          SwipeUtils.isDirectionInRightSemicircle(direction)) ||\n        (pannedPastCanvasGroup === Side.RIGHT &&\n          SwipeUtils.isDirectionInLeftSemicircle(direction))\n      ) {\n        this.viewer.panHorizontal = false;\n      }\n    }\n  };\n\n  private constraintCanvas() {\n    if (this.modeService.isPageZoomed()) {\n      const viewportBounds: Rect = this.getViewportBounds();\n      const currentCanvasBounds = this.getCurrentCanvasBounds();\n      this.isCanvasOutsideViewport(viewportBounds, currentCanvasBounds)\n        ? this.constraintCanvasOutsideViewport(\n            viewportBounds,\n            currentCanvasBounds,\n          )\n        : this.constraintCanvasInsideViewport(viewportBounds);\n    }\n  }\n\n  private getCurrentCanvasBounds(): Rect {\n    return this.viewer.world\n      .getItemAt(this.canvasService.currentCanvasGroupIndex)\n      .getBounds();\n  }\n\n  private isCanvasOutsideViewport(\n    viewportBounds: Rect,\n    canvasBounds: Rect,\n  ): boolean {\n    return viewportBounds.height < canvasBounds.height;\n  }\n\n  private constraintCanvasOutsideViewport(\n    viewportBounds: Rect,\n    canvasBounds: Rect,\n  ): void {\n    let rect: Rect | undefined = undefined;\n    if (this.isCanvasBelowViewportTop(viewportBounds, canvasBounds)) {\n      rect = new Rect({\n        x: viewportBounds.x + viewportBounds.width / 2,\n        y: canvasBounds.y + viewportBounds.height / 2,\n      });\n    } else if (this.isCanvasAboveViewportBottom(viewportBounds, canvasBounds)) {\n      rect = new Rect({\n        x: viewportBounds.x + viewportBounds.width / 2,\n        y: canvasBounds.y + canvasBounds.height - viewportBounds.height / 2,\n      });\n    }\n    this.panTo(rect, true);\n  }\n\n  private constraintCanvasInsideViewport(viewportBounds: Rect): void {\n    const canvasGroupRect = this.canvasService.getCanvasGroupRect(\n      this.canvasService.currentCanvasGroupIndex,\n    );\n    const rect = new Rect({\n      x: viewportBounds.x + viewportBounds.width / 2,\n      y: canvasGroupRect.centerY,\n    });\n    this.panTo(rect, true);\n  }\n\n  private isCanvasBelowViewportTop(\n    viewportBounds: Rect,\n    canvasBounds: Rect,\n  ): boolean {\n    return viewportBounds.y < canvasBounds.y;\n  }\n\n  private isCanvasAboveViewportBottom(\n    viewportBounds: Rect,\n    canvasBounds: Rect,\n  ): boolean {\n    return (\n      canvasBounds.y + canvasBounds.height <\n      viewportBounds.y + viewportBounds.height\n    );\n  }\n\n  private swipeToCanvasGroup(e: any) {\n    // Don't swipe on pinch actions\n    if (this.pinchStatus.active) {\n      return;\n    }\n\n    const speed: number = e.speed;\n    const dragEndPosision = e.position;\n\n    const canvasGroupRect: Rect =\n      this.canvasService.getCurrentCanvasGroupRect();\n    const viewportBounds: Rect = this.getViewportBounds();\n\n    const direction: Direction = SwipeUtils.getSwipeDirection(\n      this.dragStartPosition,\n      dragEndPosision,\n      this.modeService.isPageZoomed(),\n    );\n\n    const currentCanvasGroupIndex: number =\n      this.canvasService.currentCanvasGroupIndex;\n    const calculateNextCanvasGroupStrategy =\n      CalculateNextCanvasGroupFactory.create(this.modeService.mode);\n\n    let pannedPastSide: Side | null;\n    let canvasGroupEndHitCountReached = false;\n    if (this.modeService.isPageZoomed()) {\n      pannedPastSide = SwipeUtils.getSideIfPanningPastEndOfCanvasGroup(\n        canvasGroupRect,\n        viewportBounds,\n      );\n      this.swipeDragEndCounter.addHit(pannedPastSide, direction);\n      canvasGroupEndHitCountReached =\n        this.swipeDragEndCounter.hitCountReached();\n    }\n\n    const newCanvasGroupIndex = this.canvasService.constrainToRange(\n      calculateNextCanvasGroupStrategy.calculateNextCanvasGroup({\n        currentCanvasGroupCenter: this.currentCanvasIndex.getValue(),\n        speed: speed,\n        direction: direction,\n        currentCanvasGroupIndex: currentCanvasGroupIndex,\n        canvasGroupEndHitCountReached: canvasGroupEndHitCountReached,\n        viewingDirection: this.manifest.viewingDirection,\n      }),\n    );\n    if (\n      this.modeService.mode === ViewerMode.DASHBOARD ||\n      this.modeService.mode === ViewerMode.PAGE ||\n      (canvasGroupEndHitCountReached && direction)\n    ) {\n      this.goToCanvasGroupStrategy.goToCanvasGroup({\n        canvasGroupIndex: newCanvasGroupIndex,\n        immediately: false,\n        direction: direction,\n      });\n    }\n  }\n\n  private getViewportBounds(): Rect {\n    return this.viewer?.viewport.getBounds();\n  }\n\n  private getOriginalTarget(event: any) {\n    return event.originalTarget\n      ? event.originalTarget\n      : event.originalEvent.target;\n  }\n\n  private panTo(rect: Rect | undefined, immediately = false): void {\n    if (rect) {\n      this.viewer.viewport.panTo(\n        {\n          x: rect.x,\n          y: rect.y,\n        },\n        immediately,\n      );\n    }\n  }\n\n  private rotateToRight() {\n    this.rotation.next((this.rotation.getValue() + 90) % 360);\n  }\n\n  private showRotationIsNotSupportetMessage() {\n    this.snackBar.open(this.intl.rotationIsNotSupported, undefined, {\n      duration: 3000,\n    });\n  }\n\n  private setOpacityOnPages(opacity: number): void {\n    if (this.viewer) {\n      const itemCount = this.viewer.world.getItemCount();\n      for (let i = 0; i < itemCount; i++) {\n        const item = this.viewer.world.getItemAt(i);\n        item.setOpacity(opacity);\n      }\n    }\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { ElementRef, Injectable } from '@angular/core';\nimport { Observable, ReplaySubject, debounceTime, map } from 'rxjs';\nimport { Dimensions } from '../models/dimensions';\nimport { ViewerService } from '../viewer-service/viewer.service';\n\n@Injectable()\nexport class MimeResizeService {\n  private _el!: ElementRef;\n  private resizeSubject: ReplaySubject<DOMRectReadOnly> = new ReplaySubject();\n  private observer!: ResizeObserver;\n\n  constructor(private viewerService: ViewerService) {}\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  get el() {\n    return this._el;\n  }\n\n  get onResize(): Observable<Dimensions> {\n    return this.resizeSubject.pipe(\n      debounceTime(200),\n      map((contentRect: DOMRectReadOnly) => {\n        return {\n          bottom: contentRect.bottom,\n          height: contentRect.height,\n          left: contentRect.left,\n          right: contentRect.right,\n          top: contentRect.top,\n          width: contentRect.width,\n        };\n      })\n    );\n  }\n\n  initialize() {\n    if (this.isResizeObserverSupported()) {\n      this.initializeResizeObserver();\n    }\n  }\n\n  destroy() {\n    this.observer?.disconnect();\n  }\n\n  private isResizeObserverSupported(): boolean {\n    return 'ResizeObserver' in window;\n  }\n\n  private initializeResizeObserver(): void {\n    this.observer = new ResizeObserver((entries: ResizeObserverEntry[]) => {\n      for (const entry of entries) {\n        this.handleResizeEntry(entry);\n      }\n    });\n\n    const el: Element | null = this.el.nativeElement.querySelector(\n      `#${this.viewerService.id}`\n    );\n\n    if (el) {\n      this.observer?.observe(el);\n    }\n  }\n\n  private handleResizeEntry(entry: ResizeObserverEntry): void {\n    this.resizeSubject.next(entry.contentRect);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\n@Injectable()\nexport class FullscreenService {\n  private changeSubject: ReplaySubject<boolean> = new ReplaySubject();\n\n  constructor() {\n    this.onchange();\n  }\n\n  get onChange(): Observable<boolean> {\n    return this.changeSubject.asObservable();\n  }\n\n  public isEnabled(): boolean {\n    const d: any = document;\n    return (\n      d.fullscreenEnabled ||\n      d.webkitFullscreenEnabled ||\n      d.mozFullScreenEnabled ||\n      d.msFullscreenEnabled\n    );\n  }\n\n  public isFullscreen(): boolean {\n    const d: any = document;\n    return (\n      d.fullscreenElement ||\n      d.webkitFullscreenElement ||\n      d.mozFullScreenElement ||\n      d.msFullscreenElement\n    );\n  }\n\n  public toggle(el: HTMLElement) {\n    this.isFullscreen() ? this.closeFullscreen(el) : this.openFullscreen(el);\n  }\n\n  public onchange() {\n    const d: any = document;\n\n    const func = () => {\n      this.changeSubject.next(true);\n    };\n\n    if (d.fullscreenEnabled) {\n      document.addEventListener('fullscreenchange', func);\n    } else if (d.webkitFullscreenEnabled) {\n      document.addEventListener('webkitfullscreenchange', func);\n    } else if (d.mozFullScreenEnabled) {\n      document.addEventListener('mozfullscreenchange', func);\n    } else if (d.msFullscreenEnabled) {\n      document.addEventListener('msfullscreenchange', func);\n    }\n  }\n\n  private openFullscreen(elem: any) {\n    if (elem.requestFullscreen) {\n      elem.requestFullscreen();\n    } else if (elem.mozRequestFullScreen) {\n      elem.mozRequestFullScreen();\n    } else if (elem.webkitRequestFullscreen) {\n      elem.webkitRequestFullscreen();\n    } else if (elem.msRequestFullscreen) {\n      elem.msRequestFullscreen();\n    }\n  }\n\n  private closeFullscreen(elem: any) {\n    const d = <any>document;\n    if (d.exitFullscreen) {\n      d.exitFullscreen();\n    } else if (d.mozCancelFullScreen) {\n      d.mozCancelFullScreen();\n    } else if (d.webkitExitFullscreen) {\n      d.webkitExitFullscreen();\n    } else if (d.msExitFullscreen) {\n      d.msExitFullscreen();\n    }\n  }\n}\n","import { ElementRef, Injectable } from '@angular/core';\nimport { FullscreenService } from './fullscreen-service/fullscreen.service';\nimport { Dimensions } from './models/dimensions';\nimport { ViewerService } from './viewer-service/viewer.service';\n\n@Injectable()\nexport class MimeDomHelper {\n  constructor(\n    private fullscreen: FullscreenService,\n    private viewerService: ViewerService\n  ) {}\n\n  public getBoundingClientRect(el: ElementRef): Dimensions {\n    try {\n      if (\n        this.isDocumentInFullScreenMode() &&\n        el.nativeElement.nodeName === 'MIME-VIEWER'\n      ) {\n        return this.createFullscreenDimensions(el);\n      } else {\n        return this.createDimensions(el);\n      }\n    } catch (e) {\n      return new Dimensions();\n    }\n  }\n\n  public isDocumentInFullScreenMode(): boolean {\n    return this.fullscreen.isFullscreen();\n  }\n\n  public toggleFullscreen(): void {\n    const el = this.getViewerElement();\n    if (el && this.fullscreen.isEnabled()) {\n      this.fullscreen.toggle(el);\n    }\n  }\n\n  public setFocusOnViewer(): void {\n    const el = this.getViewerElement();\n    if (el) {\n      el.focus();\n    }\n  }\n\n  private getViewerElement(): HTMLElement | null {\n    return document.querySelector(`#${this.viewerService.id}`);\n  }\n\n  private createFullscreenDimensions(el: ElementRef): Dimensions {\n    const dimensions = el.nativeElement.getBoundingClientRect();\n    const width = this.getFullscreenWidth();\n    const height = this.getFullscreenHeight();\n    return new Dimensions({\n      ...dimensions,\n      top: 0,\n      bottom: height,\n      width: width,\n      height: height,\n      left: 0,\n      right: width,\n    });\n  }\n\n  private createDimensions(el: ElementRef): Dimensions {\n    const dimensions = el.nativeElement.getBoundingClientRect();\n    return new Dimensions({\n      top: dimensions.top,\n      bottom: dimensions.bottom,\n      width: dimensions.width,\n      height: dimensions.height,\n      left: dimensions.left,\n      right: dimensions.right,\n    });\n  }\n\n  private getFullscreenWidth(): number {\n    return (\n      window.innerWidth ||\n      document.documentElement.clientWidth ||\n      document.body.clientWidth\n    );\n  }\n\n  private getFullscreenHeight(): number {\n    return (\n      window.innerHeight ||\n      document.documentElement.clientHeight ||\n      document.body.clientHeight\n    );\n  }\n}\n","import { ElementRef, ViewContainerRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { MimeDomHelper } from './../core/mime-dom-helper';\nimport { Dimensions } from './../core/models/dimensions';\n\nexport interface ContentSearchDialogConfigStrategy {\n  getConfig(\n    elementRef: ElementRef | null,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig;\n}\n\nexport class MobileContentSearchDialogConfigStrategy\n  implements ContentSearchDialogConfigStrategy\n{\n  public getConfig(\n    elementRef: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      autoFocus: false,\n      width: '100%',\n      height: '100%',\n      maxWidth: '100% !important',\n      panelClass: 'content-search-panel',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n}\n\nexport class DesktopContentSearchDialogConfigStrategy\n  implements ContentSearchDialogConfigStrategy\n{\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(\n    el: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      autoFocus: false,\n      width: `${DesktopContentSearchDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px',\n      },\n      maxWidth: '100% !important',\n      panelClass: 'content-search-panel',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopContentSearchDialogConfigStrategy.dialogWidth -\n        DesktopContentSearchDialogConfigStrategy.paddingRight,\n    });\n  }\n}\n","import { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Injectable } from '@angular/core';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  ContentSearchDialogConfigStrategy,\n  DesktopContentSearchDialogConfigStrategy,\n  MobileContentSearchDialogConfigStrategy,\n} from './content-search-dialog-config-strategy';\n\n@Injectable()\nexport class ContentSearchDialogConfigStrategyFactory {\n  constructor(\n    private breakpointObserver: BreakpointObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): ContentSearchDialogConfigStrategy {\n    const isHandsetOrTabletInPortrait = this.breakpointObserver.isMatched([\n      Breakpoints.Handset,\n      Breakpoints.TabletPortrait,\n    ]);\n\n    return isHandsetOrTabletInPortrait\n      ? new MobileContentSearchDialogConfigStrategy()\n      : new DesktopContentSearchDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, Subject, Subscription } from 'rxjs';\nimport { distinctUntilChanged } from 'rxjs/operators';\nimport { CanvasService } from '../../canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../../iiif-content-search-service/iiif-content-search.service';\nimport { Hit } from '../../models/hit';\nimport { SearchResult } from '../../models/search-result';\n\n@Injectable()\nexport class ContentSearchNavigationService {\n  private currentIndex = 0;\n  private lastHitIndex = 0;\n  private isHitOnActiveCanvasGroup = false;\n  private currentHit: Hit | null = null;\n  private canvasesPerCanvasGroup = [-1];\n  private searchResult: SearchResult | null = null;\n  private subscriptions!: Subscription;\n  private _currentHitCounter$: Subject<number> = new Subject<number>();\n\n  constructor(\n    private canvasService: CanvasService,\n    private iiifContentSearchService: IiifContentSearchService,\n  ) {\n    this.initialize();\n  }\n\n  initialize() {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe(\n        (result: SearchResult) => {\n          this.searchResult = result;\n          this.currentHit = null;\n          this.update(this.canvasService.currentCanvasGroupIndex);\n        },\n      ),\n    );\n  }\n\n  destroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  update(canvasGroupIndex: number) {\n    this.canvasesPerCanvasGroup =\n      this.canvasService.getCanvasesPerCanvasGroup(canvasGroupIndex);\n    this.currentIndex = this.findCurrentHitIndex(this.canvasesPerCanvasGroup);\n    this.lastHitIndex = this.findLastHitIndex(this.canvasesPerCanvasGroup);\n    this.isHitOnActiveCanvasGroup = this.findHitOnActiveCanvasGroup();\n    this._currentHitCounter$.next(this.updateCurrentHitCounter());\n  }\n\n  get currentHitCounter(): Observable<number> {\n    return this._currentHitCounter$.pipe(distinctUntilChanged());\n  }\n\n  getHitOnActiveCanvasGroup(): boolean {\n    return this.isHitOnActiveCanvasGroup;\n  }\n\n  goToNextHit() {\n    if (this.isCurrentHitOnCurrentCanvasGroup()) {\n      this.goToNextCurrentCanvasHit();\n    } else {\n      this.goToNextCanvasHit();\n    }\n  }\n\n  goToPreviousHit() {\n    if (this.isCurrentHitOnCurrentCanvasGroup()) {\n      this.goToPreviousCurrentCanvasHit();\n    } else {\n      this.goToPreviousCanvasHit();\n    }\n  }\n\n  selected(hit: Hit): void {\n    this.currentHit = hit;\n    this._currentHitCounter$.next(this.currentHit.id);\n    this.currentIndex = this.currentHit.index;\n    this.iiifContentSearchService.selected(hit);\n  }\n\n  private updateCurrentHitCounter(): number {\n    if (this.isCurrentHitOnCurrentCanvasGroup()) {\n      if (this.currentHit) {\n        return this.currentHit.id;\n      }\n    }\n    if (this.isHitOnActiveCanvasGroup) {\n      return this.currentIndex;\n    } else {\n      return this.lastHitIndex;\n    }\n  }\n\n  private goToNextCurrentCanvasHit() {\n    if (this.searchResult && this.currentHit) {\n      const currentHitId = this.currentHit.id;\n      if (currentHitId < this.searchResult.hits.length - 1) {\n        this.selected(this.searchResult.hits[currentHitId + 1]);\n      }\n    }\n  }\n\n  private goToPreviousCurrentCanvasHit() {\n    if (this.searchResult && this.currentHit) {\n      const currentHitId = this.currentHit.id;\n      if (currentHitId > 0) {\n        this.selected(this.searchResult.hits[this.currentHit.id - 1]);\n      }\n    }\n  }\n\n  private goToNextCanvasHit() {\n    if (this.searchResult) {\n      let nextHit: Hit | undefined;\n      if (this.currentIndex === -1) {\n        nextHit = this.searchResult.get(0);\n      } else {\n        if (this.isHitOnActiveCanvasGroup) {\n          nextHit = this.searchResult.hits.find(\n            (hit) => hit.id === this.currentIndex,\n          );\n        } else {\n          const current = this.searchResult.get(this.currentIndex);\n          const canvasGroup = this.canvasService.findCanvasGroupByCanvasIndex(\n            current.index,\n          );\n          const canvasesPerCanvasGroup =\n            this.canvasService.getCanvasesPerCanvasGroup(canvasGroup);\n          const lastCanvasGroupIndex = this.getLastCanvasGroupIndex(\n            canvasesPerCanvasGroup,\n          );\n          nextHit = this.searchResult.hits.find(\n            (h) => h.index > lastCanvasGroupIndex,\n          );\n        }\n      }\n      if (nextHit) {\n        this.selected(nextHit);\n      }\n    }\n  }\n\n  private goToPreviousCanvasHit() {\n    if (this.searchResult) {\n      if (this.isHitOnActiveCanvasGroup) {\n        this.selected(this.searchResult.hits[this.currentIndex]);\n      } else {\n        this.selected(this.searchResult.hits[this.lastHitIndex]);\n      }\n    }\n  }\n\n  private findHitOnActiveCanvasGroup(): boolean {\n    if (!this.searchResult || this.currentIndex === -1) {\n      return false;\n    }\n    return (\n      this.canvasesPerCanvasGroup?.indexOf(\n        this.searchResult.get(this.currentIndex).index,\n      ) >= 0\n    );\n  }\n\n  private findCurrentHitIndex(canvasGroupIndexes: number[]): number {\n    if (!this.searchResult) {\n      return -1;\n    }\n\n    if (canvasGroupIndexes) {\n      for (let i = 0; i < this.searchResult.size(); i++) {\n        const hit = this.searchResult.get(i);\n        if (canvasGroupIndexes.indexOf(hit.index) >= 0) {\n          return i;\n        }\n        if (hit.index >= canvasGroupIndexes[canvasGroupIndexes.length - 1]) {\n          if (i === 0) {\n            return -1;\n          } else {\n            const phit = this.searchResult.get(i - 1);\n            return this.searchResult.hits.findIndex(\n              (sr) => sr.index === phit.index,\n            );\n          }\n        }\n      }\n    }\n    return this.searchResult.size() - 1;\n  }\n\n  private findLastHitIndex(canvasGroupIndexes: number[]): number {\n    if (!this.searchResult || !canvasGroupIndexes) {\n      return -1;\n    }\n    const hits = this.searchResult.hits.filter(\n      (hit) => hit.index < canvasGroupIndexes[0],\n    );\n    return hits.length > 0 ? hits[hits.length - 1].id : -1;\n  }\n\n  private getLastCanvasGroupIndex(canvasesPerCanvasGroup: number[]) {\n    return canvasesPerCanvasGroup.length === 1\n      ? canvasesPerCanvasGroup[0]\n      : canvasesPerCanvasGroup[1];\n  }\n\n  private isCurrentHitOnCurrentCanvasGroup(): boolean {\n    if (this.currentHit) {\n      const canvasGroup = this.canvasService.findCanvasGroupByCanvasIndex(\n        this.canvasService.currentCanvasIndex,\n      );\n      const canvasesPerCanvasGroup =\n        this.canvasService.getCanvasesPerCanvasGroup(canvasGroup);\n      return canvasesPerCanvasGroup.indexOf(this.currentHit.index) !== -1;\n    } else {\n      return false;\n    }\n  }\n}\n","import {\n  BreakpointObserver,\n  BreakpointState,\n  Breakpoints,\n} from '@angular/cdk/layout';\nimport {\n  AfterViewInit,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  QueryList,\n  ViewChild,\n  ViewChildren,\n} from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { ContentSearchNavigationService } from '../core/navigation/content-search-navigation-service/content-search-navigation.service';\nimport { IiifContentSearchService } from './../core/iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from './../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../core/intl';\nimport { MimeResizeService } from './../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from './../core/models/dimensions';\nimport { Hit } from './../core/models/hit';\nimport { Manifest } from './../core/models/manifest';\nimport { SearchResult } from './../core/models/search-result';\n\n@Component({\n  selector: 'mime-search',\n  templateUrl: './content-search-dialog.component.html',\n  styleUrls: ['./content-search-dialog.component.scss'],\n})\nexport class ContentSearchDialogComponent\n  implements OnInit, AfterViewInit, OnDestroy\n{\n  public q = '';\n  public hits: Hit[] = [];\n  public currentHit: Hit | null = null;\n  public currentSearch: string | null = null;\n  public numberOfHits = 0;\n  public isSearching = false;\n  public tabHeight = { maxHeight: '100px' };\n  isHandsetOrTabletInPortrait = false;\n  private manifest: Manifest | null = null;\n  private mimeHeight = 0;\n  private subscriptions = new Subscription();\n  @ViewChild('contentSearchResult', { static: true })\n  resultContainer!: ElementRef;\n  @ViewChild('query', { static: true }) qEl!: ElementRef;\n  @ViewChildren('hitButton', { read: ElementRef })\n  hitList!: QueryList<ElementRef>;\n\n  constructor(\n    public dialogRef: MatDialogRef<ContentSearchDialogComponent>,\n    public intl: MimeViewerIntl,\n    private breakpointObserver: BreakpointObserver,\n    private cdr: ChangeDetectorRef,\n    private mimeResizeService: MimeResizeService,\n    private iiifManifestService: IiifManifestService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private contentSearchNavigationService: ContentSearchNavigationService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.breakpointObserver\n        .observe([Breakpoints.Handset, Breakpoints.TabletPortrait])\n        .subscribe(\n          (value: BreakpointState) =>\n            (this.isHandsetOrTabletInPortrait = value.matches)\n        )\n    );\n\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe((sr: SearchResult) => {\n        this.hits = sr.hits;\n        this.currentSearch = sr.q ? sr.q : '';\n        this.q = sr.q;\n        this.numberOfHits = sr.size();\n        if (this.resultContainer !== null && this.numberOfHits > 0) {\n          this.resultContainer.nativeElement.focus();\n        } else if (this.q.length === 0 || this.numberOfHits === 0) {\n          this.qEl.nativeElement.focus();\n        }\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.isSearching.subscribe((s: boolean) => {\n        this.isSearching = s;\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onSelected.subscribe((hit: Hit | null) => {\n        if (hit === null) {\n          this.currentHit = hit;\n        } else {\n          if (!this.currentHit || this.currentHit.id !== hit.id) {\n            this.currentHit = hit;\n            this.scrollCurrentHitIntoView();\n          }\n        }\n      })\n    );\n\n    this.resizeTabHeight();\n  }\n\n  ngAfterViewInit() {\n    this.scrollCurrentHitIntoView();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  onSubmit(event: KeyboardEvent) {\n    event.preventDefault();\n    this.search();\n  }\n\n  clear() {\n    this.q = '';\n    this.search();\n  }\n\n  goToHit(hit: Hit): void {\n    this.currentHit = hit;\n    this.contentSearchNavigationService.selected(hit);\n    if (this.isHandsetOrTabletInPortrait) {\n      this.dialogRef.close();\n    }\n  }\n\n  private search() {\n    this.currentSearch = this.q;\n    if (this.manifest) {\n      this.iiifContentSearchService.search(this.manifest, this.q);\n    }\n  }\n\n  private resizeTabHeight(): void {\n    let height = this.mimeHeight;\n\n    if (this.isHandsetOrTabletInPortrait) {\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px',\n      };\n    } else {\n      height -= 272;\n      this.tabHeight = {\n        maxHeight: height + 'px',\n      };\n    }\n    this.cdr.detectChanges();\n  }\n\n  private scrollCurrentHitIntoView() {\n    this.iiifContentSearchService.onSelected\n      .pipe(take(1))\n      .subscribe((hit: Hit | null) => {\n        if (hit !== null) {\n          const selected = this.findSelected(hit);\n          if (selected) {\n            selected.nativeElement.focus();\n          }\n        }\n      });\n  }\n\n  private findSelected(selectedHit: Hit): ElementRef | null {\n    if (this.hitList) {\n      const selectedList = this.hitList.filter(\n        (item: ElementRef, index: number) => index === selectedHit.id\n      );\n      return selectedList.length > 0 ? selectedList[0] : null;\n    } else {\n      return null;\n    }\n  }\n}\n","<div class=\"content-search-container\">\n  @if (isHandsetOrTabletInPortrait) {\n    <mat-toolbar color=\"primary\">\n      <button\n        mat-icon-button\n        class=\"close-content-search-dialog-button\"\n        [aria-label]=\"intl.closeLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        [matDialogClose]=\"true\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n      <h1 mat-dialog-title class=\"heading\">{{ intl.searchLabel }}</h1>\n    </mat-toolbar>\n  } @else {\n    <mat-toolbar class=\"justify-between\">\n      <h1 mat-dialog-title class=\"heading heading-desktop\">{{\n        intl.searchLabel\n      }}</h1>\n      <button\n        mat-icon-button\n        class=\"close-content-search-dialog-button\"\n        [aria-label]=\"intl.closeLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        [matDialogClose]=\"true\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n    </mat-toolbar>\n  }\n  <mat-dialog-content class=\"content-search-form\">\n    <form (ngSubmit)=\"onSubmit($event)\" #searchForm=\"ngForm\">\n      <mat-form-field class=\"content-search-box\">\n        <button\n          type=\"submit\"\n          matPrefix\n          mat-icon-button\n          [attr.aria-label]=\"intl.searchLabel\"\n          [matTooltip]=\"intl.searchLabel\"\n        >\n          <mat-icon class=\"icon\">search</mat-icon>\n        </button>\n        <input\n          #query\n          cdkFocusInitial\n          matInput\n          class=\"content-search-input\"\n          [(ngModel)]=\"q\"\n          [attr.aria-label]=\"intl.searchLabel\"\n          name=\"q\"\n          autocomplete=\"off\"\n        />\n        @if (q) {\n          <button\n            type=\"button\"\n            class=\"clearSearchButton\"\n            matSuffix\n            mat-icon-button\n            [attr.aria-label]=\"intl.clearSearchLabel\"\n            [matTooltip]=\"intl.clearSearchLabel\"\n            [disabled]=\"isSearching\"\n            (click)=\"clear()\"\n          >\n            <mat-icon class=\"icon\">clear</mat-icon>\n          </button>\n        }\n      </mat-form-field>\n    </form>\n    <div\n      #contentSearchResult\n      class=\"content-search-result-container\"\n      [ngStyle]=\"tabHeight\"\n    >\n      <div class=\"content-search-result\">\n        @if (!isSearching) {\n          <input type=\"hidden\" class=\"numberOfHits\" [value]=\"numberOfHits\" />\n          @if (currentSearch && currentSearch.length > 0) {\n            @if (numberOfHits > 0) {\n              <div\n                data-testid=\"resultsFoundLabel\"\n                [innerHTML]=\"\n                  intl.resultsFoundLabel(numberOfHits, currentSearch)\n                \"\n              ></div>\n            } @else {\n              <div\n                data-testid=\"noResultsFoundLabel\"\n                [innerHTML]=\"intl.noResultsFoundLabel(currentSearch)\"\n              ></div>\n            }\n          }\n          @for (hit of hits; track hit.id; let last = $last) {\n            <button\n              #hitButton\n              mat-button\n              [color]=\"currentHit && hit.id === currentHit.id ? 'accent' : null\"\n              [ngClass]=\"'hit'\"\n              (click)=\"goToHit(hit)\"\n              (keydown.enter)=\"goToHit(hit)\"\n            >\n              <div class=\"flex items-start justify-between\">\n                <div class=\"summary\"\n                  >{{ hit.before }} <em>{{ hit.match }}</em>\n                  {{ hit.after }}</div\n                >\n                <div class=\"canvasGroup ml-2\">{{ hit.index + 1 }}</div>\n              </div>\n            </button>\n            @if (!last) {\n              <mat-divider></mat-divider>\n            }\n          }\n        }\n        @if (isSearching) {\n          <mat-progress-bar mode=\"indeterminate\"></mat-progress-bar>\n        }\n      </div>\n    </div>\n  </mat-dialog-content>\n</div>\n","import { ElementRef, Injectable, ViewContainerRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n  MatDialogState,\n} from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { MimeResizeService } from './../core/mime-resize-service/mime-resize.service';\nimport { ContentSearchDialogConfigStrategyFactory } from './content-search-dialog-config-strategy-factory';\nimport { ContentSearchDialogComponent } from './content-search-dialog.component';\n\n@Injectable()\nexport class ContentSearchDialogService {\n  private _el: ElementRef | undefined;\n  private _viewContainerRef: ViewContainerRef | undefined;\n  private dialogRef?: MatDialogRef<ContentSearchDialogComponent>;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private contentSearchDialogConfigStrategyFactory: ContentSearchDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((rect) => {\n        if (this.isOpen()) {\n          const config = this.getDialogConfig();\n          this.dialogRef?.updatePosition(config.position);\n          this.dialogRef?.updateSize(config.width, config.height);\n        }\n      })\n    );\n  }\n\n  public destroy(): void {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  set viewContainerRef(viewContainerRef: ViewContainerRef) {\n    this._viewContainerRef = viewContainerRef;\n  }\n\n  public open(): void {\n    if (!this.isOpen()) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(ContentSearchDialogComponent, config);\n    }\n  }\n\n  public close(): void {\n    if (this.isOpen()) {\n      this.dialogRef?.close();\n    }\n  }\n\n  public toggle(): void {\n    this.isOpen() ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.dialogRef?.getState() === MatDialogState.OPEN;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    if (!this._el || !this._viewContainerRef) {\n      throw new Error('No element or viewContainerRef');\n    }\n\n    return this.contentSearchDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el, this._viewContainerRef);\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { ElementRef, ViewContainerRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { Dimensions } from './../core/models/dimensions';\n\nexport interface InformationDialogConfigStrategy {\n  getConfig(\n    elementRef: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig;\n}\n\nexport class MobileInformationDialogConfigStrategy\n  implements InformationDialogConfigStrategy\n{\n  public getConfig(\n    elementRef: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      width: '100%',\n      height: '100%',\n      maxWidth: '100% !important',\n      panelClass: 'information-panel',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n}\n\nexport class DesktopInformationDialogConfigStrategy\n  implements InformationDialogConfigStrategy\n{\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(\n    el: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      width: `${DesktopInformationDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px',\n      },\n      maxWidth: '100% !important',\n      panelClass: 'information-panel',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopInformationDialogConfigStrategy.dialogWidth -\n        DesktopInformationDialogConfigStrategy.paddingRight,\n    });\n  }\n}\n","import { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Injectable } from '@angular/core';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  DesktopInformationDialogConfigStrategy,\n  InformationDialogConfigStrategy,\n  MobileInformationDialogConfigStrategy,\n} from './information-dialog-config-strategy';\n\n@Injectable()\nexport class InformationDialogConfigStrategyFactory {\n  constructor(\n    private breakpointObserver: BreakpointObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): InformationDialogConfigStrategy {\n    const isHandsetOrTabletInPortrait = this.breakpointObserver.isMatched([\n      Breakpoints.Handset,\n      Breakpoints.TabletPortrait,\n    ]);\n\n    return isHandsetOrTabletInPortrait\n      ? new MobileInformationDialogConfigStrategy()\n      : new DesktopInformationDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { IiifManifestService } from './../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../../core/intl';\nimport { Manifest } from './../../core/models/manifest';\n\n@Component({\n  selector: 'mime-metadata',\n  templateUrl: './metadata.component.html',\n  styleUrls: ['./metadata.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class MetadataComponent implements OnInit, OnDestroy {\n  public manifest: Manifest | null = null;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.changeDetectorRef.markForCheck();\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n}\n","@if (manifest) {\n  <div class=\"ngx-mime-metadata-container\">\n    @for (metadata of manifest.metadata; track metadata.label) {\n      <div class=\"metadata\">\n        <div class=\"title\">{{ metadata.label }}</div>\n        <span class=\"content\" [innerHTML]=\"metadata.value\"></span>\n      </div>\n    }\n    @if (manifest.attribution) {\n      <div class=\"title\">{{ intl.attributionLabel }}</div>\n      <span\n        class=\"content attribution\"\n        [innerHTML]=\"manifest.attribution\"\n      ></span>\n    }\n    @if (manifest.license) {\n      <div class=\"title\">{{ intl.licenseLabel }}</div>\n      <span class=\"content license\"\n        ><a [href]=\"manifest.license\" target=\"_blank\">{{\n          manifest.license\n        }}</a></span\n      >\n    }\n    @if (manifest.logo) {\n      <img aria-hidden=\"true\" class=\"content logo\" [src]=\"manifest.logo\" />\n    }\n  </div>\n}\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  EventEmitter,\n  OnDestroy,\n  OnInit,\n  Output,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { CanvasService } from '../../core/canvas-service/canvas-service';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../../core/intl';\nimport { Manifest } from '../../core/models/manifest';\nimport { ViewerService } from '../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-toc',\n  templateUrl: './table-of-contents.component.html',\n  styleUrls: ['./table-of-contents.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class TocComponent implements OnInit, OnDestroy {\n  @Output()\n  canvasChanged: EventEmitter<number> = new EventEmitter();\n  public manifest: Manifest | null = null;\n  public currentCanvasGroupIndex = 0;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.currentCanvasGroupIndex =\n            this.canvasService.currentCanvasGroupIndex;\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.viewerService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex: number) => {\n          this.currentCanvasGroupIndex = canvasGroupIndex;\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  goToCanvas(event: Event, canvasIndex: number | undefined): void {\n    if (canvasIndex !== undefined) {\n      event.preventDefault();\n      this.viewerService.goToCanvas(canvasIndex, false);\n      this.canvasChanged.emit(canvasIndex);\n    }\n  }\n}\n","<div class=\"ngx-mime-toc-container\">\n  @for (structure of manifest?.structures; track structure.id) {\n    <a\n      class=\"toc-link flex justify-between\"\n      href=\"\"\n      [class.currentCanvasGroup]=\"\n        currentCanvasGroupIndex === structure.canvasIndex\n      \"\n      (click)=\"goToCanvas($event, structure.canvasIndex)\"\n    >\n      <span class=\"label\">{{ structure.label }}</span>\n      <span class=\"canvasGroupIndex\">{{ structure.canvasIndex + 1 }}</span>\n    </a>\n  }\n</div>\n","import {\n  BreakpointObserver,\n  BreakpointState,\n  Breakpoints,\n} from '@angular/cdk/layout';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../core/intl';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\nimport { Manifest } from './../core/models/manifest';\n\n@Component({\n  selector: 'mime-information',\n  templateUrl: './information-dialog.component.html',\n  styleUrls: ['./information-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class InformationDialogComponent implements OnInit, OnDestroy {\n  public manifest: Manifest | null = null;\n  public tabHeight = {};\n  public showToc = false;\n  public selectedIndex = 0;\n  isHandsetOrTabletInPortrait = false;\n  private mimeHeight = 0;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private breakpointObserver: BreakpointObserver,\n    private dialogRef: MatDialogRef<InformationDialogComponent>,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifManifestService: IiifManifestService,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.breakpointObserver\n        .observe([Breakpoints.Handset, Breakpoints.TabletPortrait])\n        .subscribe(\n          (value: BreakpointState) =>\n            (this.isHandsetOrTabletInPortrait = value.matches)\n        )\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.showToc =\n            this.manifest !== null &&\n            this.manifest.structures !== undefined &&\n            this.manifest.structures.length > 0;\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      })\n    );\n\n    this.resizeTabHeight();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  onCanvasChanged() {\n    if (this.isHandsetOrTabletInPortrait) {\n      this.dialogRef.close();\n    }\n  }\n\n  private resizeTabHeight(): void {\n    let height = this.mimeHeight;\n\n    if (this.isHandsetOrTabletInPortrait) {\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px',\n      };\n    } else {\n      height -= 278;\n      this.tabHeight = {\n        maxHeight: height + 'px',\n      };\n    }\n    this.changeDetectorRef.detectChanges();\n  }\n}\n","<div class=\"information-container\">\n  @if (isHandsetOrTabletInPortrait) {\n    <mat-toolbar color=\"primary\" data-testid=\"mobile-toolbar\">\n      <button\n        mat-icon-button\n        [aria-label]=\"intl.closeLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        [matDialogClose]=\"true\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n      <h1 mat-dialog-title>{{ intl.informationLabel }}</h1>\n    </mat-toolbar>\n  } @else {\n    <mat-toolbar data-testid=\"desktop-toolbar\" class=\"justify-between\">\n      <h1 mat-dialog-title>{{ intl.informationLabel }}</h1>\n      <button\n        mat-icon-button\n        [aria-label]=\"intl.closeLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        [matDialogClose]=\"true\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n    </mat-toolbar>\n  }\n  <div mat-dialog-content>\n    <mat-tab-group [(selectedIndex)]=\"selectedIndex\">\n      <mat-tab [label]=\"intl.metadataLabel\">\n        <div class=\"tab-container\" [ngStyle]=\"tabHeight\">\n          <mime-metadata></mime-metadata>\n        </div>\n      </mat-tab>\n      @if (showToc) {\n        <mat-tab [label]=\"intl.tocLabel\">\n          <div class=\"tab-container\" [ngStyle]=\"tabHeight\">\n            <mime-toc (canvasChanged)=\"onCanvasChanged()\"></mime-toc>\n          </div>\n        </mat-tab>\n      }\n    </mat-tab-group>\n  </div>\n</div>\n","import { ElementRef, Injectable, ViewContainerRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n  MatDialogState,\n} from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { InformationDialogConfigStrategyFactory } from './information-dialog-config-strategy-factory';\nimport { InformationDialogComponent } from './information-dialog.component';\n\n@Injectable()\nexport class InformationDialogService {\n  private _el: ElementRef | undefined;\n  private _viewContainerRef: ViewContainerRef | undefined;\n  private dialogRef?: MatDialogRef<InformationDialogComponent>;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private informationDialogConfigStrategyFactory: InformationDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((rect) => {\n        if (this.isOpen()) {\n          const config = this.getDialogConfig();\n          this.dialogRef?.updatePosition(config.position);\n          this.dialogRef?.updateSize(config.width, config.height);\n        }\n      })\n    );\n  }\n\n  public destroy() {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  set viewContainerRef(viewContainerRef: ViewContainerRef) {\n    this._viewContainerRef = viewContainerRef;\n  }\n\n  public open(selectedIndex?: number): void {\n    if (!this.isOpen()) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(InformationDialogComponent, config);\n\n      if (selectedIndex) {\n        this.dialogRef.componentInstance.selectedIndex = selectedIndex;\n      }\n    }\n  }\n\n  public close(): void {\n    if (this.isOpen()) {\n      this.dialogRef?.close();\n    }\n  }\n\n  public toggle(): void {\n    this.isOpen() ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.dialogRef?.getState() === MatDialogState.OPEN;\n  }\n\n  public getSelectedIndex(): number {\n    return this.dialogRef?.componentInstance?.selectedIndex ?? 0;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    if (!this._el || !this._viewContainerRef) {\n      throw new Error('No element or viewContainerRef');\n    }\n\n    return this.informationDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el, this._viewContainerRef);\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { ElementRef, ViewContainerRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { Dimensions } from '../core/models/dimensions';\n\nexport interface ViewDialogConfigStrategy {\n  getConfig(\n    elementRef: ElementRef | null,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig;\n}\n\nexport class MobileViewDialogConfigStrategy\n  implements ViewDialogConfigStrategy\n{\n  public getConfig(\n    elementRef: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      autoFocus: false,\n      width: '100%',\n      height: '100%',\n      maxWidth: '100% !important',\n      panelClass: 'view-panel',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n}\n\nexport class DesktopViewDialogConfigStrategy\n  implements ViewDialogConfigStrategy\n{\n  public static readonly dialogWidth = 250;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(\n    el: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      autoFocus: true,\n      width: `${DesktopViewDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px',\n      },\n      panelClass: 'view-panel',\n      maxWidth: '100% !important',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopViewDialogConfigStrategy.dialogWidth -\n        DesktopViewDialogConfigStrategy.paddingRight,\n    });\n  }\n}\n","import { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Injectable } from '@angular/core';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  DesktopViewDialogConfigStrategy,\n  MobileViewDialogConfigStrategy,\n  ViewDialogConfigStrategy,\n} from './view-dialog-config-strategy';\n\n@Injectable()\nexport class ViewDialogConfigStrategyFactory {\n  constructor(\n    private breakpointObserver: BreakpointObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): ViewDialogConfigStrategy {\n    const isHandsetOrTabletInPortrait = this.breakpointObserver.isMatched([\n      Breakpoints.Handset,\n      Breakpoints.TabletPortrait,\n    ]);\n\n    return isHandsetOrTabletInPortrait\n      ? new MobileViewDialogConfigStrategy()\n      : new DesktopViewDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\n\n@Component({\n  selector: 'mime-icon',\n  templateUrl: './icon.component.html',\n  styleUrls: ['./icon.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class IconComponent {\n  @Input() iconName = '';\n}\n","<div class=\"mat-icon\">\n  @if (iconName === 'single_page_display') {\n    <div class=\"single-page-display\">\n      <svg\n        version=\"1.1\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n        xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n        viewBox=\"0 0 90 90\"\n        preserveAspectRatio=\"xMidYMin slice\"\n      >\n        <style type=\"text/css\">\n          .st0 {\n            clip-path: url(#SVGID_2_);\n          }\n        </style>\n        <g>\n          <defs><rect width=\"100%\" height=\"100%\" /></defs>\n          <clipPath>\n            <use xlink:href=\"#SVGID_1_\" style=\"overflow: visible\" />\n          </clipPath>\n          <path\n            class=\"st0\"\n            d=\"M21.7,25.2H8.3v2.7h13.4V25.2z M21.7,18.1H8.3v2.7h13.4V18.1z M26.1,31.8H4V4.1h13.6v8.4h8.5V31.8z M30,31.6\n          V11.4L18.7,0H4.3C4.3,0,0,0,0,4.3v27.4c0,0,0,4.3,4.3,4.3h21.5C25.8,35.9,30,35.9,30,31.6\"\n          />\n        </g>\n      </svg>\n    </div>\n  } @else if (iconName === 'two_page_display') {\n    <svg\n      version=\"1.1\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n      xmlns:xlink=\"http://www.w3.org/1999/xlink\"\n      viewBox=\"0 0 90 90\"\n      preserveAspectRatio=\"xMidYMin slice\"\n    >\n      <style type=\"text/css\">\n        .st0 {\n          clip-path: url(#SVGID_2_);\n        }\n      </style>\n      <g>\n        <defs><rect width=\"100%\" height=\"100%\" /></defs>\n        <clipPath>\n          <use xlink:href=\"#SVGID_3_\" style=\"overflow: visible\" />\n        </clipPath>\n        <path\n          class=\"st0\"\n          d=\"M52.5,25.2H39.1v2.7h13.4V25.2z M52.5,18.1H39.1v2.7h13.4V18.1z M56.8,31.8H34.7V4.1h13.6v8.4h8.5V31.8z\n        M60.8,31.6V11.4L49.4,0H35c0,0-4.3,0-4.3,4.3v27.4c0,0,0,4.3,4.3,4.3h21.5C56.6,35.9,60.8,35.9,60.8,31.6\"\n        />\n        <path\n          class=\"st0\"\n          d=\"M21.7,25.2H8.3v2.7h13.4V25.2z M21.7,18.1H8.3v2.7h13.4V18.1z M21.7,11.1H8.3v2.7h13.4V11.1z M26.1,31.8H4V4.1\n       h22.1V31.8z M30,31.6V4.3c0,0,0-4.3-4.3-4.3H4.3C4.3,0,0,0,0,4.3v27.4c0,0,0,4.3,4.3,4.3h21.5C25.8,35.9,30,35.9,30,31.6\"\n        />\n      </g>\n    </svg>\n  }\n</div>\n","import {\n  BreakpointObserver,\n  BreakpointState,\n  Breakpoints,\n} from '@angular/cdk/layout';\nimport { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { AltoService } from '../core/alto-service/alto.service';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { ManifestUtils } from '../core/iiif-manifest-service/iiif-manifest-utils';\nimport { MimeViewerIntl } from '../core/intl';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { RecognizedTextMode, RecognizedTextModeChanges } from '../core/models';\nimport { Dimensions } from '../core/models/dimensions';\nimport { Manifest } from '../core/models/manifest';\nimport { ViewerLayout } from '../core/models/viewer-layout';\nimport { ViewerLayoutService } from '../core/viewer-layout-service/viewer-layout-service';\n\n@Component({\n  selector: 'mime-view-dialog',\n  templateUrl: './view-dialog.component.html',\n  styleUrls: ['./view-dialog.component.scss'],\n})\nexport class ViewDialogComponent implements OnInit, OnDestroy {\n  isHandsetOrTabletInPortrait = false;\n  viewerLayout: ViewerLayout = ViewerLayout.ONE_PAGE;\n  ViewerLayout: typeof ViewerLayout = ViewerLayout;\n  isPagedManifest = false;\n  hasRecognizedTextContent = false;\n  recognizedTextMode = RecognizedTextMode.NONE;\n  RecognizedTextMode: typeof RecognizedTextMode = RecognizedTextMode;\n  contentStyle: any;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private breakpointObserver: BreakpointObserver,\n    private cdr: ChangeDetectorRef,\n    private viewerLayoutService: ViewerLayoutService,\n    private iiifManifestService: IiifManifestService,\n    private altoService: AltoService,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  ngOnInit(): void {\n    this.subscriptions.add(\n      this.breakpointObserver\n        .observe([Breakpoints.Handset, Breakpoints.TabletPortrait])\n        .subscribe(\n          (value: BreakpointState) =>\n            (this.isHandsetOrTabletInPortrait = value.matches)\n        )\n    );\n\n    this.subscriptions.add(\n      this.viewerLayoutService.onChange.subscribe(\n        (viewerLayout: ViewerLayout) => {\n          this.viewerLayout = viewerLayout;\n        }\n      )\n    );\n    this.subscriptions.add(\n      this.altoService.onRecognizedTextContentModeChange$.subscribe(\n        (recognizedTextModeChanges: RecognizedTextModeChanges) => {\n          this.recognizedTextMode = recognizedTextModeChanges.currentValue;\n        }\n      )\n    );\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.isPagedManifest = manifest\n            ? ManifestUtils.isManifestPaged(manifest)\n            : false;\n          this.hasRecognizedTextContent = manifest\n            ? ManifestUtils.hasRecognizedTextContent(manifest)\n            : false;\n        }\n      )\n    );\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((rect) => {\n        this.resizeHeight(rect);\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  setLayoutOnePage(): void {\n    this.viewerLayoutService.setLayout(ViewerLayout.ONE_PAGE);\n  }\n\n  setLayoutTwoPage(): void {\n    this.viewerLayoutService.setLayout(ViewerLayout.TWO_PAGE);\n  }\n\n  closeRecognizedTextContent(): void {\n    this.altoService.closeRecognizedTextContent();\n  }\n\n  showRecognizedTextContentInSplitView(): void {\n    this.altoService.showRecognizedTextContentInSplitView();\n  }\n\n  showRecognizedTextContentOnly(): void {\n    this.altoService.showRecognizedTextContentOnly();\n  }\n\n  private resizeHeight(rect: Dimensions): void {\n    let maxHeight = rect.height - 192 + 'px';\n    if (this.isHandsetOrTabletInPortrait) {\n      maxHeight = rect.height + 'px';\n    }\n    this.contentStyle = {\n      maxHeight,\n    };\n    this.cdr.detectChanges();\n  }\n}\n","@if (isHandsetOrTabletInPortrait) {\n  <mat-toolbar color=\"primary\" data-testid=\"mobile-toolbar\">\n    <button\n      data-testid=\"ngx-mime-view-dialog-close-button\"\n      mat-icon-button\n      [aria-label]=\"intl.closeLabel\"\n      [matTooltip]=\"intl.closeLabel\"\n      [matDialogClose]=\"true\"\n    >\n      <mat-icon>close</mat-icon>\n    </button>\n    <h1 mat-dialog-title>{{ intl.layoutMenuLabel }}</h1>\n  </mat-toolbar>\n} @else {\n  <mat-toolbar class=\"justify-between\" data-testid=\"desktop-toolbar\">\n    <h1 mat-dialog-title data-testid=\"ngx-mime-heading-desktop\">{{\n      intl.layoutMenuLabel\n    }}</h1>\n    <button\n      data-testid=\"ngx-mime-view-dialog-close-button\"\n      mat-icon-button\n      [aria-label]=\"intl.closeLabel\"\n      [matTooltip]=\"intl.closeLabel\"\n      [matDialogClose]=\"true\"\n    >\n      <mat-icon>close</mat-icon>\n    </button>\n  </mat-toolbar>\n}\n<mat-dialog-content [ngStyle]=\"contentStyle\">\n  @if (isPagedManifest) {\n    <section data-testid=\"page-layout\">\n      <h2>{{ intl.pageLayoutLabel }}</h2>\n      <div\n        class=\"flex flex-col gap-y-2\"\n        role=\"group\"\n        [attr.aria-label]=\"intl.pageLayoutLabel\"\n      >\n        <div class=\"flex items-center\">\n          <mat-button-toggle\n            data-testid=\"ngx-mime-single-page-view-button\"\n            [aria-label]=\"intl.singlePageViewLabel\"\n            [value]=\"ViewerLayout.ONE_PAGE\"\n            [checked]=\"viewerLayout === ViewerLayout.ONE_PAGE\"\n            (click)=\"setLayoutOnePage()\"\n          >\n            <mime-icon [iconName]=\"'single_page_display'\"> </mime-icon>\n          </mat-button-toggle>\n          <div class=\"label\">{{ intl.singlePageViewLabel }}</div>\n        </div>\n        <div class=\"flex items-center\">\n          <mat-button-toggle\n            data-testid=\"ngx-mime-two-page-view-button\"\n            [aria-label]=\"intl.twoPageViewLabel\"\n            [value]=\"ViewerLayout.TWO_PAGE\"\n            [checked]=\"viewerLayout === ViewerLayout.TWO_PAGE\"\n            (click)=\"setLayoutTwoPage()\"\n          >\n            <mime-icon [iconName]=\"'two_page_display'\"> </mime-icon>\n          </mat-button-toggle>\n          <div class=\"label\">{{ intl.twoPageViewLabel }}</div>\n        </div>\n      </div>\n    </section>\n  }\n  @if (hasRecognizedTextContent) {\n    <mat-divider></mat-divider>\n    <section data-testid=\"recognized-text-content\">\n      <h2>{{ intl.digitalTextLabel }}</h2>\n      <div\n        class=\"flex flex-col gap-y-2\"\n        role=\"group\"\n        [attr.aria-label]=\"intl.digitalTextLabel\"\n      >\n        <div class=\"flex items-center\">\n          <mat-button-toggle\n            data-testid=\"ngx-mime-recognized-text-content-close-button\"\n            [aria-label]=\"intl.recognizedTextContentCloseLabel\"\n            [value]=\"RecognizedTextMode.NONE\"\n            [checked]=\"recognizedTextMode === RecognizedTextMode.NONE\"\n            (click)=\"closeRecognizedTextContent()\"\n          >\n            <mat-icon>hide_source</mat-icon>\n          </mat-button-toggle>\n          <div class=\"label\">{{ intl.recognizedTextContentCloseLabel }}</div>\n        </div>\n        <div class=\"flex items-center\">\n          <mat-button-toggle\n            data-testid=\"ngx-mime-recognized-text-content-split-view-button\"\n            [aria-label]=\"intl.recognizedTextContentInSplitViewLabel\"\n            [value]=\"RecognizedTextMode.SPLIT\"\n            [checked]=\"recognizedTextMode === RecognizedTextMode.SPLIT\"\n            (click)=\"showRecognizedTextContentInSplitView()\"\n          >\n            <mat-icon>view_sidebar</mat-icon>\n          </mat-button-toggle>\n          <div class=\"label\">{{\n            intl.recognizedTextContentInSplitViewLabel\n          }}</div>\n        </div>\n        <div class=\"flex items-center\">\n          <mat-button-toggle\n            data-testid=\"ngx-mime-recognized-text-content-only-button\"\n            [aria-label]=\"intl.showRecognizedTextContentLabel\"\n            [value]=\"RecognizedTextMode.ONLY\"\n            [checked]=\"recognizedTextMode === RecognizedTextMode.ONLY\"\n            (click)=\"showRecognizedTextContentOnly()\"\n          >\n            <mat-icon>article</mat-icon>\n          </mat-button-toggle>\n          <div class=\"label\">{{ intl.showRecognizedTextContentLabel }}</div>\n        </div>\n      </div>\n    </section>\n  }\n</mat-dialog-content>\n","import { ElementRef, Injectable, ViewContainerRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n  MatDialogState,\n} from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { ViewDialogConfigStrategyFactory } from './view-dialog-config-strategy-factory';\nimport { ViewDialogComponent } from './view-dialog.component';\n\n@Injectable()\nexport class ViewDialogService {\n  private _el: ElementRef | undefined;\n  private _viewContainerRef: ViewContainerRef | undefined;\n  private dialogRef?: MatDialogRef<ViewDialogComponent>;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private viewDialogConfigStrategyFactory: ViewDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((rect) => {\n        if (this.isOpen()) {\n          const config = this.getDialogConfig();\n          this.dialogRef?.updatePosition(config.position);\n          this.dialogRef?.updateSize(config.width, config.height);\n        }\n      })\n    );\n  }\n\n  public destroy(): void {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  set viewContainerRef(viewContainerRef: ViewContainerRef) {\n    this._viewContainerRef = viewContainerRef;\n  }\n\n  public open(): void {\n    if (!this.isOpen()) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(ViewDialogComponent, config);\n    }\n  }\n\n  public close(): void {\n    if (this.isOpen()) {\n      this.dialogRef?.close();\n    }\n  }\n\n  public toggle(): void {\n    this.isOpen() ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.dialogRef?.getState() === MatDialogState.OPEN;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    if (!this._el || !this._viewContainerRef) {\n      throw new Error('No element or viewContainerRef');\n    }\n\n    return this.viewDialogConfigStrategyFactory\n      .create()\n      .getConfig(this._el, this._viewContainerRef);\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","export class AccessKeys {\n  public static PAGEDOWN = [34];\n  public static PAGEUP = [33];\n  public static ARROWRIGHT = [39];\n  public static ARROWLEFT = [37];\n  public static firstCanvasGroupCodes = [36]; // Home\n  public static lastCanvasGroupCodes = [35]; // End\n  public static zoomInCodes = [107, 187, 171]; // +, numpad and standard position, Firefox uses 171 for standard position\n  public static zoomOutCodes = [109, 189, 173]; // -, numpad and standard position, Firefox uses 173 for standard position\n  public static zoomHomeCodes = [96, 48]; // 0\n  public static nextHit = [78]; // n\n  public static previousHit = [80]; // p\n  public static toggleSearchDialogCodes = [83]; // s\n  public static toggleInformationDialogCodes = [67]; // C\n  public static toggleFullscreenCodes = [70]; // f\n  public static resetSearch = [83]; // s\n  public static rotateCwCodes = [82]; // r\n  public static recognizedTextContentCodes = [84]; // t\n  private keyCode: number;\n  private altKey = false;\n  private shiftKey = false;\n  private ctrlkey = false;\n  private metaKey = false;\n  private event: KeyboardEvent;\n\n  constructor(event: KeyboardEvent) {\n    this.event = event;\n    this.keyCode = event.keyCode;\n    this.altKey = event.altKey;\n    this.shiftKey = event.shiftKey;\n    this.ctrlkey = event.ctrlKey;\n    this.metaKey = event.metaKey;\n  }\n\n  public isArrowRightKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.ARROWRIGHT);\n  }\n\n  public isArrowLeftKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.ARROWLEFT);\n  }\n\n  public isPageUpKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.PAGEUP);\n  }\n\n  public isPageDownKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.PAGEDOWN);\n  }\n\n  public isFirstCanvasGroupKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.firstCanvasGroupCodes)\n    );\n  }\n\n  public isLastCanvasGroupKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.lastCanvasGroupCodes)\n    );\n  }\n\n  public isSliderKeys() {\n    return (\n      this.isArrowLeftKeys() ||\n      this.isArrowRightKeys() ||\n      this.isPageDownKeys() ||\n      this.isPageUpKeys() ||\n      this.isFirstCanvasGroupKeys() ||\n      this.isLastCanvasGroupKeys()\n    );\n  }\n\n  public isZoomInKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomInCodes)\n    );\n  }\n\n  public isZoomOutKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomOutCodes)\n    );\n  }\n\n  public isZoomHomeKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.zoomHomeCodes)\n    );\n  }\n\n  public isNextHitKeys() {\n    return !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.nextHit);\n  }\n\n  public isPreviousHitKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.previousHit)\n    );\n  }\n\n  public isSearchDialogKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleSearchDialogCodes)\n    );\n  }\n\n  public isInformationDialogKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleInformationDialogCodes)\n    );\n  }\n\n  public isFullscreenKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.toggleFullscreenCodes)\n    );\n  }\n\n  public isResetSearchKeys() {\n    return (\n      !this.isMetaPressed() &&\n      this.isShiftPressed() &&\n      this.arrayContainsKeys(AccessKeys.resetSearch)\n    );\n  }\n\n  public isRotateKeys() {\n    return (\n      !this.isMultiKeys() && this.arrayContainsKeys(AccessKeys.rotateCwCodes)\n    );\n  }\n\n  public isRecognizedTextContentKeys() {\n    return (\n      !this.isMultiKeys() &&\n      this.arrayContainsKeys(AccessKeys.recognizedTextContentCodes)\n    );\n  }\n\n  execute(fn: Function): void {\n    this.event.preventDefault();\n    fn();\n  }\n\n  private isMultiKeys(): boolean {\n    return this.altKey || this.shiftKey || this.ctrlkey;\n  }\n\n  private arrayContainsKeys(keys: number[]): boolean {\n    return keys.indexOf(this.keyCode) > -1;\n  }\n\n  private isShiftPressed(): boolean {\n    return this.shiftKey;\n  }\n\n  private isMetaPressed(): boolean {\n    return this.metaKey;\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ContentSearchDialogService } from '../../content-search-dialog/content-search-dialog.service';\nimport { InformationDialogService } from '../../information-dialog/information-dialog.service';\nimport { ViewDialogService } from '../../view-dialog/view-dialog.service';\nimport { AltoService } from '../alto-service/alto.service';\nimport { CanvasService } from '../canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from '../iiif-manifest-service/iiif-manifest-service';\nimport { MimeDomHelper } from '../mime-dom-helper';\nimport { ModeService } from '../mode-service/mode.service';\nimport { RecognizedTextMode, ViewerMode } from '../models';\nimport { AccessKeys } from '../models/AccessKeys';\nimport { Manifest } from '../models/manifest';\nimport { SearchResult } from '../models/search-result';\nimport { ViewingDirection } from '../models/viewing-direction';\nimport { ContentSearchNavigationService } from '../navigation/content-search-navigation-service/content-search-navigation.service';\nimport { ViewerService } from '../viewer-service/viewer.service';\n\n@Injectable()\nexport class AccessKeysService {\n  private isSearchable = false;\n  private hasHits = false;\n  private disabledKeys: number[] = [];\n  private subscriptions = new Subscription();\n  private invert = false;\n\n  constructor(\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private modeService: ModeService,\n    private iiifManifestService: IiifManifestService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private informationDialogService: InformationDialogService,\n    private viewDialogService: ViewDialogService,\n    private mimeDomHelper: MimeDomHelper,\n    private contentSearchNavigationService: ContentSearchNavigationService,\n    private altoService: AltoService\n  ) {}\n\n  initialize() {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.isSearchable = this.isManifestSearchable(manifest);\n            this.invert = manifest.viewingDirection === ViewingDirection.RTL;\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe(\n        (result: SearchResult) => {\n          this.hasHits = result.hits.length > 0;\n        }\n      )\n    );\n  }\n\n  destroy(): void {\n    this.unsubscribe();\n  }\n\n  public handleKeyEvents(event: KeyboardEvent) {\n    const accessKeys = new AccessKeys(event);\n    if (!this.isKeyDisabled(event.keyCode)) {\n      if (accessKeys.isArrowLeftKeys()) {\n        if (!this.isZoomedIn()) {\n          this.invert\n            ? accessKeys.execute(() => this.goToNextCanvasGroup())\n            : accessKeys.execute(() => this.goToPreviousCanvasGroup());\n        }\n      } else if (accessKeys.isArrowRightKeys()) {\n        if (!this.isZoomedIn()) {\n          this.invert\n            ? accessKeys.execute(() => this.goToPreviousCanvasGroup())\n            : accessKeys.execute(() => this.goToNextCanvasGroup());\n        }\n      } else if (accessKeys.isFirstCanvasGroupKeys()) {\n        accessKeys.execute(() => this.goToFirstCanvasGroup());\n      } else if (accessKeys.isLastCanvasGroupKeys()) {\n        accessKeys.execute(() => this.goToLastCanvasGroup());\n      } else if (accessKeys.isNextHitKeys() && this.hasHits) {\n        accessKeys.execute(() => this.goToNextHit());\n      } else if (accessKeys.isPreviousHitKeys() && this.hasHits) {\n        accessKeys.execute(() => this.goToPreviousHit());\n      } else if (accessKeys.isFullscreenKeys()) {\n        accessKeys.execute(() => this.toggleFullscreen());\n      } else if (accessKeys.isSearchDialogKeys() && this.isSearchable) {\n        accessKeys.execute(() => {\n          this.toggleSearchDialog();\n        });\n      } else if (accessKeys.isInformationDialogKeys()) {\n        accessKeys.execute(() => this.toggleInformationDialog());\n      } else if (accessKeys.isResetSearchKeys()) {\n        accessKeys.execute(() => this.resetSearch());\n      } else if (accessKeys.isPageDownKeys()) {\n        accessKeys.execute(() => this.goToNextCanvasGroup());\n      } else if (accessKeys.isPageUpKeys()) {\n        accessKeys.execute(() => this.goToPreviousCanvasGroup());\n      } else if (accessKeys.isZoomInKeys()) {\n        accessKeys.execute(() => this.zoomIn());\n      } else if (accessKeys.isZoomOutKeys()) {\n        accessKeys.execute(() => this.zoomOut());\n      } else if (accessKeys.isZoomHomeKeys()) {\n        accessKeys.execute(() => this.zoomHome());\n      } else if (accessKeys.isRotateKeys()) {\n        accessKeys.execute(() => this.rotateClockWise());\n      } else if (accessKeys.isRecognizedTextContentKeys()) {\n        accessKeys.execute(() => this.toggleRecognizedTextContentInSplitView());\n      }\n    }\n  }\n\n  private goToNextCanvasGroup() {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  private goToPreviousCanvasGroup() {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  private goToFirstCanvasGroup() {\n    this.viewerService.goToCanvasGroup(0, false);\n  }\n\n  private goToLastCanvasGroup() {\n    this.viewerService.goToCanvasGroup(\n      this.canvasService.numberOfCanvasGroups - 1,\n      false\n    );\n  }\n\n  private rotateClockWise() {\n    this.viewerService.rotate();\n    this.mimeDomHelper.setFocusOnViewer();\n  }\n\n  private toggleRecognizedTextContentInSplitView() {\n    if (\n      this.altoService.recognizedTextContentMode !== RecognizedTextMode.SPLIT\n    ) {\n      this.altoService.showRecognizedTextContentInSplitView();\n    } else {\n      this.altoService.closeRecognizedTextContent();\n    }\n  }\n\n  private goToNextHit() {\n    this.contentSearchNavigationService.goToNextHit();\n  }\n\n  private goToPreviousHit() {\n    this.contentSearchNavigationService.goToPreviousHit();\n  }\n\n  private zoomIn() {\n    if (this.modeService.mode === ViewerMode.DASHBOARD) {\n      this.modeService.toggleMode();\n    } else {\n      this.viewerService.zoomIn();\n    }\n  }\n\n  private zoomOut() {\n    if (this.modeService.mode === ViewerMode.PAGE) {\n      this.modeService.toggleMode();\n    } else if (this.modeService.isPageZoomed()) {\n      this.viewerService.zoomOut();\n    }\n  }\n\n  private zoomHome() {\n    if (this.modeService.isPageZoomed()) {\n      this.viewerService.home();\n    }\n  }\n\n  private toggleSearchDialog() {\n    if (\n      this.modeService.mode === ViewerMode.PAGE ||\n      this.modeService.isPageZoomed()\n    ) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n      this.contentSearchDialogService.open();\n    } else {\n      if (this.contentSearchDialogService.isOpen()) {\n        this.contentSearchDialogService.close();\n      } else {\n        this.contentSearchDialogService.open();\n      }\n    }\n\n    this.informationDialogService.close();\n    this.viewDialogService.close();\n  }\n\n  private toggleInformationDialog() {\n    if (\n      this.modeService.mode === ViewerMode.PAGE ||\n      this.modeService.isPageZoomed()\n    ) {\n      this.modeService.mode = ViewerMode.DASHBOARD;\n      this.informationDialogService.open();\n    } else {\n      if (this.informationDialogService.isOpen()) {\n        this.informationDialogService.close();\n      } else {\n        this.informationDialogService.open();\n      }\n    }\n    this.contentSearchDialogService.close();\n    this.viewDialogService.close();\n  }\n\n  private toggleFullscreen() {\n    this.mimeDomHelper.toggleFullscreen();\n    this.mimeDomHelper.setFocusOnViewer();\n  }\n\n  private resetSearch() {\n    this.iiifContentSearchService.destroy();\n  }\n\n  private isManifestSearchable(manifest: Manifest): boolean {\n    return manifest.service ? true : false;\n  }\n\n  private isZoomedIn(): boolean {\n    return this.modeService.isPageZoomed();\n  }\n\n  private updateDisabledKeys() {\n    this.resetDisabledKeys();\n    if (this.informationDialogService.isOpen()) {\n      this.disableKeysForContentDialog();\n    } else if (this.contentSearchDialogService.isOpen()) {\n      this.diableKeysForContentSearchDialog();\n    }\n    if (this.isRecognizedTextContentModeOnly()) {\n      this.disableKeysForRecognizedTextContentOnly();\n    }\n  }\n\n  private disableKeysForContentDialog() {\n    this.disabledKeys = this.disabledKeys\n      .concat(AccessKeys.ARROWLEFT)\n      .concat(AccessKeys.ARROWRIGHT);\n  }\n\n  private diableKeysForContentSearchDialog() {\n    this.disabledKeys = this.disabledKeys\n      .concat(AccessKeys.ARROWLEFT)\n      .concat(AccessKeys.ARROWRIGHT)\n      .concat(AccessKeys.firstCanvasGroupCodes)\n      .concat(AccessKeys.lastCanvasGroupCodes)\n      .concat(AccessKeys.zoomInCodes)\n      .concat(AccessKeys.zoomOutCodes)\n      .concat(AccessKeys.zoomHomeCodes)\n      .concat(AccessKeys.nextHit)\n      .concat(AccessKeys.previousHit)\n      .concat(AccessKeys.toggleSearchDialogCodes)\n      .concat(AccessKeys.toggleInformationDialogCodes)\n      .concat(AccessKeys.toggleFullscreenCodes);\n  }\n\n  private isRecognizedTextContentModeOnly(): boolean {\n    return (\n      this.altoService.recognizedTextContentMode === RecognizedTextMode.ONLY\n    );\n  }\n\n  private disableKeysForRecognizedTextContentOnly(): void {\n    this.disabledKeys = this.disabledKeys\n      .concat(AccessKeys.zoomInCodes)\n      .concat(AccessKeys.zoomOutCodes)\n      .concat(AccessKeys.zoomHomeCodes);\n  }\n\n  private resetDisabledKeys() {\n    this.disabledKeys = [];\n  }\n\n  private isKeyDisabled(keyCode: number): boolean {\n    this.updateDisabledKeys();\n    return this.disabledKeys.indexOf(keyCode) > -1;\n  }\n\n  unsubscribe(): void {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import { Injectable, ElementRef } from '@angular/core';\nimport { Observable, ReplaySubject } from 'rxjs';\n\nimport { MimeDomHelper } from './../core/mime-dom-helper';\nimport { Dimensions } from './../core/models/dimensions';\n\n@Injectable()\nexport class AttributionDialogResizeService {\n  private _el: ElementRef | null = null;\n  private resizeSubject: ReplaySubject<Dimensions> = new ReplaySubject();\n  private dimensions = new Dimensions();\n\n  constructor(private mimeDomHelper: MimeDomHelper) {}\n\n  set el(el: ElementRef | null) {\n    this._el = el;\n  }\n\n  get el(): ElementRef | null {\n    return this._el;\n  }\n\n  get onResize(): Observable<Dimensions> {\n    return this.resizeSubject.asObservable();\n  }\n\n  markForCheck() {\n    if (this.el) {\n      const dimensions = this.mimeDomHelper.getBoundingClientRect(this.el);\n      if (\n        this.dimensions.bottom !== dimensions.bottom ||\n        this.dimensions.height !== dimensions.height ||\n        this.dimensions.left !== dimensions.left ||\n        this.dimensions.right !== dimensions.right ||\n        this.dimensions.top !== dimensions.top ||\n        this.dimensions.width !== dimensions.width\n      ) {\n        this.dimensions = dimensions;\n        this.resizeSubject.next({ ...this.dimensions });\n      }\n    }\n  }\n}\n","import {\n  AfterViewChecked,\n  AfterViewInit,\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Renderer2,\n  ViewChild,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { AccessKeysService } from '../core/access-keys-handler-service/access-keys.service';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../core/intl';\nimport { Manifest } from '../core/models/manifest';\nimport { StyleService } from '../core/style-service/style.service';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\n\n@Component({\n  templateUrl: './attribution-dialog.component.html',\n  styleUrls: ['./attribution-dialog.component.scss'],\n})\nexport class AttributionDialogComponent\n  implements OnInit, AfterViewInit, OnDestroy, AfterViewChecked\n{\n  public manifest: Manifest | null = null;\n  private subscriptions = new Subscription();\n  @ViewChild('container', { static: true }) container!: ElementRef;\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private renderer: Renderer2,\n    private iiifManifestService: IiifManifestService,\n    private attributionDialogResizeService: AttributionDialogResizeService,\n    private styleService: StyleService,\n    private accessKeysHandlerService: AccessKeysService,\n  ) {}\n\n  ngOnInit() {\n    this.attributionDialogResizeService.el = this.container;\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n        },\n      ),\n    );\n  }\n\n  ngAfterViewInit() {\n    this.subscriptions.add(\n      this.styleService.onChange.subscribe((color: string | undefined) => {\n        if (color) {\n          const backgroundRgbaColor = this.styleService.convertToRgba(\n            color,\n            0.3,\n          );\n          this.renderer.setStyle(\n            this.container?.nativeElement,\n            'background-color',\n            backgroundRgbaColor,\n          );\n        }\n      }),\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  @HostListener('keydown', ['$event'])\n  handleKeys(event: KeyboardEvent) {\n    this.accessKeysHandlerService.handleKeyEvents(event);\n  }\n\n  @HostListener('window:resize', ['$event'])\n  onResize(event: any) {\n    this.attributionDialogResizeService.markForCheck();\n  }\n\n  ngAfterViewChecked() {\n    this.attributionDialogResizeService.markForCheck();\n  }\n}\n","<div #container class=\"attribution-container\">\n  <mat-toolbar class=\"attribution-toolbar justify-between\">\n    <h1 mat-dialog-title>{{ intl.attributionLabel }}</h1>\n    <button\n      mat-icon-button\n      [aria-label]=\"intl.attributonCloseAriaLabel\"\n      [matTooltip]=\"intl.closeLabel\"\n      [matDialogClose]=\"true\"\n    >\n      <mat-icon>close</mat-icon>\n    </button>\n  </mat-toolbar>\n  <p mat-dialog-content [innerHTML]=\"manifest?.attribution\"> </p>\n</div>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport {\n  FormBuilder,\n  FormControl,\n  FormGroup,\n  Validators,\n} from '@angular/forms';\nimport { MatDialogRef } from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { CanvasService } from '../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from '../core/intl';\nimport { ViewerService } from '../core/viewer-service/viewer.service';\n\n@Component({\n  templateUrl: './canvas-group-dialog.component.html',\n  styleUrls: ['./canvas-group-dialog.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class CanvasGroupDialogComponent implements OnInit, OnDestroy {\n  numberOfCanvases: number;\n  canvasGroupForm: FormGroup<{\n    canvasGroupControl: FormControl<number | null>;\n  }>;\n  private subscriptions = new Subscription();\n\n  constructor(\n    private dialogRef: MatDialogRef<CanvasGroupDialogComponent>,\n    private fb: FormBuilder,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {\n    this.numberOfCanvases = this.canvasService.numberOfCanvases;\n    this.canvasGroupForm = this.fb.group({\n      canvasGroupControl: new FormControl<number | null>(null, [\n        Validators.required,\n        Validators.min(1),\n        Validators.max(this.numberOfCanvases),\n      ]),\n    });\n  }\n\n  get canvasGroupControl() {\n    return this.canvasGroupForm.get('canvasGroupControl');\n  }\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck())\n    );\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  onSubmit(): void {\n    if (this.canvasGroupForm.valid) {\n      const pageNumber = this.canvasGroupControl?.value;\n      if (pageNumber !== null && pageNumber !== undefined)\n        this.viewerService.goToCanvasGroup(\n          this.canvasService.findCanvasGroupByCanvasIndex(pageNumber - 1),\n          false\n        );\n      this.dialogRef.close();\n    }\n  }\n}\n","<h1 class=\"canvas-group-dialog-title\" mat-dialog-title>{{\n  intl.goToPageLabel\n}}</h1>\n<form\n  [formGroup]=\"canvasGroupForm\"\n  (ngSubmit)=\"onSubmit()\"\n  novalidate\n  autocomplete=\"off\"\n>\n  <div mat-dialog-content>\n    <mat-form-field [floatLabel]=\"'always'\">\n      <mat-label>{{ intl.enterPageNumber }}</mat-label>\n      <input\n        class=\"go-to-canvas-group-input\"\n        type=\"number\"\n        matInput\n        min=\"1\"\n        formControlName=\"canvasGroupControl\"\n      />\n      @if (canvasGroupControl?.errors?.['max']) {\n        <mat-error>{{ intl.pageDoesNotExists }}</mat-error>\n      }\n    </mat-form-field>\n  </div>\n  <div mat-dialog-actions [align]=\"'end'\">\n    <button type=\"button\" mat-button matDialogClose>CANCEL</button>\n    <button\n      type=\"submit\"\n      mat-button\n      [disabled]=\"canvasGroupForm.pristine || canvasGroupForm.invalid\"\n      >OK</button\n    >\n  </div>\n</form>\n","import {\n  BreakpointObserver,\n  BreakpointState,\n  Breakpoints,\n} from '@angular/cdk/layout';\nimport { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { MimeViewerIntl } from '../core/intl';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\n\n@Component({\n  selector: 'mime-help',\n  templateUrl: './help-dialog.component.html',\n  styleUrls: ['./help-dialog.component.scss'],\n})\nexport class HelpDialogComponent implements OnInit, OnDestroy {\n  public tabHeight = {};\n  isHandsetOrTabletInPortrait = false;\n  private mimeHeight = 0;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private cdr: ChangeDetectorRef,\n    private mimeResizeService: MimeResizeService,\n    private breakpointObserver: BreakpointObserver\n  ) {}\n\n  ngOnInit(): void {\n    this.subscriptions.add(\n      this.breakpointObserver\n        .observe([Breakpoints.Handset, Breakpoints.TabletPortrait])\n        .subscribe(\n          (value: BreakpointState) =>\n            (this.isHandsetOrTabletInPortrait = value.matches)\n        )\n    );\n\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe((dimensions: Dimensions) => {\n        this.mimeHeight = dimensions.height;\n        this.resizeTabHeight();\n      })\n    );\n\n    this.resizeTabHeight();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n  }\n\n  private resizeTabHeight() {\n    let height = this.mimeHeight;\n\n    if (this.isHandsetOrTabletInPortrait) {\n      this.tabHeight = {\n        maxHeight: window.innerHeight - 128 + 'px',\n      };\n    } else {\n      height -= 272;\n      this.tabHeight = {\n        maxHeight: height + 'px',\n      };\n    }\n    this.cdr.detectChanges();\n  }\n}\n","<div class=\"help-container\">\n  @if (isHandsetOrTabletInPortrait) {\n    <mat-toolbar color=\"primary\">\n      <button\n        mat-icon-button\n        [aria-label]=\"intl.helpCloseAriaLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        [matDialogClose]=\"true\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n      <h1 mat-dialog-title>{{ intl.help.helpLabel }}</h1>\n    </mat-toolbar>\n  } @else {\n    <mat-toolbar class=\"justify-between\">\n      <h1 class=\"heading-desktop\" mat-dialog-title>{{\n        intl.help.helpLabel\n      }}</h1>\n      <button\n        mat-icon-button\n        [aria-label]=\"intl.helpCloseAriaLabel\"\n        [matTooltip]=\"intl.closeLabel\"\n        [matDialogClose]=\"true\"\n      >\n        <mat-icon>close</mat-icon>\n      </button>\n    </mat-toolbar>\n  }\n  <mat-dialog-content [ngStyle]=\"tabHeight\" class=\"help-content\" tabindex=\"0\">\n    <p [innerHTML]=\"intl.help.line1\"></p>\n    <p [innerHTML]=\"intl.help.line2\"></p>\n    <p [innerHTML]=\"intl.help.line3\"></p>\n    <p [innerHTML]=\"intl.help.line4\"></p>\n    <p [innerHTML]=\"intl.help.line5\"></p>\n    <p [innerHTML]=\"intl.help.line6\"></p>\n    <p [innerHTML]=\"intl.help.line12\"></p>\n    <p [innerHTML]=\"intl.help.line7\"></p>\n    <p [innerHTML]=\"intl.help.line8\"></p>\n    <p [innerHTML]=\"intl.help.line9\"></p>\n    <p [innerHTML]=\"intl.help.line10\"></p>\n    <p [innerHTML]=\"intl.help.line11\"></p>\n  </mat-dialog-content>\n</div>\n","import { NgModule } from '@angular/core';\nimport { MatButtonModule } from '@angular/material/button';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { MatCardModule } from '@angular/material/card';\nimport { MatDialogModule } from '@angular/material/dialog';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatInputModule } from '@angular/material/input';\nimport { MatListModule } from '@angular/material/list';\nimport { MatProgressBarModule } from '@angular/material/progress-bar';\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\nimport { MatSidenavModule } from '@angular/material/sidenav';\nimport { MatSliderModule } from '@angular/material/slider';\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\nimport { MatTabsModule } from '@angular/material/tabs';\nimport { MatToolbarModule } from '@angular/material/toolbar';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n@NgModule({\n  exports: [\n    MatToolbarModule,\n    MatButtonModule,\n    MatButtonToggleModule,\n    MatIconModule,\n    MatTooltipModule,\n    MatDialogModule,\n    MatTabsModule,\n    MatListModule,\n    MatSliderModule,\n    MatProgressSpinnerModule,\n    MatInputModule,\n    MatProgressBarModule,\n    MatCardModule,\n    MatSnackBarModule,\n    MatSidenavModule,\n  ],\n})\nexport class MimeMaterialModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { MimeMaterialModule } from './mime-material.module';\n\n@NgModule({\n  exports: [CommonModule, FormsModule, ReactiveFormsModule, MimeMaterialModule],\n})\nexport class SharedModule {}\n","import {\n  animate,\n  state,\n  style,\n  transition,\n  trigger,\n} from '@angular/animations';\nimport { ViewerOptions } from './../core/models/viewer-options';\n\nexport const slideInLeft = trigger('slideInLeft', [\n  state(\n    'hide',\n    style({\n      transform: 'translate(-100%, 0)',\n      display: 'none',\n    })\n  ),\n  state(\n    'show',\n    style({\n      transform: 'translate(0px, 0px)',\n      display: 'block',\n    })\n  ),\n  transition(\n    'hide => show',\n    animate(`${ViewerOptions.transitions.toolbarsEaseInTime}ms ease-out`)\n  ),\n  transition(\n    'show => hide',\n    animate(`${ViewerOptions.transitions.toolbarsEaseOutTime}ms ease-in`)\n  ),\n]);\n\nexport const rotate45 = trigger('rotate45', [\n  transition('closed => open', [\n    style({ transform: 'rotate(-45deg)', opacity: 0 }),\n    animate(`100ms`),\n  ]),\n  transition('open => closed', [\n    style({ transform: 'rotate(45deg)', opacity: 0 }),\n    animate(`100ms`),\n  ]),\n]);\n\nexport const easeInWithDelay = trigger('easeInWithDelay', [\n  state('void', style({ transform: 'scale(0)' })),\n  transition(':enter', animate(`1ms {{delayEnter}}ms ease-out`), {\n    params: { delayEnter: 0 },\n  }),\n  transition(':leave', animate(`1ms {{delayLeave}}ms ease-in`), {\n    params: { delayLeave: 0 },\n  }),\n]);\n","import {\n  BreakpointObserver,\n  Breakpoints,\n  BreakpointState,\n} from '@angular/cdk/layout';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { Manifest } from '../../core/models/manifest';\nimport { ViewingDirection } from '../../core/models/viewing-direction';\nimport { CanvasService } from './../../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from './../../core/intl';\nimport { ViewerService } from './../../core/viewer-service/viewer.service';\nimport { ModeService } from './../../core/mode-service/mode.service';\nimport { easeInWithDelay, rotate45 } from './../../shared/animations';\n\n@Component({\n  selector: 'mime-osd-toolbar',\n  templateUrl: './osd-toolbar.component.html',\n  styleUrls: ['./osd-toolbar.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  animations: [rotate45, easeInWithDelay],\n})\nexport class OsdToolbarComponent implements OnInit, OnDestroy {\n  @ViewChild('container', { static: true }) container!: ElementRef;\n  public numberOfCanvasGroups = 0;\n  public isFirstCanvasGroup = false;\n  public isLastCanvasGroup = false;\n  invert = false;\n  isWeb = false;\n  fabState = 'closed';\n  fabIcon = 'menu';\n  showControlButtons = false;\n  baseAnimationDelay = 20;\n  isZoomed = true;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private breakpointObserver: BreakpointObserver,\n    private changeDetectorRef: ChangeDetectorRef,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private iiifManifestService: IiifManifestService,\n    private modeService: ModeService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.modeService.onChange.subscribe(() => {\n        this.isZoomed = this.modeService.isPageZoomed();\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n\n    this.subscriptions.add(\n      this.breakpointObserver\n        .observe([Breakpoints.Web])\n        .subscribe((value: BreakpointState) => {\n          this.isWeb = value.matches;\n          this.changeDetectorRef.detectChanges();\n        })\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.invert = manifest.viewingDirection === ViewingDirection.LTR;\n            this.changeDetectorRef.detectChanges();\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.viewerService.onCanvasGroupIndexChange.subscribe(\n        (currentCanvasGroupIndex: number) => {\n          this.numberOfCanvasGroups = this.canvasService.numberOfCanvasGroups;\n          this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck())\n    );\n  }\n\n  toggleFab(): void {\n    this.showControlButtons = !this.showControlButtons;\n    this.fabState = this.fabState === 'closed' ? 'open' : 'closed';\n    this.fabIcon = this.fabState === 'closed' ? 'menu' : 'clear';\n  }\n\n  zoomIn(): void {\n    this.viewerService.zoomIn();\n  }\n\n  zoomOut(): void {\n    this.viewerService.zoomOut();\n  }\n\n  home(): void {\n    this.viewerService.home();\n  }\n\n  rotate(): void {\n    this.viewerService.rotate();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  public goToPreviousCanvasGroup(): void {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  public goToNextCanvasGroup(): void {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  private isOnFirstCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === 0;\n  }\n\n  private isOnLastCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === this.numberOfCanvasGroups - 1;\n  }\n}\n","<div #container class=\"osd-toolbar\">\n  @if (isWeb) {\n    <div class=\"flex gap-2\">\n      <div class=\"flex flex-col gap-2\">\n        <button\n          mat-fab\n          aria-controls=\"osdControls\"\n          data-testid=\"fabButton\"\n          [attr.aria-expanded]=\"fabState === 'open'\"\n          [attr.aria-label]=\"\n            fabState === 'open'\n              ? intl.closeOsdControlPanelLabel\n              : intl.openOsdControlPanelLabel\n          \"\n          [matTooltip]=\"\n            fabState === 'open'\n              ? intl.closeOsdControlPanelLabel\n              : intl.openOsdControlPanelLabel\n          \"\n          (click)=\"toggleFab()\"\n        >\n          <mat-icon [@rotate45]=\"fabState\">{{ fabIcon }}</mat-icon>\n        </button>\n      </div>\n      <div id=\"osdControls\" class=\"flex items-center gap-2\">\n        @if (invert) {\n          @if (showControlButtons) {\n            <button\n              data-testid=\"navigateBeforeButton\"\n              mat-mini-fab\n              [attr.aria-label]=\"intl.previousPageLabel\"\n              [matTooltip]=\"intl.previousPageLabel\"\n              [disabled]=\"isFirstCanvasGroup\"\n              [@easeInWithDelay]=\"{\n                value: '',\n                params: { delayEnter: 0, delayLeave: baseAnimationDelay * 5 }\n              }\"\n              (click)=\"goToPreviousCanvasGroup()\"\n            >\n              <mat-icon>navigate_before</mat-icon>\n            </button>\n          }\n        } @else {\n          @if (showControlButtons) {\n            <button\n              data-testid=\"navigateNextButton\"\n              mat-mini-fab\n              [attr.aria-label]=\"intl.nextPageLabel\"\n              [matTooltip]=\"intl.nextPageLabel\"\n              [disabled]=\"isLastCanvasGroup\"\n              [@easeInWithDelay]=\"{\n                value: '',\n                params: { delayEnter: 0, delayLeave: baseAnimationDelay * 5 }\n              }\"\n              (click)=\"goToNextCanvasGroup()\"\n            >\n              <mat-icon>navigate_before</mat-icon>\n            </button>\n          }\n        }\n        @if (invert) {\n          @if (showControlButtons) {\n            <button\n              data-testid=\"navigateNextButton\"\n              mat-mini-fab\n              [attr.aria-label]=\"intl.nextPageLabel\"\n              [matTooltip]=\"intl.nextPageLabel\"\n              [disabled]=\"isLastCanvasGroup\"\n              [@easeInWithDelay]=\"{\n                value: '',\n                params: {\n                  delayEnter: baseAnimationDelay,\n                  delayLeave: baseAnimationDelay * 4\n                }\n              }\"\n              (click)=\"goToNextCanvasGroup()\"\n            >\n              <mat-icon>navigate_next</mat-icon>\n            </button>\n          }\n        } @else {\n          @if (showControlButtons) {\n            <button\n              data-testid=\"navigateBeforeButton\"\n              mat-mini-fab\n              [attr.aria-label]=\"intl.previousPageLabel\"\n              [matTooltip]=\"intl.previousPageLabel\"\n              [disabled]=\"isFirstCanvasGroup\"\n              [@easeInWithDelay]=\"{\n                value: '',\n                params: {\n                  delayEnter: baseAnimationDelay,\n                  delayLeave: baseAnimationDelay * 4\n                }\n              }\"\n              (click)=\"goToPreviousCanvasGroup()\"\n            >\n              <mat-icon>navigate_next</mat-icon>\n            </button>\n          }\n        }\n        @if (showControlButtons) {\n          <button\n            (click)=\"zoomIn()\"\n            data-testid=\"zoomInButton\"\n            mat-mini-fab\n            [attr.aria-label]=\"intl.zoomInLabel\"\n            [matTooltip]=\"intl.zoomInLabel\"\n            [@easeInWithDelay]=\"{\n              value: '',\n              params: {\n                delayEnter: baseAnimationDelay * 2,\n                delayLeave: baseAnimationDelay * 3\n              }\n            }\"\n          >\n            <mat-icon>zoom_in</mat-icon>\n          </button>\n          <button\n            (click)=\"home()\"\n            data-testid=\"homeButton\"\n            mat-mini-fab\n            [attr.aria-label]=\"intl.resetZoomLabel\"\n            [disabled]=\"!isZoomed\"\n            [matTooltip]=\"intl.resetZoomLabel\"\n            [@easeInWithDelay]=\"{\n              value: '',\n              params: {\n                delayEnter: baseAnimationDelay * 3,\n                delayLeave: baseAnimationDelay * 2\n              }\n            }\"\n          >\n            <mat-icon>home</mat-icon>\n          </button>\n          <button\n            (click)=\"zoomOut()\"\n            data-testid=\"zoomOutButton\"\n            mat-mini-fab\n            [attr.aria-label]=\"intl.zoomOutLabel\"\n            [matTooltip]=\"intl.zoomOutLabel\"\n            [@easeInWithDelay]=\"{\n              value: '',\n              params: {\n                delayEnter: baseAnimationDelay * 4,\n                delayLeave: baseAnimationDelay\n              }\n            }\"\n          >\n            <mat-icon>zoom_out</mat-icon>\n          </button>\n          <button\n            (click)=\"rotate()\"\n            data-testid=\"rotateButton\"\n            mat-mini-fab\n            [attr.aria-label]=\"intl.rotateCwLabel\"\n            [matTooltip]=\"intl.rotateCwLabel\"\n            [@easeInWithDelay]=\"{\n              value: '',\n              params: { delayEnter: baseAnimationDelay * 5, delayLeave: 0 }\n            }\"\n          >\n            <mat-icon>rotate_right</mat-icon>\n          </button>\n        }\n      </div>\n    </div>\n  }\n</div>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n} from '@angular/core';\nimport { SafeHtml } from '@angular/platform-browser';\nimport { Subscription } from 'rxjs';\nimport { AltoService } from '../../core/alto-service/alto.service';\nimport { CanvasService } from '../../core/canvas-service/canvas-service';\nimport { IiifManifestService } from '../../core/iiif-manifest-service/iiif-manifest-service';\nimport { IiifContentSearchService } from '../../core/iiif-content-search-service/iiif-content-search.service';\nimport { HighlightService } from '../../core/highlight-service/highlight.service';\nimport { Hit } from '../../core/models/hit';\nimport { MimeViewerIntl } from '../../core/intl';\nimport { SearchResult } from '../../core/models/search-result';\n\n@Component({\n  selector: 'mime-recognized-text-content',\n  templateUrl: './recognized-text-content.component.html',\n  styleUrls: ['./recognized-text-content.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class RecognizedTextContentComponent implements OnInit, OnDestroy {\n  @ViewChild('recognizedTextContentContainer', { read: ElementRef })\n  recognizedTextContentContainer!: ElementRef;\n  firstCanvasRecognizedTextContent: SafeHtml | undefined;\n  secondCanvasRecognizedTextContent: SafeHtml | undefined;\n  isLoading = false;\n  error: string | undefined = undefined;\n  selectedHit: number | undefined;\n\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private cdr: ChangeDetectorRef,\n    private canvasService: CanvasService,\n    private altoService: AltoService,\n    private iiifManifestService: IiifManifestService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private highlightService: HighlightService\n  ) {}\n\n  ngOnInit(): void {\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe((sr: SearchResult) => {\n        this.altoService.initialize(sr.hits);\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(() => {\n        this.clearRecognizedText();\n        this.cdr.detectChanges();\n      })\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onSelected.subscribe((hit: Hit | null) => {\n        if (hit) {\n          this.selectedHit = hit.id;\n          this.highlightService.highlightSelectedHit(this.selectedHit);\n        }\n      })\n    );\n\n    this.subscriptions.add(\n      this.altoService.onTextContentReady$.subscribe(async () => {\n        this.clearRecognizedText();\n        this.scrollToTop();\n        await this.updateRecognizedText();\n        this.cdr.detectChanges();\n      })\n    );\n    this.subscriptions.add(\n      this.altoService.isLoading$.subscribe((isLoading: boolean) => {\n        this.isLoading = isLoading;\n        this.cdr.detectChanges();\n      })\n    );\n    this.subscriptions.add(\n      this.altoService.hasErrors$.subscribe((error: string | undefined) => {\n        this.error = error;\n        this.cdr.detectChanges();\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n    this.altoService.destroy();\n  }\n\n  private clearRecognizedText() {\n    this.firstCanvasRecognizedTextContent = '';\n    this.secondCanvasRecognizedTextContent = '';\n  }\n\n  private scrollToTop() {\n    this.recognizedTextContentContainer.nativeElement.scrollTop = 0;\n  }\n\n  private async updateRecognizedText() {\n    const canvases = this.canvasService.getCanvasesPerCanvasGroup(\n      this.canvasService.currentCanvasGroupIndex\n    );\n    await this.updateCanvases(canvases);\n    if (this.selectedHit !== undefined) {\n      this.highlightService.highlightSelectedHit(this.selectedHit);\n    }\n  }\n\n  async updateCanvases(canvases: number[]) {\n    this.firstCanvasRecognizedTextContent = this.altoService.getHtml(\n      canvases[0]\n    );\n\n    if (canvases.length === 2) {\n      this.secondCanvasRecognizedTextContent = this.altoService.getHtml(\n        canvases[1]\n      );\n    }\n  }\n}\n","<div\n  #recognizedTextContentContainer\n  class=\"recognized-text-content-container flex flex-col items-center\"\n  aria-live=\"polite\"\n>\n  @if (error) {\n    <div data-testid=\"error\">{{ error }}</div>\n  }\n  @if (!isLoading) {\n    @if (firstCanvasRecognizedTextContent) {\n      <div\n        class=\"content\"\n        data-testid=\"firstCanvasRecognizedTextContent\"\n        [innerHTML]=\"firstCanvasRecognizedTextContent\"\n      >\n      </div>\n    }\n    @if (secondCanvasRecognizedTextContent) {\n      <div\n        class=\"content\"\n        data-testid=\"secondCanvasRecognizedTextContent\"\n        [innerHTML]=\"secondCanvasRecognizedTextContent\"\n      >\n      </div>\n    }\n  }\n</div>\n","import { Injectable, ViewContainerRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n  MatDialogState,\n} from '@angular/material/dialog';\nimport { CanvasGroupDialogComponent } from './canvas-group-dialog.component';\n\n@Injectable()\nexport class CanvasGroupDialogService {\n  private dialogRef?: MatDialogRef<CanvasGroupDialogComponent>;\n  private _viewContainerRef: ViewContainerRef | undefined;\n\n  constructor(private dialog: MatDialog) {}\n\n  set viewContainerRef(viewContainerRef: ViewContainerRef) {\n    this._viewContainerRef = viewContainerRef;\n  }\n\n  public initialize(): void {}\n\n  public destroy() {\n    this.close();\n  }\n\n  public open(): void {\n    if (!this.isOpen()) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(CanvasGroupDialogComponent, config);\n    }\n  }\n\n  public close(): void {\n    if (this.isOpen()) {\n      this.dialogRef?.close();\n    }\n  }\n\n  public toggle(): void {\n    this.isOpen() ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.dialogRef?.getState() === MatDialogState.OPEN;\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    return {\n      panelClass: 'canvas-group-panel',\n      viewContainerRef: this._viewContainerRef,\n    };\n  }\n}\n","import { Direction } from '@angular/cdk/bidi';\nimport {\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnDestroy,\n  OnInit,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { CanvasGroupDialogService } from '../../../canvas-group-dialog/canvas-group-dialog.service';\nimport { IiifManifestService } from '../../../core/iiif-manifest-service/iiif-manifest-service';\nimport { AccessKeys } from '../../../core/models/AccessKeys';\nimport { Manifest } from '../../../core/models/manifest';\nimport { ViewingDirection } from '../../../core/models/viewing-direction';\nimport { CanvasService } from './../../../core/canvas-service/canvas-service';\nimport { MimeViewerIntl } from './../../../core/intl';\nimport { SearchResult } from './../../../core/models/search-result';\nimport { ViewerService } from './../../../core/viewer-service/viewer.service';\n\n@Component({\n  selector: 'mime-page-navigator',\n  templateUrl: './canvas-group-navigator.component.html',\n  styleUrls: ['./canvas-group-navigator.component.scss'],\n})\nexport class CanvasGroupNavigatorComponent implements OnInit, OnDestroy {\n  @Input() public searchResult!: SearchResult;\n  public numberOfCanvases = 0;\n  public canvasGroupLabel = '';\n  public numberOfCanvasGroups = 0;\n  public currentCanvasGroupIndex: number | null = -1;\n  public isFirstCanvasGroup = false;\n  public isLastCanvasGroup = false;\n  readonly ViewingDirection = ViewingDirection;\n  currentViewingDirection: Direction = ViewingDirection.LTR;\n  private currentSliderCanvasGroupIndex: number | null = -1;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private viewerService: ViewerService,\n    private canvasService: CanvasService,\n    private canvasGroupDialogService: CanvasGroupDialogService,\n    private iiifManifestService: IiifManifestService\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.currentViewingDirection =\n              manifest.viewingDirection === ViewingDirection.LTR\n                ? ViewingDirection.LTR\n                : ViewingDirection.RTL;\n            this.changeDetectorRef.detectChanges();\n          }\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (currentCanvasGroupIndex: number) => {\n          if (\n            this.currentSliderCanvasGroupIndex !== -1 &&\n            this.currentSliderCanvasGroupIndex === currentCanvasGroupIndex\n          ) {\n            this.currentSliderCanvasGroupIndex = -1;\n          } else if (this.currentSliderCanvasGroupIndex === -1) {\n            this.currentCanvasGroupIndex = currentCanvasGroupIndex;\n            this.canvasGroupLabel = this.canvasService.getCanvasGroupLabel(\n              this.currentCanvasGroupIndex\n            );\n          }\n          this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n            currentCanvasGroupIndex\n          );\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onNumberOfCanvasGroupsChange.subscribe(\n        (numberOfCanvasGroups: number) => {\n          this.numberOfCanvasGroups = numberOfCanvasGroups;\n          this.numberOfCanvases = this.canvasService.numberOfCanvases;\n          if (this.currentCanvasGroupIndex !== null) {\n            this.isFirstCanvasGroup = this.isOnFirstCanvasGroup(\n              this.currentCanvasGroupIndex\n            );\n            this.isLastCanvasGroup = this.isOnLastCanvasGroup(\n              this.currentCanvasGroupIndex\n            );\n          }\n          this.changeDetectorRef.detectChanges();\n        }\n      )\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  goToPreviousCanvasGroup(): void {\n    this.viewerService.goToPreviousCanvasGroup();\n  }\n\n  goToNextCanvasGroup(): void {\n    this.viewerService.goToNextCanvasGroup();\n  }\n\n  onSliderChange(event: Event): void {\n    const value = parseInt((event.target as HTMLInputElement).value);\n    this.currentSliderCanvasGroupIndex = value;\n    this.currentCanvasGroupIndex = value;\n    if (this.currentCanvasGroupIndex !== null) {\n      this.canvasGroupLabel = this.canvasService.getCanvasGroupLabel(\n        this.currentCanvasGroupIndex\n      );\n      this.viewerService.goToCanvasGroup(this.currentCanvasGroupIndex, false);\n    }\n    this.changeDetectorRef.detectChanges();\n  }\n\n  onSliderHotKey(event: KeyboardEvent) {\n    const accessKeys = new AccessKeys(event);\n    if (accessKeys.isSliderKeys()) {\n      event.stopPropagation();\n    }\n  }\n\n  openCanvasGroupDialog(): void {\n    this.canvasGroupDialogService.toggle();\n  }\n\n  private isOnFirstCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === 0;\n  }\n\n  private isOnLastCanvasGroup(currentCanvasGroupIndex: number): boolean {\n    return currentCanvasGroupIndex === this.numberOfCanvasGroups - 1;\n  }\n}\n","<mat-toolbar>\n  <div\n    class=\"w-full\"\n    data-testid=\"navigation-slider-container\"\n    [dir]=\"currentViewingDirection\"\n  >\n    <mat-slider\n      class=\"navigation-slider\"\n      [max]=\"numberOfCanvasGroups - 1\"\n      (keydown)=\"onSliderHotKey($event)\"\n    >\n      <input\n        matSliderThumb\n        [attr.aria-label]=\"intl.currentPageLabel\"\n        [(ngModel)]=\"currentCanvasGroupIndex\"\n        (input)=\"onSliderChange($event)\"\n    /></mat-slider>\n  </div>\n  <button\n    mat-button\n    data-testid=\"canvasGroupDialogButton\"\n    class=\"canvasGroups\"\n    (click)=\"openCanvasGroupDialog()\"\n  >\n    <span data-testid=\"currentCanvasGroupLabel\">{{ canvasGroupLabel }}</span\n    ><span>/</span\n    ><span data-testid=\"numOfCanvasGroups\">{{ numberOfCanvases }}</span>\n  </button>\n  <div class=\"navigation-buttons\">\n    @if (currentViewingDirection === ViewingDirection.LTR) {\n      <button\n        data-testid=\"footerNavigateBeforeButton\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.previousPageLabel\"\n        [matTooltip]=\"intl.previousPageLabel\"\n        matTooltipPosition=\"above\"\n        [disabled]=\"isFirstCanvasGroup\"\n        (click)=\"goToPreviousCanvasGroup()\"\n      >\n        <mat-icon>navigate_before</mat-icon>\n      </button>\n      <button\n        data-testid=\"footerNavigateNextButton\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.nextPageLabel\"\n        [matTooltip]=\"intl.nextPageLabel\"\n        matTooltipPosition=\"above\"\n        [disabled]=\"isLastCanvasGroup\"\n        (click)=\"goToNextCanvasGroup()\"\n      >\n        <mat-icon>navigate_next</mat-icon>\n      </button>\n    } @else {\n      <button\n        data-testid=\"footerNavigateNextButton\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.nextPageLabel\"\n        [matTooltip]=\"intl.nextPageLabel\"\n        matTooltipPosition=\"above\"\n        [disabled]=\"isLastCanvasGroup\"\n        (click)=\"goToNextCanvasGroup()\"\n      >\n        <mat-icon>navigate_before</mat-icon>\n      </button>\n      <button\n        data-testid=\"footerNavigateBeforeButton\"\n        mat-icon-button\n        [attr.aria-label]=\"intl.previousPageLabel\"\n        [matTooltip]=\"intl.previousPageLabel\"\n        matTooltipPosition=\"above\"\n        [disabled]=\"isFirstCanvasGroup\"\n        (click)=\"goToPreviousCanvasGroup()\"\n      >\n        <mat-icon>navigate_next</mat-icon>\n      </button>\n    }\n  </div>\n</mat-toolbar>\n","import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  SimpleChanges,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { CanvasService } from '../../../core/canvas-service/canvas-service';\nimport { IiifContentSearchService } from '../../../core/iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from '../../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from '../../../core/intl';\nimport { Manifest } from '../../../core/models/manifest';\nimport { SearchResult } from '../../../core/models/search-result';\nimport { ViewingDirection } from '../../../core/models/viewing-direction';\nimport { ContentSearchNavigationService } from '../../../core/navigation/content-search-navigation-service/content-search-navigation.service';\n\n@Component({\n  selector: 'mime-content-search-navigator',\n  templateUrl: './content-search-navigator.component.html',\n  styleUrls: ['./content-search-navigator.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class ContentSearchNavigatorComponent\n  implements OnInit, OnDestroy, OnChanges\n{\n  @Input() searchResult!: SearchResult;\n  isHitOnActiveCanvasGroup = false;\n  isFirstHit = false;\n  isLastHit = false;\n  currentHit = 0;\n  invert = false;\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private canvasService: CanvasService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private contentSearchNavigationService: ContentSearchNavigationService,\n    private iiifManifestService: IiifManifestService,\n  ) {}\n\n  ngOnInit() {\n    this.contentSearchNavigationService.initialize();\n    this.subscriptions.add(\n      this.contentSearchNavigationService.currentHitCounter.subscribe((n) => {\n        this.currentHit = n;\n        this.updateHitStatus();\n        this.changeDetectorRef.detectChanges();\n      }),\n    );\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.invert = manifest.viewingDirection !== ViewingDirection.LTR;\n            this.changeDetectorRef.detectChanges();\n          }\n        },\n      ),\n    );\n\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck()),\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex) => {\n          this.contentSearchNavigationService.update(canvasGroupIndex);\n          this.isHitOnActiveCanvasGroup =\n            this.contentSearchNavigationService.getHitOnActiveCanvasGroup();\n          this.changeDetectorRef.detectChanges();\n        },\n      ),\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    this.updateHitStatus();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n    this.contentSearchNavigationService.destroy();\n  }\n\n  clear(): void {\n    this.iiifContentSearchService.destroy();\n  }\n\n  goToNextHit() {\n    this.contentSearchNavigationService.goToNextHit();\n  }\n\n  goToPreviousHit() {\n    this.contentSearchNavigationService.goToPreviousHit();\n  }\n\n  private updateHitStatus() {\n    this.isFirstHit = this.currentHit <= 0;\n    this.isLastHit = this.currentHit === this.searchResult.size() - 1;\n  }\n}\n","@if (searchResult) {\n  <mat-toolbar class=\"content-search-navigator-toolbar min-w-[275px]\">\n    <button\n      data-testid=\"footerNavigateCloseHitsButton\"\n      mat-icon-button\n      [attr.aria-label]=\"intl.closeLabel\"\n      [matTooltip]=\"intl.closeLabel\"\n      matTooltipPosition=\"above\"\n      (click)=\"clear()\"\n    >\n      <mat-icon>close</mat-icon>\n    </button>\n    <div\n      class=\"current-hit-label grow\"\n      [ngClass]=\"{ 'not-on-page': !isHitOnActiveCanvasGroup }\"\n      [innerHTML]=\"intl.currentHitLabel(currentHit + 1, searchResult.size())\"\n    ></div>\n    <div class=\"navigation-buttons\">\n      @if (invert) {\n        <button\n          data-testid=\"footerNavigateNextHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.nextHitLabel\"\n          [matTooltip]=\"intl.nextHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isLastHit\"\n          (click)=\"goToNextHit()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n        <button\n          data-testid=\"footerNavigatePreviousHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.previousHitLabel\"\n          [matTooltip]=\"intl.previousHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isFirstHit\"\n          (click)=\"goToPreviousHit()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      } @else {\n        <button\n          data-testid=\"footerNavigatePreviousHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.previousHitLabel\"\n          [matTooltip]=\"intl.previousHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isFirstHit\"\n          (click)=\"goToPreviousHit()\"\n        >\n          <mat-icon>navigate_before</mat-icon>\n        </button>\n        <button\n          data-testid=\"footerNavigateNextHitButton\"\n          mat-icon-button\n          [attr.aria-label]=\"intl.nextHitLabel\"\n          [matTooltip]=\"intl.nextHitLabel\"\n          matTooltipPosition=\"above\"\n          [disabled]=\"isLastHit\"\n          (click)=\"goToNextHit()\"\n        >\n          <mat-icon>navigate_next</mat-icon>\n        </button>\n      }\n    </div>\n  </mat-toolbar>\n}\n","import {\n  animate,\n  state,\n  style,\n  transition,\n  trigger,\n} from '@angular/animations';\nimport {\n  BreakpointObserver,\n  BreakpointState,\n  Breakpoints,\n} from '@angular/cdk/layout';\nimport {\n  ChangeDetectorRef,\n  Component,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { IiifContentSearchService } from './../../core/iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from './../../core/models/search-result';\n\n@Component({\n  selector: 'mime-viewer-footer',\n  templateUrl: './viewer-footer.component.html',\n  styleUrls: ['./viewer-footer.component.scss'],\n  animations: [\n    trigger('footerState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(0, 100%)',\n        })\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0, 0)',\n        })\n      ),\n      transition(\n        'hide => show',\n        animate(ViewerOptions.transitions.toolbarsEaseInTime + 'ms ease-in')\n      ),\n      transition(\n        'show => hide',\n        animate(ViewerOptions.transitions.toolbarsEaseOutTime + 'ms ease-out')\n      ),\n    ]),\n  ],\n})\nexport class ViewerFooterComponent implements OnInit, OnDestroy {\n  @ViewChild('mimeFooterBefore', { read: ViewContainerRef, static: true })\n  mimeFooterBefore!: ViewContainerRef;\n  @ViewChild('mimeFooterAfter', { read: ViewContainerRef, static: true })\n  mimeFooterAfter!: ViewContainerRef;\n\n  public state = 'hide';\n  public showNavigationToolbar = true;\n  public searchResult: SearchResult = new SearchResult();\n  public showPageNavigator = true;\n  public showContentSearchNavigator = false;\n\n  private subscriptions = new Subscription();\n\n  constructor(\n    private breakpointObserver: BreakpointObserver,\n    private changeDetectorRef: ChangeDetectorRef,\n    private iiifContentSearchService: IiifContentSearchService\n  ) {}\n\n  @HostBinding('@footerState')\n  get footerState() {\n    return this.state;\n  }\n\n  ngOnInit() {\n    this.setupContentSearchObserver();\n    this.setupBreakpointObserver();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  private setupContentSearchObserver() {\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe((sr: SearchResult) => {\n        this.searchResult = sr;\n        this.showContentSearchNavigator = this.searchResult.size() > 0;\n        this.updateShowPageNavigator();\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n  }\n\n  private setupBreakpointObserver() {\n    this.subscriptions.add(\n      this.breakpointObserver\n        .observe([Breakpoints.XSmall])\n        .subscribe((value: BreakpointState) => {\n          this.showPageNavigator = value.matches\n            ? this.searchResult.size() === 0\n            : true;\n          this.changeDetectorRef.detectChanges();\n        })\n    );\n  }\n\n  private updateShowPageNavigator() {\n    this.showPageNavigator =\n      this.searchResult.size() === 0 || !this.isHandsetPortrait();\n  }\n\n  private isHandsetPortrait(): boolean {\n    return this.breakpointObserver.isMatched(Breakpoints.HandsetPortrait);\n  }\n}\n","<mat-toolbar class=\"footer-toolbar\">\n  <ng-template #mimeFooterBefore></ng-template>\n  @if (showContentSearchNavigator) {\n    <mime-content-search-navigator\n      [ngClass]=\"{ 'w-full': !showPageNavigator }\"\n      [searchResult]=\"searchResult\"\n    ></mime-content-search-navigator>\n    <mat-divider class=\"h-full\" vertical></mat-divider>\n  }\n  <mime-page-navigator\n    class=\"w-full\"\n    [hidden]=\"!showPageNavigator\"\n    [searchResult]=\"searchResult\"\n  ></mime-page-navigator>\n  <ng-template #mimeFooterAfter></ng-template>\n</mat-toolbar>\n","import { ElementRef, ViewContainerRef } from '@angular/core';\nimport { MatDialogConfig } from '@angular/material/dialog';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { Dimensions } from '../core/models/dimensions';\n\nexport interface HelpDialogConfigStrategy {\n  getConfig(\n    elementRef: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig;\n}\n\nexport class MobileHelpDialogConfigStrategy\n  implements HelpDialogConfigStrategy\n{\n  public getConfig(\n    elementRef: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    return {\n      hasBackdrop: false,\n      width: '100%',\n      height: '100%',\n      maxWidth: '100% !important',\n      panelClass: 'help-panel',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n}\n\nexport class DesktopHelpDialogConfigStrategy\n  implements HelpDialogConfigStrategy\n{\n  public static readonly dialogWidth = 350;\n  public static readonly paddingRight = 20;\n  private mimeDomHelper: MimeDomHelper;\n\n  constructor(mimeDomHelper: MimeDomHelper) {\n    this.mimeDomHelper = mimeDomHelper;\n  }\n\n  public getConfig(\n    el: ElementRef,\n    viewContainerRef: ViewContainerRef\n  ): MatDialogConfig {\n    const dimensions = this.getPosition(el);\n    return {\n      hasBackdrop: false,\n      width: `${DesktopHelpDialogConfigStrategy.dialogWidth}px`,\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px',\n      },\n      panelClass: 'help-panel',\n      maxWidth: '100% !important',\n      viewContainerRef: viewContainerRef,\n    };\n  }\n\n  private getPosition(el: ElementRef): Dimensions {\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(el);\n    return new Dimensions({\n      top: dimensions.top + 64,\n      left:\n        dimensions.right -\n        DesktopHelpDialogConfigStrategy.dialogWidth -\n        DesktopHelpDialogConfigStrategy.paddingRight,\n    });\n  }\n}\n","import { BreakpointObserver, Breakpoints } from '@angular/cdk/layout';\nimport { Injectable } from '@angular/core';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport {\n  DesktopHelpDialogConfigStrategy,\n  HelpDialogConfigStrategy,\n  MobileHelpDialogConfigStrategy,\n} from './help-dialog-config-strategy';\n\n@Injectable()\nexport class HelpDialogConfigStrategyFactory {\n  constructor(\n    private breakpointObserver: BreakpointObserver,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public create(): HelpDialogConfigStrategy {\n    const isHandsetOrTabletInPortrait = this.breakpointObserver.isMatched([\n      Breakpoints.Handset,\n      Breakpoints.TabletPortrait,\n    ]);\n\n    return isHandsetOrTabletInPortrait\n      ? new MobileHelpDialogConfigStrategy()\n      : new DesktopHelpDialogConfigStrategy(this.mimeDomHelper);\n  }\n}\n","import { ElementRef, Injectable, ViewContainerRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogRef,\n  MatDialogState,\n} from '@angular/material/dialog';\nimport { Subscription } from 'rxjs';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { HelpDialogConfigStrategyFactory } from './help-dialog-config-strategy-factory';\nimport { HelpDialogComponent } from './help-dialog.component';\n\n@Injectable()\nexport class HelpDialogService {\n  private _el: ElementRef | undefined;\n  private _viewContainerRef: ViewContainerRef | undefined;\n  private dialogRef?: MatDialogRef<HelpDialogComponent>;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private helpDialogConfigStrategyFactory: HelpDialogConfigStrategyFactory,\n    private mimeResizeService: MimeResizeService\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe(() => {\n        if (this.isOpen()) {\n          const config = this.getDialogConfig();\n          this.dialogRef?.updatePosition(config.position);\n          this.dialogRef?.updateSize(config.width, config.height);\n        }\n      })\n    );\n  }\n\n  public destroy(): void {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  set viewContainerRef(viewContainerRef: ViewContainerRef) {\n    this._viewContainerRef = viewContainerRef;\n  }\n\n  public open(): void {\n    if (!this.isOpen()) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(HelpDialogComponent, config);\n    }\n  }\n\n  public close(): void {\n    if (this.isOpen()) {\n      this.dialogRef?.close();\n    }\n  }\n\n  public toggle(): void {\n    this.isOpen() ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.dialogRef?.getState() === MatDialogState.OPEN;\n  }\n\n  private getDialogConfig() {\n    if (!this._el || !this._viewContainerRef) {\n      throw new Error('No element or viewContainerRef');\n    }\n\n    return this._el\n      ? this.helpDialogConfigStrategyFactory\n          .create()\n          .getConfig(this._el, this._viewContainerRef)\n      : {};\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","import {\n  animate,\n  state,\n  style,\n  transition,\n  trigger,\n} from '@angular/animations';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  HostBinding,\n  OnDestroy,\n  OnInit,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { ManifestUtils } from '../../core/iiif-manifest-service/iiif-manifest-utils';\nimport { MimeDomHelper } from '../../core/mime-dom-helper';\nimport { ViewerOptions } from '../../core/models/viewer-options';\nimport { HelpDialogService } from '../../help-dialog/help-dialog.service';\nimport { InformationDialogService } from '../../information-dialog/information-dialog.service';\nimport { ViewDialogService } from '../../view-dialog/view-dialog.service';\nimport { ContentSearchDialogService } from './../../content-search-dialog/content-search-dialog.service';\nimport { FullscreenService } from './../../core/fullscreen-service/fullscreen.service';\nimport { IiifManifestService } from './../../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeViewerIntl } from './../../core/intl';\nimport { Manifest } from './../../core/models/manifest';\n\n@Component({\n  selector: 'mime-viewer-header',\n  templateUrl: './viewer-header.component.html',\n  styleUrls: ['./viewer-header.component.scss'],\n  changeDetection: ChangeDetectionStrategy.Default,\n  animations: [\n    trigger('headerState', [\n      state(\n        'hide',\n        style({\n          transform: 'translate(0, -100%)',\n        }),\n      ),\n      state(\n        'show',\n        style({\n          transform: 'translate(0px, 0px)',\n        }),\n      ),\n      transition(\n        'hide => show',\n        animate(ViewerOptions.transitions.toolbarsEaseInTime + 'ms ease-in'),\n      ),\n      transition(\n        'show => hide',\n        animate(ViewerOptions.transitions.toolbarsEaseOutTime + 'ms ease-out'),\n      ),\n    ]),\n  ],\n})\nexport class ViewerHeaderComponent implements OnInit, OnDestroy {\n  @ViewChild('mimeHeaderBefore', { read: ViewContainerRef, static: true })\n  mimeHeaderBefore!: ViewContainerRef;\n  @ViewChild('mimeHeaderAfter', { read: ViewContainerRef, static: true })\n  mimeHeaderAfter!: ViewContainerRef;\n  @ViewChild('viewMenu', { read: ElementRef, static: true })\n  viewMenu!: ElementRef;\n  public manifest: Manifest | null = null;\n  public state = 'hide';\n  isContentSearchEnabled = false;\n  isFullscreenEnabled = false;\n  isInFullscreen = false;\n  fullscreenLabel = '';\n  isPagedManifest = false;\n  hasRecognizedTextContent = false;\n\n  private subscriptions = new Subscription();\n\n  constructor(\n    public intl: MimeViewerIntl,\n    private changeDetectorRef: ChangeDetectorRef,\n    private informationDialogService: InformationDialogService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private viewDialogService: ViewDialogService,\n    private helpDialogService: HelpDialogService,\n    private iiifManifestService: IiifManifestService,\n    private fullscreenService: FullscreenService,\n    private mimeDomHelper: MimeDomHelper,\n  ) {}\n\n  @HostBinding('@headerState')\n  get headerState() {\n    return this.state;\n  }\n\n  ngOnInit() {\n    this.isFullscreenEnabled = this.fullscreenService.isEnabled();\n\n    this.subscriptions.add(\n      this.intl.changes.subscribe(() => this.changeDetectorRef.markForCheck()),\n    );\n\n    this.subscriptions.add(\n      this.fullscreenService.onChange.subscribe(() =>\n        this.onFullscreenChange(),\n      ),\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          this.manifest = manifest;\n          this.isContentSearchEnabled =\n            manifest && manifest.service ? true : false;\n          this.isPagedManifest = manifest\n            ? ManifestUtils.isManifestPaged(manifest)\n            : false;\n          this.hasRecognizedTextContent = manifest\n            ? ManifestUtils.hasRecognizedTextContent(manifest)\n            : false;\n          this.changeDetectorRef.detectChanges();\n        },\n      ),\n    );\n\n    this.onFullscreenChange();\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n\n  public toggleView() {\n    this.informationDialogService.close();\n    this.contentSearchDialogService.close();\n    this.helpDialogService.close();\n    this.viewDialogService.toggle();\n  }\n\n  public toggleInformationDialog() {\n    this.viewDialogService.close();\n    this.contentSearchDialogService.close();\n    this.helpDialogService.close();\n    this.informationDialogService.toggle();\n  }\n\n  public toggleSearch() {\n    this.viewDialogService.close();\n    this.informationDialogService.close();\n    this.helpDialogService.close();\n    this.contentSearchDialogService.toggle();\n  }\n\n  public toggleHelp() {\n    this.viewDialogService.close();\n    this.informationDialogService.close();\n    this.contentSearchDialogService.close();\n    this.helpDialogService.toggle();\n  }\n\n  public toggleFullscreen(): void {\n    return this.mimeDomHelper.toggleFullscreen();\n  }\n\n  private onFullscreenChange() {\n    this.isInFullscreen = this.fullscreenService.isFullscreen();\n    this.fullscreenLabel = this.isInFullscreen\n      ? this.intl.exitFullScreenLabel\n      : this.intl.fullScreenLabel;\n    this.changeDetectorRef.detectChanges();\n  }\n}\n","<mat-toolbar>\n  <ng-template #mimeHeaderBefore></ng-template>\n  @if (manifest) {\n    <div\n      data-testid=\"ngx-mime-manifest-label\"\n      class=\"label w-full\"\n      [matTooltip]=\"manifest.label\"\n      >{{ manifest.label }}</div\n    >\n  }\n  @if (isPagedManifest || hasRecognizedTextContent) {\n    <button\n      data-testid=\"ngx-mime-view-menu-button\"\n      #viewMenu\n      mat-icon-button\n      [attr.aria-label]=\"intl.layoutMenuLabel\"\n      [matTooltip]=\"intl.layoutMenuLabel\"\n      (click)=\"toggleView()\"\n      ><mat-icon aria-hidden=\"true\">view_module</mat-icon></button\n    >\n  }\n  <button\n    data-testid=\"ngx-mimeInformationDialogButton\"\n    mat-icon-button\n    [attr.aria-label]=\"intl.informationLabel\"\n    [matTooltip]=\"intl.informationLabel\"\n    (click)=\"toggleInformationDialog()\"\n  >\n    <mat-icon aria-hidden=\"true\">list</mat-icon>\n  </button>\n  @if (isContentSearchEnabled) {\n    <button\n      data-testid=\"ngx-mimeContentSearchDialogButton\"\n      mat-icon-button\n      [attr.aria-label]=\"intl.searchLabel\"\n      [matTooltip]=\"intl.searchLabel\"\n      (click)=\"toggleSearch()\"\n    >\n      <mat-icon aria-hidden=\"true\">search</mat-icon>\n    </button>\n  }\n  <button\n    data-testid=\"ngx-mimeHelpDialogButton\"\n    mat-icon-button\n    [attr.aria-label]=\"intl.help.helpLabel\"\n    [matTooltip]=\"intl.help.helpLabel\"\n    (click)=\"toggleHelp()\"\n  >\n    <mat-icon aria-hidden=\"true\">help</mat-icon>\n  </button>\n\n  @if (isFullscreenEnabled) {\n    <button\n      data-testid=\"ngx-mimeFullscreenButton\"\n      mat-icon-button\n      [attr.aria-label]=\"fullscreenLabel\"\n      [matTooltip]=\"fullscreenLabel\"\n      (click)=\"toggleFullscreen()\"\n    >\n      @if (isInFullscreen) {\n        <mat-icon aria-hidden=\"true\">fullscreen_exit</mat-icon>\n      } @else {\n        <mat-icon aria-hidden=\"true\">fullscreen</mat-icon>\n      }\n    </button>\n  }\n  <ng-template #mimeHeaderAfter></ng-template>\n</mat-toolbar>\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport {\n  SpinnerService,\n  SpinnerState,\n} from '../../core/spinner-service/spinner.service';\n\n@Component({\n  selector: 'mime-spinner',\n  templateUrl: './viewer-spinner.component.html',\n  styleUrls: ['./viewer-spinner.component.scss'],\n})\nexport class ViewerSpinnerComponent implements OnDestroy, OnInit {\n  public visible = false;\n  private subscriptions = new Subscription();\n\n  constructor(\n    private spinnerService: SpinnerService,\n    private changeDetectorRef: ChangeDetectorRef\n  ) {}\n\n  ngOnInit() {\n    this.subscriptions.add(\n      this.spinnerService.spinnerState.subscribe((state: SpinnerState) => {\n        this.visible = state.show;\n        this.changeDetectorRef.detectChanges();\n      })\n    );\n  }\n\n  ngOnDestroy() {\n    this.subscriptions.unsubscribe();\n  }\n}\n","<div class=\"mime-spinner\" [class.mime-spinner--active]=\"visible\">\n  <mat-spinner></mat-spinner>\n</div>\n","import { ElementRef, Injectable, ViewContainerRef } from '@angular/core';\nimport {\n  MatDialog,\n  MatDialogConfig,\n  MatDialogRef,\n  MatDialogState,\n} from '@angular/material/dialog';\nimport { interval, Subscription } from 'rxjs';\nimport { take } from 'rxjs/operators';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { Dimensions } from '../core/models/dimensions';\nimport { AttributionDialogResizeService } from './attribution-dialog-resize.service';\nimport { AttributionDialogComponent } from './attribution-dialog.component';\n\n@Injectable()\nexport class AttributionDialogService {\n  private dialogRef?: MatDialogRef<AttributionDialogComponent>;\n  private _el: ElementRef | null = null;\n  private _viewContainerRef: ViewContainerRef | undefined;\n  private attributionDialogHeight = 0;\n  private subscriptions!: Subscription;\n\n  constructor(\n    private dialog: MatDialog,\n    private mimeResizeService: MimeResizeService,\n    private attributionDialogResizeService: AttributionDialogResizeService,\n    private mimeDomHelper: MimeDomHelper\n  ) {}\n\n  public initialize(): void {\n    this.subscriptions = new Subscription();\n    this.subscriptions.add(\n      this.mimeResizeService.onResize.subscribe(() => {\n        if (this.isOpen()) {\n          const config = this.getDialogConfig();\n          this.dialogRef?.updatePosition(config.position);\n        }\n      })\n    );\n    this.subscriptions.add(\n      this.attributionDialogResizeService.onResize.subscribe(\n        (dimensions: Dimensions) => {\n          if (this.isOpen()) {\n            this.attributionDialogHeight = dimensions.height;\n            const config = this.getDialogConfig();\n            this.dialogRef?.updatePosition(config.position);\n          }\n        }\n      )\n    );\n  }\n\n  public destroy(): void {\n    this.close();\n    this.unsubscribe();\n  }\n\n  set el(el: ElementRef) {\n    this._el = el;\n  }\n\n  set viewContainerRef(viewContainerRef: ViewContainerRef) {\n    this._viewContainerRef = viewContainerRef;\n  }\n\n  public open(timeout?: number): void {\n    if (!this.isOpen()) {\n      const config = this.getDialogConfig();\n      this.dialogRef = this.dialog.open(AttributionDialogComponent, config);\n      this.dialogRef\n        .afterClosed()\n        .pipe(take(1))\n        .subscribe(() => {\n          this.mimeDomHelper.setFocusOnViewer();\n        });\n      this.closeDialogAfter(timeout);\n    }\n  }\n\n  public close(): void {\n    if (this.isOpen()) {\n      this.dialogRef?.close();\n    }\n  }\n\n  public toggle(): void {\n    this.isOpen() ? this.close() : this.open();\n  }\n\n  public isOpen(): boolean {\n    return this.dialogRef?.getState() === MatDialogState.OPEN;\n  }\n\n  private closeDialogAfter(seconds: number | undefined) {\n    if (seconds && seconds > 0) {\n      interval(seconds * 1000)\n        .pipe(take(1))\n        .subscribe(() => {\n          this.close();\n        });\n    }\n  }\n\n  private getDialogConfig(): MatDialogConfig {\n    if (!this._viewContainerRef) {\n      throw new Error('No viewContainerRef');\n    }\n\n    const dimensions = this.getPosition();\n    return {\n      hasBackdrop: false,\n      width: '180px',\n      panelClass: 'attribution-panel',\n      position: {\n        top: dimensions.top + 'px',\n        left: dimensions.left + 'px',\n      },\n      autoFocus: true,\n      restoreFocus: false,\n      viewContainerRef: this._viewContainerRef,\n    };\n  }\n\n  private getPosition() {\n    if (!this._el) {\n      throw new Error(`Could not find position because element is missing`);\n    }\n    const padding = 20;\n    const dimensions = this.mimeDomHelper.getBoundingClientRect(this._el);\n    return new Dimensions({\n      top:\n        dimensions.top + dimensions.height - this.attributionDialogHeight - 68,\n      left: dimensions.left + padding,\n    });\n  }\n\n  private unsubscribe() {\n    if (this.subscriptions) {\n      this.subscriptions.unsubscribe();\n    }\n  }\n}\n","export class ContentDialogState {\n  public isOpen = false;\n  public selectedIndex = 0;\n\n  constructor(fields?: { isOpen?: boolean; selectedIndex?: number }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n      this.selectedIndex =\n        fields.selectedIndex !== undefined\n          ? fields.selectedIndex\n          : this.selectedIndex;\n    }\n  }\n}\n","export class ContentsSearchDialogState {\n  public isOpen = false;\n\n  constructor(fields?: { isOpen?: boolean }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n    }\n  }\n}\n","export class HelpDialogState {\n  public isOpen = false;\n\n  constructor(fields?: { isOpen?: boolean }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n    }\n  }\n}\n","export class ViewDialogState {\n  public isOpen = false;\n\n  constructor(fields?: { isOpen?: boolean }) {\n    if (fields) {\n      this.isOpen = fields.isOpen !== undefined ? fields.isOpen : this.isOpen;\n    }\n  }\n}\n","import { ContentDialogState } from './content-dialog-state';\nimport { ContentsSearchDialogState } from './contents-search-dialog-state';\nimport { HelpDialogState } from './help-dialog-state';\nimport { ViewDialogState } from './view-dialog-state';\n\nexport class ViewerState {\n  public viewDialogState = new ViewDialogState();\n  public contentDialogState = new ContentDialogState();\n  public contentsSearchDialogState = new ContentsSearchDialogState();\n  public helpDialogState = new HelpDialogState();\n\n  constructor(fields?: {\n    viewDialogState?: ViewDialogState;\n    contentDialogState?: ContentDialogState;\n    contentsSearchDialogState?: ContentsSearchDialogState;\n    helpDialogState?: HelpDialogState;\n  }) {\n    if (fields) {\n      this.viewDialogState = fields.viewDialogState\n        ? fields.viewDialogState\n        : this.viewDialogState;\n      this.contentDialogState = fields.contentDialogState\n        ? fields.contentDialogState\n        : this.contentDialogState;\n      this.contentsSearchDialogState = fields.contentsSearchDialogState\n        ? fields.contentsSearchDialogState\n        : this.contentsSearchDialogState;\n      this.helpDialogState = fields.helpDialogState\n        ? fields.helpDialogState\n        : this.helpDialogState;\n    }\n  }\n}\n","import { AttributionDialogResizeService } from '../attribution-dialog/attribution-dialog-resize.service';\nimport { AttributionDialogService } from '../attribution-dialog/attribution-dialog.service';\nimport { CanvasGroupDialogService } from '../canvas-group-dialog/canvas-group-dialog.service';\nimport { ContentSearchDialogConfigStrategyFactory } from '../content-search-dialog/content-search-dialog-config-strategy-factory';\nimport { ContentSearchDialogService } from '../content-search-dialog/content-search-dialog.service';\nimport { AccessKeysService } from '../core/access-keys-handler-service/access-keys.service';\nimport { AltoService } from '../core/alto-service/alto.service';\nimport { CanvasService } from '../core/canvas-service/canvas-service';\nimport { ClickService } from '../core/click-service/click.service';\nimport { FullscreenService } from '../core/fullscreen-service/fullscreen.service';\nimport { HighlightService } from '../core/highlight-service/highlight.service';\nimport { IiifContentSearchService } from '../core/iiif-content-search-service/iiif-content-search.service';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { MimeDomHelper } from '../core/mime-dom-helper';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { ModeService } from '../core/mode-service/mode.service';\nimport { ContentSearchNavigationService } from '../core/navigation/content-search-navigation-service/content-search-navigation.service';\nimport { SpinnerService } from '../core/spinner-service/spinner.service';\nimport { StyleService } from '../core/style-service/style.service';\nimport { ViewerLayoutService } from '../core/viewer-layout-service/viewer-layout-service';\nimport { ViewerService } from '../core/viewer-service/viewer.service';\nimport { HelpDialogConfigStrategyFactory } from '../help-dialog/help-dialog-config-strategy-factory';\nimport { HelpDialogService } from '../help-dialog/help-dialog.service';\nimport { InformationDialogConfigStrategyFactory } from '../information-dialog/information-dialog-config-strategy-factory';\nimport { InformationDialogService } from '../information-dialog/information-dialog.service';\nimport { ViewDialogConfigStrategyFactory } from '../view-dialog/view-dialog-config-strategy-factory';\nimport { ViewDialogService } from '../view-dialog/view-dialog.service';\n\nexport const VIEWER_PROVIDERS = [\n  AccessKeysService,\n  AltoService,\n  AttributionDialogResizeService,\n  AttributionDialogService,\n  CanvasGroupDialogService,\n  CanvasService,\n  ClickService,\n  ContentSearchDialogConfigStrategyFactory,\n  ContentSearchDialogService,\n  ContentSearchNavigationService,\n  FullscreenService,\n  HelpDialogConfigStrategyFactory,\n  HelpDialogService,\n  HighlightService,\n  IiifContentSearchService,\n  IiifManifestService,\n  InformationDialogConfigStrategyFactory,\n  InformationDialogService,\n  MimeDomHelper,\n  MimeResizeService,\n  ModeService,\n  SpinnerService,\n  StyleService,\n  ViewDialogConfigStrategyFactory,\n  ViewDialogService,\n  ViewerLayoutService,\n  ViewerService,\n];\n","import { Platform } from '@angular/cdk/platform';\nimport {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  Component,\n  ElementRef,\n  EventEmitter,\n  HostListener,\n  Input,\n  NgZone,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  SimpleChanges,\n  ViewChild,\n  ViewContainerRef,\n} from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { interval, Subscription } from 'rxjs';\nimport { take, throttle } from 'rxjs/operators';\nimport { AttributionDialogService } from '../attribution-dialog/attribution-dialog.service';\nimport { CanvasGroupDialogService } from '../canvas-group-dialog/canvas-group-dialog.service';\nimport { ContentSearchDialogService } from '../content-search-dialog/content-search-dialog.service';\nimport { AccessKeysService } from '../core/access-keys-handler-service/access-keys.service';\nimport { AltoService } from '../core/alto-service/alto.service';\nimport { CanvasService } from '../core/canvas-service/canvas-service';\nimport { IiifManifestService } from '../core/iiif-manifest-service/iiif-manifest-service';\nimport { ManifestUtils } from '../core/iiif-manifest-service/iiif-manifest-utils';\nimport { MimeViewerIntl } from '../core/intl';\nimport { MimeResizeService } from '../core/mime-resize-service/mime-resize.service';\nimport { MimeViewerConfig } from '../core/mime-viewer-config';\nimport { ModeService } from '../core/mode-service/mode.service';\nimport {\n  ModeChanges,\n  RecognizedTextMode,\n  RecognizedTextModeChanges,\n  ViewerMode,\n} from '../core/models';\nimport { Manifest } from '../core/models/manifest';\nimport { ViewerLayout } from '../core/models/viewer-layout';\nimport { ViewerOptions } from '../core/models/viewer-options';\nimport { ViewerState } from '../core/models/viewerState';\nimport { StyleService } from '../core/style-service/style.service';\nimport { ViewerLayoutService } from '../core/viewer-layout-service/viewer-layout-service';\nimport { ViewerService } from '../core/viewer-service/viewer.service';\nimport { HelpDialogService } from '../help-dialog/help-dialog.service';\nimport { InformationDialogService } from '../information-dialog/information-dialog.service';\nimport { ViewDialogService } from '../view-dialog/view-dialog.service';\nimport { IiifContentSearchService } from './../core/iiif-content-search-service/iiif-content-search.service';\nimport { SearchResult } from './../core/models/search-result';\nimport { ViewerFooterComponent } from './viewer-footer/viewer-footer.component';\nimport { ViewerHeaderComponent } from './viewer-header/viewer-header.component';\nimport { VIEWER_PROVIDERS } from './viewer.providers';\nimport { slideInLeft } from './../shared/animations';\n\n@Component({\n  selector: 'mime-viewer',\n  templateUrl: './viewer.component.html',\n  styleUrls: ['./viewer.component.scss'],\n  animations: [slideInLeft],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: VIEWER_PROVIDERS,\n})\nexport class ViewerComponent implements OnInit, OnDestroy, OnChanges {\n  @Input() public manifestUri: string | null = null;\n  @Input() public q!: string;\n  @Input() public canvasIndex = 0;\n  @Input() public config: MimeViewerConfig = new MimeViewerConfig();\n  @Input() public tabIndex = 0;\n  @Output() viewerModeChanged: EventEmitter<ViewerMode> = new EventEmitter();\n  @Output() canvasChanged: EventEmitter<number> = new EventEmitter();\n  @Output() qChanged: EventEmitter<string> = new EventEmitter();\n  @Output() manifestChanged: EventEmitter<Manifest> = new EventEmitter();\n  @Output()\n  recognizedTextContentModeChanged: EventEmitter<RecognizedTextMode> =\n    new EventEmitter();\n  recognizedTextMode = RecognizedTextMode;\n  id = 'ngx-mime-mimeViewer';\n  openseadragonId = 'openseadragon';\n\n  private subscriptions = new Subscription();\n  private isCanvasPressed = false;\n  private currentManifest!: Manifest | null;\n  private viewerLayout: ViewerLayout | null = null;\n  private viewerState = new ViewerState();\n\n  recognizedTextContentMode: RecognizedTextMode = RecognizedTextMode.NONE;\n  showHeaderAndFooterState = 'hide';\n  osdToolbarState = 'hide';\n  public errorMessage: string | null = null;\n\n  // Viewchilds\n  @ViewChild('mimeHeader', { static: true })\n  private header!: ViewerHeaderComponent;\n  @ViewChild('mimeFooter', { static: true })\n  private footer!: ViewerFooterComponent;\n\n  constructor(\n    public snackBar: MatSnackBar,\n    public intl: MimeViewerIntl,\n    private iiifManifestService: IiifManifestService,\n    private viewDialogService: ViewDialogService,\n    private informationDialogService: InformationDialogService,\n    private attributionDialogService: AttributionDialogService,\n    private contentSearchDialogService: ContentSearchDialogService,\n    private helpDialogService: HelpDialogService,\n    private viewerService: ViewerService,\n    private resizeService: MimeResizeService,\n    private changeDetectorRef: ChangeDetectorRef,\n    private modeService: ModeService,\n    private iiifContentSearchService: IiifContentSearchService,\n    private accessKeysHandlerService: AccessKeysService,\n    private canvasService: CanvasService,\n    private viewerLayoutService: ViewerLayoutService,\n    private styleService: StyleService,\n    private altoService: AltoService,\n    private zone: NgZone,\n    private platform: Platform,\n    canvasGroupDialogService: CanvasGroupDialogService,\n    el: ElementRef,\n    viewContainerRef: ViewContainerRef,\n  ) {\n    this.id = this.viewerService.id;\n    this.openseadragonId = this.viewerService.openseadragonId;\n    informationDialogService.el = el;\n    informationDialogService.viewContainerRef = viewContainerRef;\n    attributionDialogService.el = el;\n    attributionDialogService.viewContainerRef = viewContainerRef;\n    viewDialogService.el = el;\n    viewDialogService.viewContainerRef = viewContainerRef;\n    contentSearchDialogService.el = el;\n    contentSearchDialogService.viewContainerRef = viewContainerRef;\n    helpDialogService.el = el;\n    helpDialogService.viewContainerRef = viewContainerRef;\n    canvasGroupDialogService.viewContainerRef = viewContainerRef;\n    resizeService.el = el;\n  }\n\n  get mimeHeaderBeforeRef(): ViewContainerRef {\n    return this.header.mimeHeaderBefore;\n  }\n\n  get mimeHeaderAfterRef(): ViewContainerRef {\n    return this.header.mimeHeaderAfter;\n  }\n\n  get mimeFooterBeforeRef(): ViewContainerRef {\n    return this.footer.mimeFooterBefore;\n  }\n\n  get mimeFooterAfterRef(): ViewContainerRef {\n    return this.footer.mimeFooterAfter;\n  }\n\n  ngOnInit(): void {\n    this.styleService.initialize();\n\n    this.subscriptions.add(\n      this.iiifManifestService.currentManifest.subscribe(\n        (manifest: Manifest | null) => {\n          if (manifest) {\n            this.initialize();\n            this.currentManifest = manifest;\n            this.manifestChanged.next(manifest);\n            this.viewerLayoutService.init(\n              ManifestUtils.isManifestPaged(manifest),\n            );\n            this.recognizedTextContentMode =\n              this.altoService.recognizedTextContentMode;\n            this.changeDetectorRef.detectChanges();\n            this.viewerService.setUpViewer(manifest, this.config);\n            if (this.config.attributionDialogEnabled && manifest.attribution) {\n              this.attributionDialogService.open(\n                this.config.attributionDialogHideTimeout,\n              );\n            }\n\n            if (this.q) {\n              this.iiifContentSearchService.search(manifest, this.q);\n            }\n          }\n        },\n      ),\n    );\n\n    this.subscriptions.add(\n      this.viewerService.onOsdReadyChange.subscribe((state: boolean) => {\n        // Don't reset current page when switching layout\n        if (\n          state &&\n          this.canvasIndex &&\n          !this.canvasService.currentCanvasGroupIndex\n        ) {\n          this.viewerService.goToCanvas(this.canvasIndex, false);\n        }\n      }),\n    );\n\n    this.subscriptions.add(\n      this.iiifManifestService.errorMessage.subscribe(\n        (error: string | null) => {\n          this.resetCurrentManifest();\n          this.errorMessage = error;\n          this.changeDetectorRef.detectChanges();\n        },\n      ),\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onQChange.subscribe((q: string) => {\n        this.qChanged.emit(q);\n      }),\n    );\n\n    this.subscriptions.add(\n      this.iiifContentSearchService.onChange.subscribe((sr: SearchResult) => {\n        this.viewerService.highlight(sr);\n      }),\n    );\n\n    this.subscriptions.add(\n      this.viewerService.isCanvasPressed.subscribe((value: boolean) => {\n        this.isCanvasPressed = value;\n        this.changeDetectorRef.detectChanges();\n      }),\n    );\n\n    this.subscriptions.add(\n      this.modeService.onChange.subscribe((mode: ModeChanges) => {\n        if (mode.currentValue !== undefined) {\n          this.toggleToolbarsState(mode.currentValue);\n        }\n        if (\n          mode.previousValue === ViewerMode.DASHBOARD &&\n          mode.currentValue === ViewerMode.PAGE\n        ) {\n          this.viewerState.viewDialogState.isOpen =\n            this.viewDialogService.isOpen();\n          this.viewerState.contentDialogState.isOpen =\n            this.informationDialogService.isOpen();\n          this.viewerState.contentDialogState.selectedIndex =\n            this.informationDialogService.getSelectedIndex();\n          this.viewerState.contentsSearchDialogState.isOpen =\n            this.contentSearchDialogService.isOpen();\n          this.viewerState.helpDialogState.isOpen =\n            this.helpDialogService.isOpen();\n          this.zone.run(() => {\n            this.viewDialogService.close();\n            this.informationDialogService.close();\n            this.contentSearchDialogService.close();\n            this.helpDialogService.close();\n          });\n        }\n        if (mode.currentValue === ViewerMode.DASHBOARD) {\n          this.zone.run(() => {\n            if (this.viewerState.viewDialogState.isOpen) {\n              this.viewDialogService.open();\n            }\n            if (this.viewerState.contentDialogState.isOpen) {\n              this.informationDialogService.open(\n                this.viewerState.contentDialogState.selectedIndex,\n              );\n            }\n            if (this.viewerState.contentsSearchDialogState.isOpen) {\n              this.contentSearchDialogService.open();\n            }\n            if (this.viewerState.helpDialogState.isOpen) {\n              this.helpDialogService.open();\n            }\n          });\n        }\n        this.zone.run(() => {\n          this.viewerModeChanged.emit(mode.currentValue);\n        });\n      }),\n    );\n\n    this.subscriptions.add(\n      this.canvasService.onCanvasGroupIndexChange.subscribe(\n        (canvasGroupIndex: number) => {\n          const canvasIndex =\n            this.canvasService.findCanvasByCanvasIndex(canvasGroupIndex);\n          if (canvasIndex !== -1) {\n            this.canvasChanged.emit(canvasIndex);\n          }\n        },\n      ),\n    );\n\n    this.subscriptions.add(\n      this.resizeService.onResize\n        .pipe(\n          throttle((val) =>\n            interval(ViewerOptions.transitions.OSDAnimationTime),\n          ),\n        )\n        .subscribe(() => {\n          setTimeout(() => {\n            this.viewerService.home();\n            this.changeDetectorRef.markForCheck();\n          }, ViewerOptions.transitions.OSDAnimationTime);\n        }),\n    );\n\n    this.subscriptions.add(\n      this.viewerLayoutService.onChange.subscribe(\n        (viewerLayout: ViewerLayout) => {\n          this.viewerLayout = viewerLayout;\n        },\n      ),\n    );\n\n    this.subscriptions.add(\n      this.altoService.onRecognizedTextContentModeChange$.subscribe(\n        (recognizedTextModeChanges: RecognizedTextModeChanges) => {\n          this.recognizedTextContentMode =\n            recognizedTextModeChanges.currentValue;\n          this.recognizedTextContentModeChanged.emit(\n            this.recognizedTextContentMode,\n          );\n          this.changeDetectorRef.markForCheck();\n        },\n      ),\n    );\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes['config']) {\n      this.viewerService.setConfig(this.config);\n      this.viewerLayoutService.setConfig(this.config);\n      this.iiifContentSearchService.setConfig(this.config);\n      this.altoService.setConfig(this.config);\n      this.modeService.setConfig(this.config);\n      this.modeService.initialize();\n    }\n\n    if (changes['manifestUri']) {\n      this.cleanup();\n      this.modeService.mode = this.config.initViewerMode;\n      this.manifestUri = changes['manifestUri'].currentValue;\n      this.loadManifest();\n    }\n\n    if (changes['q']) {\n      this.q = changes['q'].currentValue;\n      if (this.currentManifest) {\n        this.iiifContentSearchService.search(this.currentManifest, this.q);\n      }\n    }\n\n    if (changes['canvasIndex']) {\n      this.canvasIndex = changes['canvasIndex'].currentValue;\n      if (this.currentManifest) {\n        this.viewerService.goToCanvas(this.canvasIndex, true);\n      }\n    }\n  }\n\n  @HostListener('keydown', ['$event'])\n  handleKeys(event: KeyboardEvent) {\n    this.accessKeysHandlerService.handleKeyEvents(event);\n  }\n\n  @HostListener('drop', ['$event'])\n  public onDrop(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (this.config.isDropEnabled) {\n      const url = event.dataTransfer.getData('URL');\n      const params = new URL(url).searchParams;\n      const manifestUri = params.get('manifest');\n      const startCanvasId = params.get('canvas');\n      if (manifestUri) {\n        this.manifestUri = manifestUri.startsWith('//')\n          ? `${location.protocol}${manifestUri}`\n          : manifestUri;\n        this.cleanup();\n        this.loadManifest();\n        if (startCanvasId) {\n          this.manifestChanged.pipe(take(1)).subscribe((manifest) => {\n            const canvasIndex = manifest.sequences\n              ? manifest.sequences[0]?.canvases?.findIndex(\n                  (c) => c.id === startCanvasId,\n                )\n              : -1;\n            if (canvasIndex && canvasIndex !== -1) {\n              setTimeout(() => {\n                this.viewerService.goToCanvas(canvasIndex, true);\n              }, 0);\n            }\n          });\n        }\n      }\n    } else {\n      this.snackBar.open(this.intl.dropDisabled, undefined, {\n        duration: 3000,\n      });\n    }\n  }\n\n  @HostListener('dragover', ['$event'])\n  public onDragOver(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  @HostListener('dragleave', ['$event'])\n  public onDragLeave(event: any) {\n    event.preventDefault();\n    event.stopPropagation();\n  }\n\n  ngOnDestroy(): void {\n    this.subscriptions.unsubscribe();\n    this.cleanup();\n    this.iiifManifestService.destroy();\n    this.iiifContentSearchService.destroy();\n    this.styleService.destroy();\n  }\n\n  toggleToolbarsState(mode: ViewerMode): void {\n    if (this.header && this.footer) {\n      switch (mode) {\n        case ViewerMode.DASHBOARD:\n          this.showHeaderAndFooterState =\n            this.header.state =\n            this.footer.state =\n              'show';\n          if (this.config.navigationControlEnabled && this.osdToolbarState) {\n            this.osdToolbarState = 'hide';\n          }\n          break;\n        case ViewerMode.PAGE:\n          this.showHeaderAndFooterState =\n            this.header.state =\n            this.footer.state =\n              'hide';\n          if (this.config.navigationControlEnabled && this.osdToolbarState) {\n            this.osdToolbarState = 'show';\n          }\n          break;\n      }\n      this.changeDetectorRef.detectChanges();\n    }\n  }\n\n  private loadManifest(): void {\n    this.iiifManifestService.load(this.manifestUri).pipe(take(1)).subscribe();\n  }\n\n  private initialize() {\n    this.accessKeysHandlerService.initialize();\n    this.attributionDialogService.initialize();\n    this.viewDialogService.initialize();\n    this.informationDialogService.initialize();\n    this.contentSearchDialogService.initialize();\n    this.helpDialogService.initialize();\n    this.viewerService.initialize();\n    this.resizeService.initialize();\n  }\n\n  private cleanup() {\n    this.viewerState = new ViewerState();\n    this.accessKeysHandlerService.destroy();\n    this.attributionDialogService.destroy();\n    this.viewDialogService.destroy();\n    this.informationDialogService.destroy();\n    this.contentSearchDialogService.destroy();\n    this.helpDialogService.destroy();\n    this.viewerService.destroy();\n    this.resizeService.destroy();\n    this.resetErrorMessage();\n  }\n\n  private resetCurrentManifest(): void {\n    this.currentManifest = null;\n  }\n\n  private resetErrorMessage(): void {\n    this.errorMessage = null;\n  }\n\n  private hasMixBlendModeSupport(): boolean {\n    return !(this.platform.FIREFOX || this.platform.SAFARI);\n  }\n\n  goToHomeZoom(): void {\n    if (this.recognizedTextContentMode !== this.recognizedTextMode.ONLY) {\n      this.viewerService.home();\n    }\n  }\n\n  setClasses() {\n    return {\n      'mode-page': this.modeService.mode === ViewerMode.PAGE,\n      'mode-page-zoomed': this.modeService.isPageZoomed(),\n      'mode-dashboard': this.modeService.mode === ViewerMode.DASHBOARD,\n      'layout-one-page': this.viewerLayout === ViewerLayout.ONE_PAGE,\n      'layout-two-page': this.viewerLayout === ViewerLayout.TWO_PAGE,\n      'canvas-pressed': this.isCanvasPressed,\n      'broken-mix-blend-mode': !this.hasMixBlendModeSupport(),\n    };\n  }\n}\n","<div\n  [id]=\"id\"\n  class=\"viewer-container\"\n  [ngClass]=\"setClasses()\"\n  [hidden]=\"errorMessage !== null\"\n  [tabIndex]=\"tabIndex\"\n>\n  <mime-spinner></mime-spinner>\n  <mime-viewer-header\n    class=\"navbar navbar-header\"\n    #mimeHeader\n  ></mime-viewer-header>\n  @if (config.navigationControlEnabled) {\n    <mime-osd-toolbar [@slideInLeft]=\"osdToolbarState\"></mime-osd-toolbar>\n  }\n\n  <mat-drawer-container class=\"viewer-drawer-container\" autosize>\n    <mat-drawer\n      data-testid=\"ngx-mime-recognized-text-content-container\"\n      mode=\"side\"\n      position=\"end\"\n      (openedChange)=\"goToHomeZoom()\"\n      [opened]=\"recognizedTextContentMode !== recognizedTextMode.NONE\"\n      [ngClass]=\"{\n        only: recognizedTextContentMode === recognizedTextMode.ONLY,\n        split: recognizedTextContentMode === recognizedTextMode.SPLIT,\n        open: showHeaderAndFooterState === 'show'\n      }\"\n    >\n      @if (recognizedTextContentMode !== recognizedTextMode.NONE) {\n        <mime-recognized-text-content></mime-recognized-text-content>\n      }\n    </mat-drawer>\n    <mat-drawer-content>\n      <div [id]=\"openseadragonId\" class=\"openseadragon\"></div>\n    </mat-drawer-content>\n  </mat-drawer-container>\n\n  <mime-viewer-footer\n    class=\"navbar navbar-footer\"\n    #mimeFooter\n  ></mime-viewer-footer>\n</div>\n\n@if (errorMessage) {\n  <div class=\"error-container flex items-center justify-center\">\n    {{ intl.somethingHasGoneWrongLabel }}\n  </div>\n}\n","import { NgModule } from '@angular/core';\nimport 'd3';\nimport 'openseadragon';\nimport { AttributionDialogComponent } from './attribution-dialog/attribution-dialog.component';\nimport { CanvasGroupDialogComponent } from './canvas-group-dialog/canvas-group-dialog.component';\nimport { ContentSearchDialogComponent } from './content-search-dialog/content-search-dialog.component';\nimport { HelpDialogComponent } from './help-dialog/help-dialog.component';\nimport { InformationDialogComponent } from './information-dialog/information-dialog.component';\nimport { MetadataComponent } from './information-dialog/metadata/metadata.component';\nimport { TocComponent } from './information-dialog/table-of-contents/table-of-contents.component';\nimport { SharedModule } from './shared/shared.module';\nimport { IconComponent } from './view-dialog/icon/icon.component';\nimport { ViewDialogComponent } from './view-dialog/view-dialog.component';\nimport { OsdToolbarComponent } from './viewer/osd-toolbar/osd-toolbar.component';\nimport { RecognizedTextContentComponent } from './viewer/recognized-text-content/recognized-text-content.component';\nimport { CanvasGroupNavigatorComponent } from './viewer/viewer-footer/canvas-group-navigator/canvas-group-navigator.component';\nimport { ContentSearchNavigatorComponent } from './viewer/viewer-footer/content-search-navigator/content-search-navigator.component';\nimport { ViewerFooterComponent } from './viewer/viewer-footer/viewer-footer.component';\nimport { ViewerHeaderComponent } from './viewer/viewer-header/viewer-header.component';\nimport { ViewerSpinnerComponent } from './viewer/viewer-spinner/viewer-spinner.component';\nimport { ViewerComponent } from './viewer/viewer.component';\nimport { MimeViewerIntl } from './core/intl';\n\n@NgModule({\n  declarations: [\n    AttributionDialogComponent,\n    CanvasGroupDialogComponent,\n    CanvasGroupNavigatorComponent,\n    ContentSearchDialogComponent,\n    ContentSearchNavigatorComponent,\n    HelpDialogComponent,\n    IconComponent,\n    InformationDialogComponent,\n    MetadataComponent,\n    OsdToolbarComponent,\n    RecognizedTextContentComponent,\n    TocComponent,\n    ViewDialogComponent,\n    ViewerComponent,\n    ViewerFooterComponent,\n    ViewerHeaderComponent,\n    ViewerSpinnerComponent,\n  ],\n  imports: [SharedModule],\n  providers: [MimeViewerIntl],\n  exports: [ViewerComponent],\n})\nexport class MimeModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["OpenSeadragon","i1.ViewerLayoutService","BuilderUtils","SizesBuilder","TilesBuilder","ServiceBuilder","ResourceBuilder","ImagesBuilder","CanvasBuilder","SequenceBuilder","MetadataBuilder","StructureBuilder","TileSourceBuilder","IiifV3ManifestBuilder","IiifV2ManifestBuilder","i1.MimeViewerIntl","i3.SpinnerService","i3.IiifManifestService","i4.HighlightService","i5.CanvasService","i1","i1.ClickService","i2.CanvasService","i3.ModeService","i4.ViewerLayoutService","i5.IiifContentSearchService","i6.StyleService","i7.AltoService","i9.MimeViewerIntl","debounceTime","i1.ViewerService","i1.FullscreenService","i2.ViewerService","i2.MimeDomHelper","i1.CanvasService","i2.IiifContentSearchService","i2.MimeViewerIntl","i3","i4.MimeResizeService","i5.IiifManifestService","i6.IiifContentSearchService","i7.ContentSearchNavigationService","i8","i9","i10","i11","i12","i13","i2.ContentSearchDialogConfigStrategyFactory","i3.MimeResizeService","i2.IiifManifestService","i3.ViewerService","i4.CanvasService","i2","i4.IiifManifestService","i5.MimeResizeService","i6","i12.MetadataComponent","i13.TocComponent","i2.InformationDialogConfigStrategyFactory","i3.ViewerLayoutService","i5.AltoService","i6.MimeResizeService","i7","i15.IconComponent","i2.ViewDialogConfigStrategyFactory","i6.ContentSearchDialogService","i7.InformationDialogService","i8.ViewDialogService","i9.MimeDomHelper","i10.ContentSearchNavigationService","i11.AltoService","i1.MimeDomHelper","i3.AttributionDialogResizeService","i4.StyleService","i5.AccessKeysService","i5.MimeViewerIntl","i2.MimeResizeService","i4","i5","i6.ModeService","i3.AltoService","i6.HighlightService","i3.CanvasService","i4.CanvasGroupDialogService","i3.IiifContentSearchService","i4.ContentSearchNavigationService","i6.CanvasGroupNavigatorComponent","i7.ContentSearchNavigatorComponent","i2.HelpDialogConfigStrategyFactory","i2.InformationDialogService","i3.ContentSearchDialogService","i4.ViewDialogService","i5.HelpDialogService","i6.IiifManifestService","i7.FullscreenService","i8.MimeDomHelper","i1.SpinnerService","i4.MimeDomHelper","i5.InformationDialogService","i6.AttributionDialogService","i7.ContentSearchDialogService","i8.HelpDialogService","i9.ViewerService","i10.MimeResizeService","i11.ModeService","i12.IiifContentSearchService","i13.AccessKeysService","i14.CanvasService","i15.ViewerLayoutService","i16.StyleService","i17.AltoService","i19.CanvasGroupDialogService","i20","i22.OsdToolbarComponent","i23.RecognizedTextContentComponent","i24.ViewerFooterComponent","i25.ViewerHeaderComponent","i26.ViewerSpinnerComponent"],"mappings":"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"}